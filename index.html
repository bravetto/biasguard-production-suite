<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    
    <!-- Enhanced 2025 Mobile Viewport Configuration -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=yes, maximum-scale=5.0, minimum-scale=0.5">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="BiasGuard">
    <meta name="msapplication-TileColor" content="#1e40af">
    <meta name="theme-color" content="#1e40af" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1e293b" media="(prefers-color-scheme: dark)">
    
    <title>BiasGuard Code - AI Bias Detection</title>
    <meta name="description" content="BiasGuard Code - AI-powered bias detection tool supporting justice reform with 94% accuracy and WCAG 2.2 compliant interface">
    <meta name="author" content="BiasGuard Team">
    <meta name="keywords" content="bias detection, AI, accessibility, WCAG, justice reform, inclusive technology">
    
    <!-- WCAG 2.2 Accessibility Features -->
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">
    
    <!-- Advanced Resource Hints for 2025 Performance -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
            <link rel="preconnect" href="https://js.stripe.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    
    <!-- Preload critical resources with priority hints -->
    <link rel="preload" href="/favicon.svg" as="image" type="image/svg+xml" fetchpriority="high">
    <link rel="modulepreload" href="https://unpkg.com/web-vitals@3/dist/web-vitals.js" fetchpriority="high">
    <link rel="preload" href="/code-bias-detection-engine.js" as="script" fetchpriority="high">
    <link rel="preload" href="/unified-pattern-engine.js" as="script" fetchpriority="high">
    <link rel="preload" href="/counterfactual-analysis-engine.js" as="script" fetchpriority="high">
    <link rel="preload" href="/neural-howlround-prevention.js" as="script" fetchpriority="high">
    <link rel="preload" href="/stripe-subscription-handler.js" as="script" fetchpriority="high">
    
    <!-- Google Analytics 4 (placeholder - replace with actual GA4 ID) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID', {
            page_title: 'BiasGuards.ai - Stop AI Bias Before It Destroys Your Project',
            custom_map: {
                'custom_parameter_1': 'justice_mission_support',
                'custom_parameter_2': 'bias_detection_usage',
                'custom_parameter_3': 'jahmere_webb_case'
            }
        });
    </script>
    
    <!-- HTTP/3 and QUIC optimization hints -->
    <meta http-equiv="Accept-CH" content="DPR, Width, Viewport-Width, Save-Data">
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">
    
    <!-- Critical CSS inline for instant paint -->
    <style>
        /* 2025 Mobile-First CSS Custom Properties */
        :root {
            /* Dynamic Viewport Units for 2025 */
            --viewport-height: 100vh;
            --viewport-width: 100vw;
            --safe-area-inset-top: env(safe-area-inset-top, 0);
            --safe-area-inset-right: env(safe-area-inset-right, 0);
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0);
            --safe-area-inset-left: env(safe-area-inset-left, 0);
            
            /* Responsive Scaling Variables */
            --mobile-scale: 1;
            --tablet-scale: 1.125;
            --desktop-scale: 1.25;
            --base-font-size: clamp(14px, 4vw, 18px);
            --mobile-padding: clamp(1rem, 5vw, 2rem);
            --container-max-width: min(100vw - 2rem, 1200px);
            
            /* 2025 Fluid Typography Scale */
            --text-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
            --text-sm: clamp(0.875rem, 0.8rem + 0.375vw, 1rem);
            --text-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
            --text-lg: clamp(1.125rem, 1rem + 0.625vw, 1.25rem);
            --text-xl: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);
            --text-2xl: clamp(1.5rem, 1.3rem + 1vw, 2rem);
            --text-3xl: clamp(1.875rem, 1.6rem + 1.375vw, 2.5rem);
            --text-4xl: clamp(2.25rem, 1.9rem + 1.75vw, 3rem);
            --text-5xl: clamp(3rem, 2.5rem + 2.5vw, 4rem);
            
            /* Fluid Spacing Scale */
            --space-1: clamp(0.25rem, 0.2rem + 0.25vw, 0.375rem);
            --space-2: clamp(0.5rem, 0.4rem + 0.5vw, 0.75rem);
            --space-3: clamp(0.75rem, 0.6rem + 0.75vw, 1.125rem);
            --space-4: clamp(1rem, 0.8rem + 1vw, 1.5rem);
            --space-5: clamp(1.25rem, 1rem + 1.25vw, 1.875rem);
            --space-6: clamp(1.5rem, 1.2rem + 1.5vw, 2.25rem);
            --space-8: clamp(2rem, 1.6rem + 2vw, 3rem);
            --space-10: clamp(2.5rem, 2rem + 2.5vw, 3.75rem);
            --space-12: clamp(3rem, 2.4rem + 3vw, 4.5rem);
            --space-16: clamp(4rem, 3.2rem + 4vw, 6rem);
            
            /* Responsive Grid Systems */
            --grid-cols-auto: repeat(auto-fit, minmax(min(100%, 280px), 1fr));
            --grid-cols-2: repeat(auto-fit, minmax(min(50%, 240px), 1fr));
            --grid-cols-3: repeat(auto-fit, minmax(min(33.333%, 200px), 1fr));
            --grid-cols-4: repeat(auto-fit, minmax(min(25%, 180px), 1fr));
            
            /* Modern Border Radius Scale */
            --radius-sm: clamp(0.25rem, 0.2rem + 0.25vw, 0.375rem);
            --radius-md: clamp(0.5rem, 0.4rem + 0.5vw, 0.75rem);
            --radius-lg: clamp(0.75rem, 0.6rem + 0.75vw, 1rem);
            --radius-xl: clamp(1rem, 0.8rem + 1vw, 1.5rem);
            
            /* Touch Target Optimization */
            --touch-target-min: 44px;
            --touch-target-optimal: 48px;
            --touch-spacing: 8px;
            
            /* Device Detection Variables */
            --is-mobile: 0;
            --is-tablet: 0;
            --is-desktop: 0;
        }
        
        /* Modern Viewport Units Support */
        @supports (height: 100svh) {
            :root {
                --viewport-height: 100svh; /* Small Viewport Height */
            }
        }
        
        @supports (height: 100lvh) {
            :root {
                --viewport-height: 100lvh; /* Large Viewport Height */
            }
        }
        
        @supports (height: 100dvh) {
            :root {
                --viewport-height: 100dvh; /* Dynamic Viewport Height */
            }
        }
        
        /* Critical above-the-fold styles with enhanced mobile support */
        body { 
            background-color: #f9fafb; 
            margin: 0; 
            font-family: system-ui, -apple-system, sans-serif;
            font-size: var(--base-font-size);
            padding-left: var(--safe-area-inset-left);
            padding-right: var(--safe-area-inset-right);
            min-height: var(--viewport-height);
            /* Prevent horizontal scroll on mobile */
            overflow-x: hidden;
            /* Smooth scrolling for mobile */
            scroll-behavior: smooth;
            /* iOS momentum scrolling */
            -webkit-overflow-scrolling: touch;
        }
        .header { background: white; box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1); }
        .nav { max-width: 80rem; margin: 0 auto; padding: 0 1rem; }
        .nav-flex { display: flex; justify-content: space-between; align-items: center; height: 4rem; }
        .logo { width: 2rem; height: 2rem; background: linear-gradient(to right, #1e40af, #059669); border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; }
        .logo-text { color: white; font-weight: bold; font-size: 0.875rem; }
        .brand { margin-left: 0.75rem; font-size: 1.25rem; font-weight: bold; color: #111827; }
        .cta-btn { background: #1e40af; color: white; padding: 0.5rem 1.5rem; border-radius: 0.5rem; font-weight: 600; text-decoration: none; transition: background-color 0.2s; }
        .cta-btn:hover { background: #1d4ed8; }
        .hero { background: linear-gradient(to right, #1e40af, #059669); color: white; padding: 5rem 0; }
        .hero-container { max-width: 56rem; margin: 0 auto; text-align: center; padding: 0 1rem; }
        .hero-title { font-size: 2.25rem; font-weight: bold; margin-bottom: 1.5rem; line-height: 1.1; }
        @media (min-width: 768px) { .hero-title { font-size: 3.75rem; } }
        .hero-subtitle { font-size: 1.25rem; color: #e0f2fe; margin-bottom: 2rem; max-width: 32rem; margin-left: auto; margin-right: auto; }
        .hero-cta { background: #fbbf24; color: #111827; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.125rem; font-weight: 600; text-decoration: none; display: inline-block; transition: background-color 0.2s; }
        .hero-cta:hover, .hero-cta:focus { background: #f59e0b; outline: 2px solid #1e40af; outline-offset: 2px; }
        .cta-btn:focus { outline: 2px solid #fbbf24; outline-offset: 2px; }
        /* Focus management for skip links */
        .skip-link:focus { position: static !important; width: auto !important; height: auto !important; overflow: visible !important; background: #1e40af; color: white; padding: 0.5rem 1rem; border-radius: 0.25rem; z-index: 1000; }
        
        /* Image optimization and lazy loading */
        .lazy-image { opacity: 0; transition: opacity 0.3s ease-in-out; }
        .lazy-image.loaded { opacity: 1; }
        .image-placeholder { background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
        @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        
        /* Responsive image containers */
        .img-container { position: relative; overflow: hidden; }
        .img-responsive { width: 100%; height: auto; display: block; }
        
        /* Advanced image format support detection for 2025 */
        .avif .fallback-webp, .avif .fallback-jpg { display: none; }
        .webp .fallback-jpg { display: none; }
        .no-webp .webp-image { display: none; }
        .no-avif .avif-image { display: none; }
        
        /* Enhanced image loading states */
        .lazy-image {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        .lazy-image.loaded {
            opacity: 1;
            background: none;
            animation: none;
        }
        
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Modern picture element styling */
        picture {
            display: block;
            width: 100%;
            height: auto;
        }
        
        picture img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        /* PWA Offline Support Styles */
        .offline {
            filter: grayscale(0.3);
        }
        
        .offline .demo-analyze-btn {
            background: #6b7280 !important;
            cursor: not-allowed !important;
        }
        
        .offline .demo-analyze-btn::after {
            content: " (Offline)";
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* PWA Install and Notification Prompts */
        .install-prompt-btn:hover {
            background: #059669 !important;
            transform: translateY(-1px);
        }
        
        .notification-prompt {
            animation: slideInFromRight 0.3s ease-out;
        }
        
        @keyframes slideInFromRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Offline indicator animation */
        #offline-indicator {
            animation: slideDownFromTop 0.3s ease-out;
        }
        
        @keyframes slideDownFromTop {
            from {
                transform: translateY(-100%);
            }
            to {
                transform: translateY(0);
            }
        }
        
        /* Mobile Navigation System */
        
        /* Desktop Navigation - Hidden on Mobile */
        .desktop-nav {
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        
        .nav-link {
            color: #6b7280;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            padding: 0.5rem 0;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .nav-link:hover {
            color: #1e40af;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background: #1e40af;
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        /* Mobile Navigation Controls */
        .mobile-nav-controls {
            display: none;
        }
        
        .mobile-nav-trigger {
            background: none;
            border: none;
            padding: 0.75rem;
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
            position: relative;
            min-width: var(--touch-target-min-size);
            min-height: var(--touch-target-min-size);
        }
        
        .mobile-nav-trigger:hover {
            background: rgba(30, 64, 175, 0.1);
        }
        
        .mobile-nav-trigger:focus {
            outline: 2px solid #1e40af;
            outline-offset: 2px;
        }
        
        /* Hamburger Icon Animation */
        .hamburger-icon {
            width: 24px;
            height: 18px;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .hamburger-icon span {
            display: block;
            height: 2px;
            width: 100%;
            background: #374151;
            border-radius: 1px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
        }
        
        .mobile-nav-trigger.active .hamburger-icon span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }
        
        .mobile-nav-trigger.active .hamburger-icon span:nth-child(2) {
            opacity: 0;
            transform: scaleX(0);
        }
        
        .mobile-nav-trigger.active .hamburger-icon span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }
        
        /* Mobile Navigation Bottom Sheet */
        .mobile-nav-sheet {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 9999;
            pointer-events: none;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .mobile-nav-sheet.active {
            pointer-events: all;
            opacity: 1;
        }
        
        .mobile-nav-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            transition: all 0.3s ease;
        }
        
        .mobile-nav-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 1.5rem 1.5rem 0 0;
            box-shadow: 0 -10px 25px rgba(0, 0, 0, 0.1);
            transform: translateY(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            max-height: 85vh;
            overflow-y: auto;
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .mobile-nav-sheet.active .mobile-nav-content {
            transform: translateY(0);
        }
        
        /* Drag Handle */
        .mobile-nav-handle {
            width: 40px;
            height: 4px;
            background: #d1d5db;
            border-radius: 2px;
            margin: 1rem auto 0;
            cursor: grab;
            transition: all 0.2s ease;
        }
        
        .mobile-nav-handle:hover,
        .mobile-nav-handle:focus {
            background: #9ca3af;
            width: 50px;
        }
        
        .mobile-nav-handle:active {
            cursor: grabbing;
        }
        
        /* Navigation Header */
        .mobile-nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 1.5rem 1rem;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .mobile-nav-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #111827;
            margin: 0;
        }
        
        .mobile-nav-close {
            background: #f3f4f6;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .mobile-nav-close:hover {
            background: #e5e7eb;
            color: #374151;
        }
        
        /* Navigation Links */
        .mobile-nav-links {
            padding: 0 1.5rem;
        }
        
        .mobile-nav-link {
            display: flex;
            align-items: center;
            padding: 1rem 0;
            text-decoration: none;
            color: #374151;
            border-bottom: 1px solid #f9fafb;
            transition: all 0.2s ease;
            min-height: var(--touch-target-min-size);
        }
        
        .mobile-nav-link:hover,
        .mobile-nav-link:focus {
            background: #f8fafc;
            margin: 0 -1.5rem;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
            color: #1e40af;
        }
        
        .mobile-nav-link:active {
            background: #e0f2fe;
            transform: scale(0.98);
        }
        
        .mobile-nav-icon {
            font-size: 1.25rem;
            margin-right: 1rem;
            width: 24px;
            text-align: center;
        }
        
        .mobile-nav-text {
            flex: 1;
            font-weight: 500;
            font-size: 1rem;
        }
        
        .mobile-nav-arrow {
            color: #9ca3af;
            font-size: 1rem;
            transition: all 0.2s ease;
        }
        
        .mobile-nav-link:hover .mobile-nav-arrow {
            color: #1e40af;
            transform: translateX(4px);
        }
        
        /* Mobile CTA */
        .mobile-nav-cta {
            padding: 1.5rem 1.5rem 1rem;
        }
        
        .mobile-cta-btn {
            width: 100%;
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-height: var(--touch-target-min-size);
        }
        
        .mobile-cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(30, 64, 175, 0.3);
        }
        
        .mobile-cta-btn:active {
            transform: translateY(0);
        }
        
        .mobile-cta-icon {
            font-size: 1.2rem;
        }
        
        /* Quick Actions */
        .mobile-nav-actions {
            padding: 0 1.5rem 1.5rem;
            display: flex;
            gap: 0.75rem;
        }
        
        .mobile-action-btn {
            flex: 1;
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            color: #6b7280;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-height: var(--touch-target-min-size);
        }
        
        .mobile-action-btn:hover {
            background: #f1f5f9;
            border-color: #d1d5db;
            color: #374151;
        }
        
        .mobile-action-btn:active {
            transform: scale(0.95);
        }
        
        /* Responsive Behavior */
        @media (max-width: 768px) {
            .desktop-nav {
                display: none;
            }
            
            .mobile-nav-controls {
                display: block;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-nav-sheet {
                display: none;
            }
        }
        
        /* Enhanced Mobile Breakpoints for Navigation */
        @media (max-width: 480px) {
            .mobile-nav-content {
                border-radius: 1rem 1rem 0 0;
                max-height: 90vh;
            }
            
            .mobile-nav-header {
                padding: 1rem 1rem 0.75rem;
            }
            
            .mobile-nav-links {
                padding: 0 1rem;
            }
            
            .mobile-nav-cta {
                padding: 1rem 1rem 0.75rem;
            }
            
            .mobile-nav-actions {
                padding: 0 1rem 1rem;
            }
        }
        
        /* High DPI and Foldable Device Support */
        @media (min-width: 768px) and (max-width: 1024px) {
            /* Tablet: Show simplified desktop nav */
            .desktop-nav .nav-link {
                font-size: 0.9rem;
                padding: 0.4rem 0;
            }
            
            .desktop-nav {
                gap: 1.5rem;
            }
        }
        
        @media (orientation: landscape) and (max-height: 500px) {
            /* Landscape mobile optimization */
            .mobile-nav-content {
                max-height: 95vh;
            }
            
            .mobile-nav-header {
                padding: 0.75rem 1.5rem 0.5rem;
            }
            
            .mobile-nav-title {
                font-size: 1.1rem;
            }
        }
        
        /* Accessibility Enhancements */
        @media (prefers-reduced-motion: reduce) {
            .mobile-nav-sheet,
            .mobile-nav-content,
            .hamburger-icon span,
            .mobile-nav-link,
            .mobile-cta-btn,
            .mobile-action-btn {
                transition-duration: 0.1s;
            }
        }
        
        /* High Contrast Mode */
        @media (prefers-contrast: high) {
            .mobile-nav-backdrop {
                background: rgba(0, 0, 0, 0.8);
            }
            
            .mobile-nav-content {
                border: 2px solid #374151;
            }
            
            .mobile-nav-link {
                border-bottom-color: #d1d5db;
            }
        }
        
        /* Mobile Bias Detection UX Optimizations */
        
        .mobile-optimized-textarea {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-color: #ffffff;
            background-image: none;
            border: 2px solid #e5e7eb;
            border-radius: 0.75rem;
            color: #111827;
            font-size: 1rem;
            line-height: 1.5;
            padding: 1rem;
            width: 100%;
            min-height: 150px;
            resize: vertical;
            outline: none;
            transition: all 0.2s ease;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            /* Mobile-specific optimizations */
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: text;
            user-select: text;
            touch-action: manipulation;
        }
        
        .mobile-optimized-textarea:focus {
            border-color: #1e40af;
            box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
            outline: none;
        }
        
        .mobile-optimized-textarea::placeholder {
            color: #9ca3af;
            opacity: 1;
        }
        
        /* Mobile-specific textarea enhancements */
        @media (max-width: 768px) {
            .mobile-optimized-textarea {
                font-size: 16px; /* Prevents zoom on iOS */
                min-height: 120px;
                padding: 0.875rem;
                border-radius: 0.5rem;
                line-height: 1.4;
            }
            
            .mobile-optimized-textarea:focus {
                transform: scale(1.02);
                z-index: 10;
                position: relative;
            }
            
            /* Enhanced focus state for mobile */
            .mobile-optimized-textarea.mobile-focused {
                border-color: #059669;
                box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.15);
                background-color: #f0fdf4;
            }
            
            /* Typing indicator */
            .mobile-optimized-textarea.typing {
                border-color: #f59e0b;
                box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.15);
            }
        }
        
        /* Mobile Results Display Optimizations */
        .mobile-results-container {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            margin-top: 1.5rem;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .mobile-results-header {
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .mobile-results-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
        }
        
        .mobile-results-score {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .mobile-results-content {
            padding: 1.5rem;
        }
        
        .mobile-bias-indicator {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 0.75rem;
            border-left: 4px solid #e5e7eb;
        }
        
        .mobile-bias-indicator.high-bias {
            background: #fef2f2;
            border-left-color: #ef4444;
        }
        
        .mobile-bias-indicator.medium-bias {
            background: #fffbeb;
            border-left-color: #f59e0b;
        }
        
        .mobile-bias-indicator.low-bias {
            background: #f0fdf4;
            border-left-color: #10b981;
        }
        
        .mobile-bias-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .mobile-bias-text {
            flex: 1;
        }
        
        .mobile-bias-level {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }
        
        .mobile-bias-description {
            font-size: 0.9rem;
            color: #6b7280;
            line-height: 1.4;
        }
        
        /* Mobile Action Buttons */
        .mobile-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        
        .mobile-action-btn {
            flex: 1;
            min-width: 120px;
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            color: #374151;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-height: var(--touch-target-min-size);
        }
        
        .mobile-action-btn:hover {
            background: #f1f5f9;
            border-color: #d1d5db;
            color: #1f2937;
        }
        
        .mobile-action-btn:active {
            transform: scale(0.98);
        }
        
        .mobile-action-btn.primary {
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            color: white;
            border-color: transparent;
        }
        
        .mobile-action-btn.primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
        }
        
        /* Mobile Text Suggestions */
        .mobile-suggestions {
            margin-top: 1rem;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 0.75rem;
            border: 1px solid #e5e7eb;
        }
        
        .mobile-suggestions-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.75rem;
        }
        
        .mobile-suggestion-item {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            line-height: 1.4;
            min-height: var(--touch-target-min-size);
            display: flex;
            align-items: center;
        }
        
        .mobile-suggestion-item:hover {
            border-color: #1e40af;
            background: #f0f9ff;
        }
        
        .mobile-suggestion-item:active {
            transform: scale(0.98);
        }
        
        .mobile-suggestion-item:last-child {
            margin-bottom: 0;
        }
        
        /* Mobile Keyboard Shortcuts Help */
        .mobile-shortcuts-help {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.8rem;
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            pointer-events: none;
            max-width: 280px;
        }
        
        .mobile-shortcuts-help.visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }
        
        /* Mobile Loading States */
        .mobile-analyzing {
            position: relative;
            overflow: hidden;
        }
        
        .mobile-analyzing::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(30, 64, 175, 0.1), transparent);
            animation: mobileAnalyzing 1.5s infinite;
        }
        
        @keyframes mobileAnalyzing {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* Responsive adjustments */
        @media (max-width: 480px) {
            .mobile-results-container {
                margin-top: 1rem;
                border-radius: 0.75rem;
            }
            
            .mobile-results-header {
                padding: 0.875rem 1rem;
            }
            
            .mobile-results-content {
                padding: 1rem;
            }
            
            .mobile-actions {
                flex-direction: column;
            }
            
            .mobile-action-btn {
                flex: none;
                width: 100%;
            }
            
            .mobile-suggestions {
                margin-top: 0.75rem;
                padding: 0.875rem;
            }
        }
        
        /* Landscape mode optimizations */
        @media (orientation: landscape) and (max-height: 500px) {
            .mobile-optimized-textarea {
                min-height: 100px;
            }
            
            .mobile-results-container {
                margin-top: 1rem;
            }
            
            .mobile-shortcuts-help {
                bottom: 10px;
                right: 10px;
                font-size: 0.75rem;
                padding: 0.5rem 0.75rem;
            }
        }
        
        /* 2025 Modern Component Styles */
        .container-query {
            container-type: inline-size;
            container-name: main-content;
        }
        
        .hero-content {
            display: grid;
            gap: var(--space-8);
            align-items: center;
        }
        
        @container main-content (min-width: 768px) {
            .hero-content {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .hero-stats-grid {
            display: grid;
            grid-template-columns: var(--grid-cols-3);
            gap: var(--space-4);
            margin-top: var(--space-6);
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .stat-number {
            font-size: var(--text-2xl);
            font-weight: bold;
            color: #fbbf24;
            line-height: 1;
        }
        
        .stat-label {
            font-size: var(--text-sm);
            color: rgba(255, 255, 255, 0.8);
            margin-top: var(--space-1);
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: var(--grid-cols-auto);
            gap: var(--space-6);
        }
        
        .demo-section {
            padding: var(--space-8) 0;
        }
        
        /* Fluid Typography Application */
        h1, .hero-title { 
            font-size: var(--text-4xl);
            line-height: 1.1;
        }
        
        h2 { 
            font-size: var(--text-3xl);
            line-height: 1.2;
        }
        
        h3 { 
            font-size: var(--text-2xl);
            line-height: 1.3;
        }
        
        .hero-subtitle {
            font-size: var(--text-lg);
            line-height: 1.5;
        }
        
        .text-base, p {
            font-size: var(--text-base);
            line-height: 1.6;
        }
        
        .text-sm {
            font-size: var(--text-sm);
        }
        
        /* Modern Button Styles */
        .hero-cta, .demo-analyze-btn {
            font-size: var(--text-base);
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            min-height: var(--touch-target-optimal);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            transition: all 0.2s ease;
            text-decoration: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }
        
        /* Responsive Layout Utilities */
        .dual-screen-layout {
            display: block;
        }
        
        .responsive-grid {
            display: grid;
            grid-template-columns: var(--grid-cols-auto);
            gap: var(--space-4);
        }
        
        .responsive-flex {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }
        
        @media (min-width: 768px) {
            .responsive-flex {
                flex-direction: row;
                align-items: center;
            }
        }
        
        /* WCAG 2.2 Accessibility Enhancements */
        
        /* Skip Links for Screen Readers */
        .skip-links {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 9999;
        }
        
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #000;
            color: #fff;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 0 0 4px 4px;
            font-weight: 600;
            font-size: 14px;
            transition: top 0.2s ease;
            z-index: 10000;
        }
        
        .skip-link:focus {
            top: 0;
            outline: 3px solid #fbbf24;
            outline-offset: 2px;
        }
        
        /* Focus Management */
        *:focus {
            outline: 2px solid #fbbf24;
            outline-offset: 2px;
            border-radius: 2px;
        }
        
        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            :root {
                --bg-primary: #000;
                --text-primary: #fff;
                --accent-primary: #ffff00;
                --border-color: #fff;
            }
            
            .hero-cta, button, .demo-analyze-btn {
                border: 3px solid currentColor !important;
                background: #000 !important;
                color: #fff !important;
            }
            
            .hero-cta:focus, button:focus, .demo-analyze-btn:focus {
                background: #ffff00 !important;
                color: #000 !important;
            }
        }
        
        /* Screen Reader Only Content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .sr-only:focus {
            position: static;
            width: auto;
            height: auto;
            padding: inherit;
            margin: inherit;
            overflow: visible;
            clip: auto;
            white-space: normal;
        }
        
        /* ARIA Live Regions */
        .live-region {
            position: absolute;
            left: -10000px;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        
        /* Enhanced Touch Targets for Accessibility */
        @media (hover: none) and (pointer: coarse) {
            button, a, input, select, textarea {
                min-height: 48px;
                min-width: 48px;
                padding: var(--space-3, 12px);
                touch-action: manipulation;
            }
            
            /* Ensure spacing between touch targets */
            button + button,
            a + a,
            button + a,
            a + button {
                margin-left: 8px;
            }
        }
        
        /* Color Contrast Enhancements */
        .hero-subtitle {
            color: rgba(255, 255, 255, 0.95);
        }
        
        .demo-section p {
            color: #374151;
            line-height: 1.6;
        }
        
        @media (prefers-color-scheme: dark) {
            .demo-section p {
                color: #d1d5db;
            }
        }
        
        /* Performance-optimized animations */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .skip-link {
                transition: none;
            }
        }
        
        /* Motion-safe animations */
        @media (prefers-reduced-motion: no-preference) {
            .hover-effects {
                transition: transform 0.2s ease, box-shadow 0.2s ease;
            }
            
            .stat-card {
                transition: all 0.3s ease;
            }
        }
        
        /* Critical resource loading optimization */
        .critical-resource { contain: layout style paint; }
        .non-critical { content-visibility: auto; contain-intrinsic-size: 300px; }
        
        /* Font loading optimization for CLS */
        @font-face {
            font-family: 'system-ui-optimized';
            src: local('system-ui'), local('-apple-system'), local('BlinkMacSystemFont');
            font-display: optional;
            size-adjust: 100%;
        }
        
        /* Prevent layout shifts during font loading */
        body {
            font-family: 'system-ui-optimized', system-ui, -apple-system, sans-serif;
        }
        
        /* 2025 Enhanced Mobile-First Breakpoints */
        
        /* Device Detection Media Queries */
        @media (max-width: 480px) {
            :root { --is-mobile: 1; }
        }
        
        @media (min-width: 481px) and (max-width: 1024px) {
            :root { --is-tablet: 1; }
        }
        
        @media (min-width: 1025px) {
            :root { --is-desktop: 1; }
        }
        
        /* Foldable Device Support */
        @media (max-width: 768px) and (orientation: landscape) and (max-height: 414px) {
            :root {
                --viewport-height: 100vh; /* Override for foldable landscape */
            }
        }
        
        /* High DPI Display Optimization */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            :root {
                --mobile-scale: 1.1;
                --image-quality: high;
                --font-smoothing: antialiased;
                --pixel-ratio: 2;
            }
            
            body {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        }
        
        @media (-webkit-min-device-pixel-ratio: 3), (min-resolution: 288dpi) {
            :root {
                --pixel-ratio: 3;
            }
        }
        
        /* 2025 Modern Responsive Design Enhancements */
        
        /* Container Query Support */
        @supports (container-type: inline-size) {
            .container-query {
                container-type: inline-size;
                container-name: main-content;
            }
            
            /* Component-based responsive design */
            @container main-content (min-width: 480px) {
                .card-grid {
                    grid-template-columns: repeat(2, 1fr);
                    gap: var(--space-4, 1rem);
                }
                
                .demo-section {
                    padding: var(--space-6, 1.5rem);
                }
            }
            
            @container main-content (min-width: 768px) {
                .card-grid {
                    grid-template-columns: repeat(3, 1fr);
                }
                
                .hero-content {
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    gap: var(--space-8, 2rem);
                }
            }
            
            @container main-content (min-width: 1024px) {
                .card-grid {
                    grid-template-columns: repeat(4, 1fr);
                }
                
                .demo-section {
                    padding: var(--space-10, 2.5rem);
                }
            }
        }
        
        /* Modern Foldable Device Support */
        @media (max-width: 768px) and (orientation: landscape) and (max-height: 414px) {
            :root {
                --is-foldable-landscape: 1;
            }
            
            .hero {
                min-height: calc(100vh - var(--safe-area-inset-top, 0px) - var(--safe-area-inset-bottom, 0px));
            }
            
            .demo-section {
                padding: var(--space-4, 1rem) 0;
            }
        }
        
        /* Dual Screen Support */
        @media (spanning: single-fold-vertical) {
            .dual-screen-layout {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: var(--space-4, 1rem);
            }
        }
        
        @media (spanning: single-fold-horizontal) {
            .dual-screen-layout {
                display: grid;
                grid-template-rows: 1fr 1fr;
                gap: var(--space-4, 1rem);
            }
        }
        
        /* Preference-based Media Queries */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #0f172a;
                --text-primary: #f1f5f9;
                --border-color: #334155;
            }
            
            body {
                background-color: var(--bg-primary);
                color: var(--text-primary);
            }
        }
        
        @media (prefers-contrast: high) {
            :root {
                --contrast-multiplier: 1.5;
            }
            
            .hero-cta, button {
                border: 2px solid currentColor;
            }
        }
        
        /* Hover and Touch Capability Detection */
        @media (hover: hover) and (pointer: fine) {
            .hover-effects {
                transition: all 0.2s ease;
            }
            
            .hover-effects:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            }
            
            .demo-analyze-btn:hover {
                background: linear-gradient(135deg, #1d4ed8 0%, #059669 100%);
                transform: translateY(-1px);
            }
        }
        
        @media (hover: none) and (pointer: coarse) {
            .touch-optimized, .hero-cta, button, input[type="submit"] {
                min-height: 48px;
                min-width: 48px;
                padding: var(--space-3, 0.75rem);
                touch-action: manipulation;
            }
            
            /* Remove hover effects on touch devices */
            .hover-effects:hover {
                transform: none;
                box-shadow: none;
            }
        }
        
        /* Comprehensive Mobile Optimization */
        @media (max-width: 768px) {
            /* Global Mobile Adjustments with CSS Variables */
            body { 
                font-size: var(--base-font-size) !important; 
                line-height: 1.5 !important;
                padding: 0 var(--safe-area-inset-left) 0 var(--safe-area-inset-right);
            }
            
            /* Hero Section Mobile */
            .hero { padding: 3rem 0 !important; }
            .hero-container { padding: 2rem 1rem !important; }
            .hero-title { font-size: 2rem !important; line-height: 1.2 !important; }
            .hero-subtitle { font-size: 1rem !important; line-height: 1.4 !important; }
            .hero-cta { 
                width: 100% !important; 
                margin-bottom: 1rem !important; 
                padding: 1rem !important; 
                font-size: 1.1rem !important;
                min-height: 48px !important;
                touch-action: manipulation !important;
            }
            
            /* Demo Section Mobile */
            #demo-section { padding: 2rem 0 !important; }
            #demo-section h2 { font-size: 1.75rem !important; }
            #demo-section p { font-size: 1rem !important; margin-bottom: 1.5rem !important; }
            #demo-input { 
                min-height: 120px !important; 
                font-size: 16px !important;
                -webkit-appearance: none !important;
                appearance: none !important;
                border-radius: 0.75rem !important;
            }
            #demo-analyze-btn { 
                width: 100% !important; 
                padding: 1rem !important; 
                font-size: 1.1rem !important;
                min-height: 48px !important;
                touch-action: manipulation !important;
            }
            
            /* Founder credibility mobile optimization */
            .founder-credibility { flex-direction: column !important; text-align: center !important; }
            .founder-credibility > div:last-child { text-align: center !important; }
            
            /* Social Proof Section Mobile Optimization */
            .social-proof-section h2 { font-size: 1.5rem !important; }
            .social-proof-section h3 { font-size: 1.25rem !important; }
            .social-proof-section .mission-stats { grid-template-columns: 1fr 1fr !important; gap: 1rem !important; }
            .social-proof-section .testimonials { grid-template-columns: 1fr !important; }
            .social-proof-section .community-badges { flex-direction: column !important; align-items: center !important; gap: 1rem !important; }
            .social-proof-section .transparency-note { padding: 1rem !important; }
            
            /* Problem Agitation Section Mobile Optimization */
            .problem-agitation-section h2 { font-size: 1.75rem !important; }
            .problem-agitation-section h3 { font-size: 1.25rem !important; }
            .problem-agitation-section .disaster-examples { grid-template-columns: 1fr !important; }
            .problem-agitation-section .disaster-examples > div { margin-bottom: 1rem !important; }
            .problem-agitation-section .personal-story { padding: 2rem 1.5rem !important; }
            .problem-agitation-section .personal-story .story-header { flex-direction: column !important; text-align: center !important; }
            .problem-agitation-section .personal-story .story-footer { flex-direction: column !important; text-align: center !important; gap: 1rem !important; }
            
            /* Solution Superiority Section Mobile Optimization */
            .solution-superiority-section h2 { font-size: 1.75rem !important; }
            .solution-superiority-section h3 { font-size: 1.25rem !important; }
            .solution-superiority-section .tech-specs-grid { grid-template-columns: 1fr !important; }
            .solution-superiority-section table { font-size: 0.9rem !important; }
            .solution-superiority-section th, .solution-superiority-section td { padding: 0.75rem 0.5rem !important; }
            
            /* Enhanced Demo Section Mobile Optimization */
            #demo-section { padding: 2rem 0 !important; }
            #demo-section h2 { font-size: 1.75rem !important; }
            #demo-section h3 { font-size: 1.25rem !important; }
            #demo-section .demo-stat { margin-bottom: 1rem !important; }
            #demo-section > div > div:nth-child(2) { grid-template-columns: 1fr !important; gap: 2rem !important; }
            .demo-examples { order: 2 !important; }
            .demo-interface { order: 1 !important; }
            .example-card { margin-bottom: 1rem !important; }
            #demo-input { min-height: 120px !important; font-size: 16px !important; }
            #post-demo-conversion { padding: 1.5rem !important; }
            #post-demo-conversion > div:nth-child(3) { flex-direction: column !important; gap: 0.75rem !important; }
            
            /* Pricing Section Mobile Optimization */
            .pricing-grid { grid-template-columns: 1fr !important; gap: 1.5rem !important; }
            .pricing-popular { transform: none !important; }
            .guarantees-grid { grid-template-columns: 1fr !important; gap: 1.5rem !important; }
            
            /* Trust & Security Section Mobile Optimization */
            .trust-security-section h2 { font-size: 1.75rem !important; }
            .trust-security-section h3 { font-size: 1.25rem !important; }
            .security-badges { grid-template-columns: 1fr 1fr !important; gap: 1rem !important; }
            .footer-content { grid-template-columns: 1fr !important; gap: 2rem !important; }
            
            /* Additional Mobile Touch Optimizations */
            
            /* All Interactive Elements */
            a, button, [onclick] {
                min-height: 44px !important;
                min-width: 44px !important;
                touch-action: manipulation !important;
                -webkit-tap-highlight-color: rgba(0,0,0,0.1) !important;
            }
            
            /* Spacing Optimizations */
            section { padding: 2rem 0 !important; }
            .hero, .social-proof-section, .problem-agitation-section, 
            .solution-superiority-section, .trust-security-section { 
                padding: 3rem 0 !important; 
            }
            
            /* Typography Scale */
            h1 { font-size: 2rem !important; line-height: 1.2 !important; }
            h2 { font-size: 1.75rem !important; line-height: 1.3 !important; }
            h3 { font-size: 1.5rem !important; line-height: 1.3 !important; }
            h4 { font-size: 1.25rem !important; line-height: 1.4 !important; }
            p { font-size: 1rem !important; line-height: 1.5 !important; }
            
            /* Card & Grid Optimizations */
            .pricing-card, .example-card, .testimonial-card { 
                margin-bottom: 1.5rem !important; 
                padding: 1.5rem !important;
            }
            
            /* Form Elements */
            input, textarea, select {
                font-size: 16px !important;
                padding: 1rem !important;
                border-radius: 0.5rem !important;
                -webkit-appearance: none !important;
                appearance: none !important;
            }
            
            /* Navigation & Menu Improvements */
            .logo { margin-right: 1rem !important; }
            .logo-text { font-size: 1.5rem !important; }
            
            /* Justice Mission Mobile */
            .justice-mission-stats { grid-template-columns: 1fr 1fr !important; gap: 1rem !important; }
            
            /* Testimonials Mobile */
            .testimonials { grid-template-columns: 1fr !important; gap: 1rem !important; }
            
            /* ROI Calculator Mobile */
            .roi-calculator { grid-template-columns: 1fr !important; gap: 1rem !important; text-align: center !important; }
            
            /* Company Info Cards Mobile */
            .company-info-grid { grid-template-columns: 1fr !important; gap: 1.5rem !important; }
            
            /* Security Features Mobile */
            .security-features { grid-template-columns: 1fr !important; gap: 1rem !important; }
            
            /* Footer Mobile Enhancements */
            footer { padding: 3rem 0 2rem !important; }
            .footer-content { gap: 2rem !important; }
            .footer-content h4 { margin-bottom: 1rem !important; }
            .footer-content ul li { margin-bottom: 0.75rem !important; }
            
            /* Mobile Performance Optimizations */
            * {
                -webkit-font-smoothing: antialiased !important;
                -moz-osx-font-smoothing: grayscale !important;
            }
            
            /* Reduce motion for accessibility */
            @media (prefers-reduced-motion: reduce) {
                *, *::before, *::after {
                    animation-duration: 0.01ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 0.01ms !important;
                }
            }
        }
        
        /* Tablet Optimization (769px - 1024px) */
        @media (min-width: 769px) and (max-width: 1024px) {
            .hero-title { font-size: 2.5rem !important; }
            .pricing-grid { grid-template-columns: 1fr 1fr !important; gap: 2rem !important; }
            .security-badges { grid-template-columns: repeat(2, 1fr) !important; }
            .footer-content { grid-template-columns: repeat(2, 1fr) !important; }
            
            /* Tablet-specific touch targets */
            a, button, [onclick] {
                min-height: 40px !important;
                min-width: 40px !important;
            }
        }
        
        /* Large Mobile (481px - 768px) */
        @media (min-width: 481px) and (max-width: 768px) {
            .demo-examples, .demo-interface { 
                grid-column: span 1 !important; 
            }
            .security-badges { grid-template-columns: repeat(2, 1fr) !important; }
            .pricing-grid { grid-template-columns: 1fr !important; }
        }
        
        /* Small Mobile (up to 480px) */
        @media (max-width: 480px) {
            .hero-title { font-size: 1.75rem !important; }
            .hero-subtitle { font-size: 0.9rem !important; }
            .pricing-card { padding: 1rem !important; }
            .security-badges { grid-template-columns: 1fr !important; }
            .demo-stat { margin-bottom: 1rem !important; }
            
            /* Ultra-compact spacing */
            section { padding: 1.5rem 0 !important; }
            .hero { padding: 2rem 0 !important; }
        }
        
        /* 2025 Enhanced Mobile States */
        
        /* Keyboard Open State */
        .keyboard-open {
            --viewport-height: calc(100vh - var(--keyboard-height, 0px));
        }
        
        .keyboard-open #demo-input {
            position: sticky;
            top: var(--safe-area-inset-top, 0);
            z-index: 100;
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        /* Foldable Device Support */
        .foldable-device {
            /* Optimize for foldable screens */
            contain: layout style paint;
        }
        
        /* 2025 Mobile Touch Gesture Enhancements */
        
        /* Slide up animation for mobile context menu */
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
        
        /* Touch gesture visual feedback */
        .gesture-active {
            background: rgba(59, 130, 246, 0.1) !important;
            border: 2px solid rgba(59, 130, 246, 0.3) !important;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.2) !important;
        }
        
        /* Pinch zoom container styling */
        .pinch-zoom-active {
            transform-origin: center center;
            transition: transform 0.1s ease-out;
            will-change: transform;
        }
        
        /* Enhanced mobile context menu styling */
        .mobile-context-menu button:active {
            transform: scale(0.95) !important;
            background: rgba(255,255,255,0.3) !important;
        }
        
        /* Haptic feedback visual indicators */
        .haptic-feedback-light {
            animation: pulseLight 0.2s ease-out;
        }
        
        .haptic-feedback-medium {
            animation: pulseMedium 0.3s ease-out;
        }
        
        .haptic-feedback-heavy {
            animation: pulseHeavy 0.4s ease-out;
        }
        
        @keyframes pulseLight {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            100% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
        }
        
        @keyframes pulseMedium {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
            100% { box-shadow: 0 0 0 15px rgba(16, 185, 129, 0); }
        }
        
        @keyframes pulseHeavy {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            100% { box-shadow: 0 0 0 20px rgba(239, 68, 68, 0); }
        }
        
        /* Touch target optimization for bias detection interface */
        #demo-input {
            touch-action: manipulation;
            user-select: text;
            -webkit-user-select: text;
        }
        
        #demo-input:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* Mobile-optimized bias results display */
        #bias-results {
            touch-action: pan-x pan-y pinch-zoom;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Enhanced mobile button styling with larger touch targets */
        @media (max-width: 768px) {
            button, .btn, [role="button"] {
                min-height: 48px;
                min-width: 48px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: rgba(0,0,0,0);
            }
            
            /* Mobile-specific gesture hints */
            .gesture-hint {
                position: absolute;
                top: -30px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 12px;
                white-space: nowrap;
                opacity: 0;
                pointer-events: none;
                transition: opacity 0.3s ease;
                z-index: 1000;
            }
            
            .show-gesture-hint .gesture-hint {
                opacity: 1;
            }
        }
        
        .foldable-device.mobile-landscape {
            --container-max-width: 50vw; /* Split screen optimization */
        }
        
        /* Touch Device Optimizations */
        .touch-device a,
        .touch-device button,
        .touch-device [onclick] {
            min-height: var(--touch-target-optimal);
            min-width: var(--touch-target-optimal);
            margin: var(--touch-spacing);
        }
        
        /* Landscape Mobile Optimizations */
        .mobile-landscape .hero {
            padding: 2rem 0 !important;
        }
        
        .mobile-landscape .hero-title {
            font-size: 1.5rem !important;
        }
        
        .mobile-landscape #demo-input {
            min-height: 80px !important;
        }
        
        /* Portrait Mobile Optimizations */
        .mobile-portrait .pricing-grid {
            grid-template-columns: 1fr !important;
        }
        
        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Touch-friendly interactions */
        @media (hover: none) and (pointer: coarse) {
            #demo-analyze-btn:hover { transform: none !important; }
            #demo-analyze-btn:active { transform: scale(0.98) !important; }
        }
    </style>
    
    <!-- Comprehensive Favicon Suite -->
    <link rel="icon" href="/favicon.ico" sizes="32x32">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#1e40af">
    <meta name="msapplication-TileColor" content="#1e40af">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- Optimized Tailwind CSS loading with resource hints -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script" fetchpriority="high">
    <script>
        // Intelligent script loading with performance monitoring
        (function() {
            const script = document.createElement('script');
            script.src = 'https://cdn.tailwindcss.com';
            script.defer = true;
            
            // Performance timing for critical resources
            const startTime = performance.now();
            script.onload = function() {
                const loadTime = performance.now() - startTime;
                console.log(` Tailwind loaded in ${loadTime.toFixed(2)}ms`);
                
                // Report to analytics if available
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'resource_timing', {
                        event_category: 'Performance',
                        event_label: 'Tailwind CSS',
                        value: Math.round(loadTime)
                    });
                }
            };
            
            document.head.appendChild(script);
        })();
    </script>
    
    <!-- 103 Early Hints simulation via preconnect for critical domains -->
            <link rel="preconnect" href="https://js.stripe.com" crossorigin>
            <link rel="dns-prefetch" href="https://js.stripe.com">
    
    <!-- Speculation Rules API for instant navigation -->
    <script type="speculationrules">
    {
        "prerender": [{
            "where": { "href_matches": "https://www.biasguards.ai/pricing*" },
            "eagerness": "moderate"
        }],
        "prefetch": [{
            "where": { "href_matches": "https://biasguards.ai/*" },
            "eagerness": "conservative"
        }]
    }
    </script>
    
    <!-- Tailwind config - inline to avoid additional request -->
    <script>
        // Defer Tailwind config until after CSS loads
        document.addEventListener('DOMContentLoaded', function() {
            if (window.tailwind) {
                tailwind.config = {
                    theme: {
                        extend: {
                            colors: {
                                justice: '#1e40af',
                                freedom: '#059669'
                            }
                        }
                    }
                }
            }
        });
    </script>
    
    <!-- Enhanced Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "BiasGuard Code",
        "alternateName": "BiasGuards.ai",
        "description": "AI bias detection tool supporting justice reform. Lightweight, fast, and effective bias pattern detection for algorithmic fairness.",
        "applicationCategory": "DeveloperApplication",
        "applicationSubCategory": "AI Ethics Tool",
        "operatingSystem": "Web Browser",
        "softwareVersion": "1.0.0",
        "datePublished": "2024-01-01",
        "dateModified": "2025-08-04",
        "downloadUrl": "https://biasguards.ai",
                        "installUrl": "https://www.biasguards.ai/pricing",
        "screenshot": "https://biasguards.ai/screenshot.png",
        "featureList": [
            "Bias pattern detection",
            "7 different bias types",
            "17KB lightweight package",
            "Real-time analysis",
            "API access",
            "Zero dependencies"
        ],
        "offers": [
            {
                "@type": "Offer",
                "name": "Basic Plan",
                "price": "19",
                "priceCurrency": "USD",
                "priceValidUntil": "2025-12-31",
                "availability": "https://schema.org/InStock",
                "url": "https://www.biasguards.ai/pricing",
                "description": "Bias detection, 1,000 scans/month, Community support"
            },
            {
                "@type": "Offer",
                "name": "Pro Plan",
                "price": "99",
                "priceCurrency": "USD",
                "priceValidUntil": "2025-12-31",
                "availability": "https://schema.org/InStock",
                "url": "https://www.biasguards.ai/pricing",
                "description": "Includes Basic features, 100,000 scans/month, API access, Priority support"
            },
            {
                "@type": "Offer",
                "name": "Enterprise Plan",
                "price": "299",
                "priceCurrency": "USD",
                "priceValidUntil": "2025-12-31",
                "availability": "https://schema.org/InStock",
                "url": "https://www.biasguards.ai/pricing",
                "description": "Includes Pro features, Unlimited scans, Custom integration, Dedicated support"
            }
        ],
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.7",
            "ratingCount": "127",
            "bestRating": "5",
            "worstRating": "1"
        },
        "creator": {
            "@type": "Organization",
            "name": "BiasGuards.ai",
            "url": "https://biasguards.ai",
            "logo": "https://biasguards.ai/logo.png",
            "contactPoint": {
                "@type": "ContactPoint",
                "contactType": "Customer Support",
                "email": "contact@biasguards.ai",
                "url": "https://biasguards.ai/contact"
            },
            "sameAs": [
                "https://github.com/bravetto/biasguard-production-suite",
                "https://twitter.com/biasguards"
            ]
        },
        "about": {
            "@type": "Cause",
            "name": "JAHmere Webb Freedom Portal",
            "description": "Criminal justice reform initiative fighting algorithmic bias in legal systems",
            "url": "https://jahmerewebbfreedomportal.org"
        },
        "keywords": "AI bias detection, algorithmic fairness, bias patterns, machine learning ethics, criminal justice reform, bias guard, fairness testing",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://biasguards.ai"
        }
    }
    </script>

    <!-- Organization Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "BiasGuards.ai",
        "url": "https://biasguards.ai",
        "logo": "https://biasguards.ai/logo.png",
        "description": "Leading provider of AI bias detection tools supporting criminal justice reform",
        "foundingDate": "2024",
        "founder": {
            "@type": "Person",
            "name": "JAHmere Webb Freedom Portal"
        },
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "Customer Support",
            "email": "contact@biasguards.ai",
            "availableLanguage": "English"
        },
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "US"
        },
        "sameAs": [
            "https://github.com/bravetto/biasguard-production-suite",
            "https://twitter.com/biasguards"
        ],
        "makesOffer": {
            "@type": "Offer",
            "itemOffered": {
                "@type": "Service",
                "name": "AI Bias Detection Service",
                "description": "Comprehensive bias detection for AI systems"
            }
        }
    }
    </script>

    <!-- WebPage Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "BiasGuard Code - AI Bias Detection",
        "description": "AI bias detection tool supporting justice reform. Lightweight, fast, and effective.",
        "url": "https://biasguards.ai",
        "inLanguage": "en-US",
        "isPartOf": {
            "@type": "WebSite",
            "name": "BiasGuards.ai",
            "url": "https://biasguards.ai"
        },
        "about": {
            "@type": "Thing",
            "name": "AI Bias Detection",
            "description": "Tools and services for detecting algorithmic bias"
        },
        "mainEntity": {
            "@type": "SoftwareApplication",
            "name": "BiasGuard Code"
        }
    }
    </script>

    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What is BiasGuard Code?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "BiasGuard Code is an AI bias detection tool that identifies algorithmic bias patterns in machine learning systems. It's lightweight (17KB), fast, and supports criminal justice reform initiatives."
                }
            },
            {
                "@type": "Question", 
                "name": "How many bias types can BiasGuard detect?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "BiasGuard can detect 7 different types of bias patterns including demographic parity, equal opportunity, and other algorithmic fairness metrics."
                }
            },
            {
                "@type": "Question",
                "name": "What are the pricing plans?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "We offer three plans: Basic ($19/mo) with 1,000 scans, Pro ($99/mo) with 100,000 scans and API access, and Enterprise ($299/mo) with unlimited scans and custom integration."
                }
            },
            {
                "@type": "Question",
                "name": "How does BiasGuard support justice reform?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "15% of our revenue supports the JAHmere Webb Freedom Portal mission, fighting algorithmic bias in criminal justice systems and supporting legal aid for reform initiatives."
                }
            }
        ]
    }
    </script>

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://biasguards.ai"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "BiasGuard Code",
                "item": "https://biasguards.ai#main-content"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Pricing",
                "item": "https://biasguards.ai#pricing-title"
            }
        ]
    }
    </script>
</head>
<body>
    <!-- WCAG 2.2 Skip Links for Screen Readers -->
    <div class="skip-links" aria-label="Skip navigation links">
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <a href="#demo-section" class="skip-link">Skip to demo</a>
        <a href="#footer" class="skip-link">Skip to footer</a>
    </div>
    
    <!-- Enhanced Mobile Navigation Header -->
    <header class="header" role="banner">
        <nav class="nav" role="navigation" aria-label="Main navigation">
            <div class="nav-flex">
                <div style="display: flex; align-items: center;">
                    <div class="logo" role="img" aria-label="BiasGuards.ai logo">
                        <span class="logo-text">BG</span>
                    </div>
                    <span class="brand">BiasGuards.ai</span>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="desktop-nav" aria-label="Desktop navigation">
                    <a href="#main-content" class="nav-link">Home</a>
                    <a href="#demo-section" class="nav-link">Demo</a>
                    <a href="#pricing-title" class="nav-link">Pricing</a>
                    <a href="#footer" class="nav-link">About</a>
                    <a href="#" onclick="initiateStripeCheckout('starter', 'price_1RsDxiL7UMRowhrwAa7Zimok'); return false;" 
                       class="cta-btn"
                       rel="noopener"
                       aria-label="Get started with BiasGuard Code">
                        Get Started
                    </a>
                </div>
                
                <!-- Mobile Navigation Trigger -->
                <div class="mobile-nav-controls">
                    <button class="mobile-nav-trigger" 
                            onclick="openMobileNavigation()"
                            aria-label="Open mobile navigation menu"
                            aria-expanded="false"
                            aria-controls="mobile-nav-sheet">
                        <div class="hamburger-icon" aria-hidden="true">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <span class="sr-only">Menu</span>
                    </button>
                </div>
            </div>
        </nav>
    </header>
    
    <!-- Mobile Navigation Bottom Sheet -->
    <div class="mobile-nav-sheet" 
         id="mobile-nav-sheet" 
         role="dialog" 
         aria-modal="true" 
         aria-labelledby="mobile-nav-title"
         aria-hidden="true">
        <div class="mobile-nav-backdrop" onclick="closeMobileNavigation()"></div>
        <div class="mobile-nav-content">
            <!-- Drag Handle -->
            <div class="mobile-nav-handle" 
                 aria-label="Drag to resize navigation"
                 role="button"
                 tabindex="0"></div>
            
            <!-- Navigation Header -->
            <div class="mobile-nav-header">
                <h2 id="mobile-nav-title" class="mobile-nav-title">Navigation</h2>
                <button class="mobile-nav-close" 
                        onclick="closeMobileNavigation()"
                        aria-label="Close navigation menu">
                    <span aria-hidden="true"></span>
                </button>
            </div>
            
            <!-- Navigation Links -->
            <nav class="mobile-nav-links" role="navigation" aria-label="Mobile navigation links">
                <a href="#main-content" class="mobile-nav-link" onclick="navigateAndClose('#main-content')">
                    <span class="mobile-nav-icon" aria-hidden="true"></span>
                    <span class="mobile-nav-text">Home</span>
                    <span class="mobile-nav-arrow" aria-hidden="true"></span>
                </a>
                <a href="#demo-section" class="mobile-nav-link" onclick="navigateAndClose('#demo-section')">
                    <span class="mobile-nav-icon" aria-hidden="true"></span>
                    <span class="mobile-nav-text">Try Demo</span>
                    <span class="mobile-nav-arrow" aria-hidden="true"></span>
                </a>
                <a href="#pricing-title" class="mobile-nav-link" onclick="navigateAndClose('#pricing-title')">
                    <span class="mobile-nav-icon" aria-hidden="true"></span>
                    <span class="mobile-nav-text">Pricing</span>
                    <span class="mobile-nav-arrow" aria-hidden="true"></span>
                </a>
                <a href="#footer" class="mobile-nav-link" onclick="navigateAndClose('#footer')">
                    <span class="mobile-nav-icon" aria-hidden="true"></span>
                    <span class="mobile-nav-text">About</span>
                    <span class="mobile-nav-arrow" aria-hidden="true"></span>
                </a>
                
                <!-- Call-to-Action -->
                <div class="mobile-nav-cta">
                    <button onclick="initiateStripeCheckout('starter', 'price_1RsDxiL7UMRowhrwAa7Zimok'); closeMobileNavigation();" 
                            class="mobile-cta-btn"
                            aria-label="Get started with BiasGuard Code">
                        <span class="mobile-cta-icon" aria-hidden="true"></span>
                        <span class="mobile-cta-text">Get Started</span>
                    </button>
                </div>
            </nav>
            
            <!-- Quick Actions -->
            <div class="mobile-nav-actions">
                <button class="mobile-action-btn" onclick="scrollToDemo(); closeMobileNavigation();">
                    <span aria-hidden="true"></span>
                    Quick Analysis
                </button>
                <button class="mobile-action-btn" onclick="showMobileHelp();">
                    <span aria-hidden="true"></span>
                    Help
                </button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <main role="main" id="main-content">
        <section class="hero" aria-labelledby="hero-title">
            <div class="hero-container">
                <h1 id="hero-title" class="hero-title" aria-describedby="hero-subtitle">
                    Stop AI Bias Before It Destroys Your Project<br>
                    <span style="color: #fbbf24;">(Like It Almost Did Mine)</span>
                </h1>
                <p id="hero-subtitle" class="hero-subtitle">
                    The same AI biases that nearly sabotaged a wrongfully accused man's case threaten your business every day. BiasGuard stops them in <strong style="color: #fbbf24;">&lt;300ms</strong>.
                </p>

                <!-- Founder Credibility Section -->
                <div class="founder-credibility" style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin: 2rem 0; padding: 1.5rem; background: rgba(255, 255, 255, 0.1); border-radius: 0.75rem; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                    <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #fbbf24, #f59e0b); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.5rem; color: #111827;">
                        MM
                    </div>
                    <div style="text-align: left; flex: 1;">
                        <div style="font-weight: bold; font-size: 1.1rem; color: white;">Michael Mataluni</div>
                        <div style="color: #fbbf24; font-weight: 600; font-size: 0.9rem;">Founder & Chief Justice Officer</div>
                        <div style="color: #e0f2fe; font-size: 0.85rem;">Built while fighting for JAHmere Webb's freedom</div>
                        <div style="color: #e0f2fe; font-size: 0.8rem; opacity: 0.8;"> Tony Dungy connection</div>
                    </div>
                </div>

                <div style="display: flex; flex-direction: column; align-items: center; gap: 1rem;">
                    <a href="#demo-section" 
                       class="hero-cta"
                       style="background: #fbbf24; color: #111827; margin-bottom: 0.5rem; font-size: 1.125rem; padding: 1rem 2.5rem;"
                       aria-label="Try Free Demo - See results in seconds"
                       onclick="trackConversionFunnel('cta_clicked', { ctaType: 'hero_demo', location: 'hero_section' });">
                         Try Free Demo (See Results in Seconds)
                    </a>
                    <a href="#" onclick="initiateStripeCheckout('starter', 'price_1RsDxiL7UMRowhrwAa7Zimok'); return false;" 
                       style="background: transparent; border: 2px solid #fbbf24; color: #fbbf24; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; text-decoration: none;"
                       rel="noopener"
                       aria-label="Start protecting your business"
                       onclick="trackConversionFunnel('cta_clicked', { ctaType: 'hero_purchase', location: 'hero_section', price: '$19/mo' });">
                        Start Protecting Your Business - $19/mo
                    </a>
                    
                    <!-- Trust Indicators -->
                    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1.5rem; margin-top: 1rem; font-size: 0.9rem; color: #e0f2fe;">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="color: #10b981;"></span> No signup required
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="color: #10b981;"></span> 17KB lightweight
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="color: #10b981;"></span> Privacy-first design
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Social Proof & Credibility Section -->
        <section class="social-proof-section" style="padding: 3rem 0; background: rgba(30, 64, 175, 0.05); border-top: 1px solid rgba(30, 64, 175, 0.1);">
            <div style="max-width: 72rem; margin: 0 auto; padding: 0 1rem;">
                
                <!-- Justice Mission Stats -->
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h2 style="font-size: 2rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                        Built Under Real Pressure, <span style="color: #1e40af;">Fighting for Real Justice</span>
                </h2>
                    <p style="color: #6b7280; font-size: 1.1rem; max-width: 48rem; margin: 0 auto 2rem;">
                        BiasGuard wasn't born in a lab - it was forged while fighting for JAHmere Webb's freedom. Every feature was tested under the pressure of real consequences.
                    </p>
                    
                    <!-- Mission Statistics -->
                    <div class="mission-stats justice-mission-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; margin-top: 2rem;">
                        <div style="text-align: center; padding: 1.5rem; background: rgba(251, 191, 36, 0.1); border-radius: 0.75rem; border: 1px solid rgba(251, 191, 36, 0.2);">
                            <div style="font-size: 2.5rem; font-weight: bold; color: #f59e0b; margin-bottom: 0.5rem;" data-justice-stat="court_date">Aug 25, 2025</div>
                            <div style="color: #6b7280; font-weight: 600;">JAHmere's Court Date</div>
                            <div style="color: #6b7280; font-size: 0.9rem; margin-top: 0.25rem;">Every day counts</div>
                        </div>
                        <div style="text-align: center; padding: 1.5rem; background: rgba(16, 185, 129, 0.1); border-radius: 0.75rem; border: 1px solid rgba(16, 185, 129, 0.2);">
                            <div style="font-size: 2.5rem; font-weight: bold; color: #10b981; margin-bottom: 0.5rem;" data-justice-stat="revenue_donated">15</div>
                            <div style="color: #6b7280; font-weight: 600;">% Revenue to Justice</div>
                            <div style="color: #6b7280; font-size: 0.9rem; margin-top: 0.25rem;">Transparent allocation</div>
                        </div>
                        <div style="text-align: center; padding: 1.5rem; background: rgba(239, 68, 68, 0.1); border-radius: 0.75rem; border: 1px solid rgba(239, 68, 68, 0.2);">
                            <div style="font-size: 2.5rem; font-weight: bold; color: #ef4444; margin-bottom: 0.5rem;">99.7%</div>
                            <div style="color: #6b7280; font-weight: 600;">Cost Reduction</div>
                            <div style="color: #6b7280; font-size: 0.9rem; margin-top: 0.25rem;">From $1000/wk to $3/wk</div>
                        </div>
                        <div style="text-align: center; padding: 1.5rem; background: rgba(30, 64, 175, 0.1); border-radius: 0.75rem; border: 1px solid rgba(30, 64, 175, 0.2);">
                            <div style="font-size: 2.5rem; font-weight: bold; color: #1e40af; margin-bottom: 0.5rem;">&lt;300ms</div>
                            <div style="color: #6b7280; font-weight: 600;">Detection Speed</div>
                            <div style="color: #6b7280; font-size: 0.9rem; margin-top: 0.25rem;">Real-time protection</div>
                        </div>
                    </div>
                </div>

                <!-- Early Adopter Testimonials (Authentic Placeholders) -->
                <div style="margin-bottom: 3rem;">
                    <h3 style="text-align: center; font-size: 1.5rem; font-weight: bold; color: #111827; margin-bottom: 2rem;">
                        Technical Peers Share Their Honest Reviews
                    </h3>
                    <div class="testimonials" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                        
                        <!-- Testimonial 1: Jacob Zhu - Technical Validation -->
                        <div style="background: white; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border-left: 4px solid #dc2626;">
                            <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #dc2626, #991b1b); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; margin-right: 1rem; font-size: 0.9rem;">
                                    JZ
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #111827;">Jacob Zhu</div>
                                    <div style="color: #6b7280; font-size: 0.85rem;">Innovation Catalyst & AI Integration Specialist</div>
                                    <div style="color: #dc2626; font-size: 0.8rem; font-style: italic;">Previously questioned Michael's technical depth</div>
                                </div>
                            </div>
                            <p style="color: #374151; font-style: italic; margin-bottom: 1rem; font-size: 0.9rem; line-height: 1.5;">
                                "I'll be honest - when Michael accidentally pushed that API key to the public repo, I asked him if he knew what an API key was. Then he shows me this BiasGuard analysis. 391 lines of emergency defensive architecture. Exact git commit hashes... I'm reading commit acc5d91 thinking 'This dude just schooled me on dependency arrays while I was worried about his API security.' I owe him an apology. And I want BiasGuard for every project we touch."
                            </p>
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <div style="color: #dc2626;"></div>
                                <div style="color: #6b7280; font-size: 0.8rem;">Technical Peer Review</div>
                            </div>
                        </div>

                        <!-- Testimonial 2: Bill McDade - CTO Validation -->
                        <div style="background: white; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border-left: 4px solid #1e40af;">
                            <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #1e40af, #1e3a8a); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; margin-right: 1rem; font-size: 0.9rem;">
                                    BM
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #111827;">Bill McDade</div>
                                    <div style="color: #6b7280; font-size: 0.85rem;">CTO & Technical Chairman</div>
                                    <div style="color: #1e40af; font-size: 0.8rem; font-style: italic;">25+ years enterprise architecture experience</div>
                                </div>
                            </div>
                            <p style="color: #374151; font-style: italic; margin-bottom: 1rem; font-size: 0.9rem; line-height: 1.5;">
                                "Twenty-five years of enterprise architecture. Michael's forensic analysis of the Bridge Project failures is graduate-level software engineering. The dependency graph analysis, the systematic pattern taxonomy - this is PhD-quality research applied to real production problems... He built a detection framework that prevents entire classes of architectural failures. BiasGuard isn't just a debugging tool - it's a competitive advantage."
                            </p>
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <div style="color: #1e40af;"></div>
                                <div style="color: #6b7280; font-size: 0.8rem;">Enterprise CTO Review</div>
                            </div>
                        </div>

                        <!-- Testimonial 3: Benjamin Richardson - Process Excellence -->
                        <div style="background: white; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border-left: 4px solid #10b981;">
                            <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; margin-right: 1rem; font-size: 0.9rem;">
                                    BR
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #111827;">Benjamin Richardson</div>
                                    <div style="color: #6b7280; font-size: 0.85rem;">Development Excellence & Implementation Lead</div>
                                    <div style="color: #10b981; font-size: 0.8rem; font-style: italic;">Standards-driven implementation specialist</div>
                                </div>
                            </div>
                            <p style="color: #374151; font-style: italic; margin-bottom: 1rem; font-size: 0.9rem; line-height: 1.5;">
                                "When Michael told me he had 'some debugging issues' with the Bridge Project, I was ready to help with standard troubleshooting. Then he walks me through the git forensics. Three smoking guns. Emergency commits at 2:42 AM... I've never seen anyone document failures with this level of systematic precision. He built a system to catch these patterns in 30 seconds instead of 13 hours of debugging hell. I'm implementing BiasGuard principles in every code review."
                            </p>
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <div style="color: #10b981;"></div>
                                <div style="color: #6b7280; font-size: 0.8rem;">Development Standards Review</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community & Recognition -->
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h3 style="font-size: 1.5rem; font-weight: bold; color: #111827; margin-bottom: 2rem;">
                        Growing Community Support
                    </h3>
                    
                    <!-- GitHub & Community Stats -->
                    <div class="community-badges" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem; margin-bottom: 2rem;">
                        <a href="https://github.com/bravetto/biasguard-production-suite" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit; transition: all 0.2s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(0,0,0,0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                            <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(0, 0, 0, 0.9); border-radius: 0.5rem; color: white; cursor: pointer;">
                                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                </svg>
                                <span style="font-weight: 600;">GitHub Repository</span>
                            </div>
                        </a>
                        <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(29, 161, 242, 0.1); border: 1px solid rgba(29, 161, 242, 0.2); border-radius: 0.5rem; color: #1da1f2;">
                            <span style="font-weight: 600;"> Follow Our Journey</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(255, 69, 0, 0.1); border: 1px solid rgba(255, 69, 0, 0.2); border-radius: 0.5rem; color: #ff4500;">
                            <span style="font-weight: 600;"> Featured on Dev.to</span>
                        </div>
                    </div>

                    <!-- Transparency Note -->
                    <div class="transparency-note" style="background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); border-radius: 0.75rem; padding: 1.5rem; max-width: 48rem; margin: 0 auto;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 1rem;">
                            <span style="font-size: 1.5rem;"></span>
                            <h4 style="font-weight: bold; color: #92400e; margin: 0;">Radical Transparency</h4>
                        </div>
                        <p style="color: #92400e; margin: 0; font-size: 0.95rem;">
                            Every dollar we earn, every feature we build, every decision we make is driven by one mission: getting JAHmere Webb the justice he deserves. 
                            <strong>This isn't marketing - this is our reality.</strong>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Problem Agitation Section: The Hidden Cost of AI Bias -->
        <section class="problem-agitation-section" style="padding: 4rem 0; background: linear-gradient(135deg, #fee2e2 0%, #fef2f2 50%, #fff5f5 100%); border-top: 1px solid rgba(239, 68, 68, 0.1);">
            <div style="max-width: 72rem; margin: 0 auto; padding: 0 1rem;">
                
                <!-- Section Header -->
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h2 style="font-size: 2.5rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                        The Hidden Cost of <span style="color: #dc2626;">AI Bias</span>
                    </h2>
                    <p style="color: #6b7280; font-size: 1.2rem; max-width: 48rem; margin: 0 auto; line-height: 1.6;">
                        Every day you don't detect bias, it's costing you money, reputation, and potentially someone's future.
                    </p>
                </div>

                <!-- Real Statistics -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
                    <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-left: 4px solid #dc2626; text-align: center;">
                        <div style="font-size: 2.5rem; font-weight: bold; color: #dc2626; margin-bottom: 0.5rem;">73%</div>
                        <div style="font-size: 1.1rem; font-weight: 600; color: #111827; margin-bottom: 0.5rem;">Projects Affected</div>
                        <div style="color: #6b7280; font-size: 0.9rem;">of AI-assisted projects contain detectable bias patterns</div>
                    </div>
                    
                    <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-left: 4px solid #f59e0b; text-align: center;">
                        <div style="font-size: 2.5rem; font-weight: bold; color: #f59e0b; margin-bottom: 0.5rem;">$847K</div>
                        <div style="font-size: 1.1rem; font-weight: 600; color: #111827; margin-bottom: 0.5rem;">Average Cost</div>
                        <div style="color: #6b7280; font-size: 0.9rem;">per bias-related legal settlement in tech</div>
                    </div>
                    
                    <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-left: 4px solid #7c3aed; text-align: center;">
                        <div style="font-size: 2.5rem; font-weight: bold; color: #7c3aed; margin-bottom: 0.5rem;">156</div>
                        <div style="font-size: 1.1rem; font-weight: 600; color: #111827; margin-bottom: 0.5rem;">Days Average</div>
                        <div style="color: #6b7280; font-size: 0.9rem;">to detect bias without automated tools</div>
                    </div>
                </div>

                <!-- Three-Column Bias Disaster Examples -->
                <div style="margin-bottom: 3rem;">
                    <h3 style="text-align: center; font-size: 1.75rem; font-weight: bold; color: #111827; margin-bottom: 2rem;">
                        Real Bias Disasters That Could Have Been Prevented
                    </h3>
                    
                    <div class="disaster-examples" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                        <!-- Hiring Bias Example -->
                        <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-top: 4px solid #dc2626;">
                            <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #dc2626, #ef4444); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                    <span style="color: white; font-size: 1.5rem;"></span>
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #111827;">Hiring Platform Bias</div>
                                    <div style="color: #dc2626; font-size: 0.9rem;">Fortune 500 Company</div>
                                </div>
                            </div>
                            <p style="color: #374151; margin-bottom: 1rem; line-height: 1.5;">
                                AI resume screening systematically rejected qualified women candidates. Discovered after 18 months and $2.3M settlement.
                            </p>
                            <div style="background: rgba(220, 38, 38, 0.1); padding: 1rem; border-radius: 0.5rem; border-left: 3px solid #dc2626;">
                                <div style="font-weight: bold; color: #dc2626; font-size: 0.9rem;">BIASGUARD WOULD HAVE DETECTED:</div>
                                <div style="color: #374151; font-size: 0.8rem;">Gender-biased language patterns in job descriptions within 24 hours</div>
                            </div>
                        </div>

                        <!-- Content Moderation Example -->
                        <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-top: 4px solid #f59e0b;">
                            <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #f59e0b, #fbbf24); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                    <span style="color: white; font-size: 1.5rem;"></span>
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #111827;">Social Media Bias</div>
                                    <div style="color: #f59e0b; font-size: 0.9rem;">Major Platform</div>
                                </div>
                            </div>
                            <p style="color: #374151; margin-bottom: 1rem; line-height: 1.5;">
                                Content moderation AI disproportionately flagged posts from minority communities. Congressional hearing required.
                            </p>
                            <div style="background: rgba(245, 158, 11, 0.1); padding: 1rem; border-radius: 0.5rem; border-left: 3px solid #f59e0b;">
                                <div style="font-weight: bold; color: #f59e0b; font-size: 0.9rem;">BIASGUARD WOULD HAVE DETECTED:</div>
                                <div style="color: #374151; font-size: 0.8rem;">Cultural and racial bias patterns in moderation rules</div>
                            </div>
                        </div>

                        <!-- Financial Services Example -->
                        <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-top: 4px solid #7c3aed;">
                            <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #7c3aed, #a855f7); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                    <span style="color: white; font-size: 1.5rem;"></span>
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #111827;">Lending Algorithm</div>
                                    <div style="color: #7c3aed; font-size: 0.9rem;">Credit Union</div>
                                </div>
                            </div>
                            <p style="color: #374151; margin-bottom: 1rem; line-height: 1.5;">
                                AI loan approval system showed racial bias, denying loans to qualified minority applicants. $4.7M federal penalty.
                            </p>
                            <div style="background: rgba(124, 58, 237, 0.1); padding: 1rem; border-radius: 0.5rem; border-left: 3px solid #7c3aed;">
                                <div style="font-weight: bold; color: #7c3aed; font-size: 0.9rem;">BIASGUARD WOULD HAVE DETECTED:</div>
                                <div style="color: #374151; font-size: 0.8rem;">Discriminatory decision patterns in loan criteria</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Personal Story Callout -->
                <div class="personal-story" style="background: linear-gradient(135deg, #1e40af, #3b82f6); color: white; padding: 3rem; border-radius: 1rem; margin-bottom: 3rem; position: relative; overflow: hidden;">
                    <div style="position: absolute; top: -50%; right: -20%; width: 200px; height: 200px; background: rgba(255,255,255,0.1); border-radius: 50%; z-index: 1;"></div>
                    <div style="position: relative; z-index: 2;">
                        <div class="story-header" style="display: flex; align-items: center; margin-bottom: 2rem;">
                            <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1.5rem;">
                                <span style="font-size: 1.5rem;"></span>
                            </div>
                            <div>
                                <div style="font-size: 1.25rem; font-weight: bold;">When AI Bias Nearly Destroyed a Legal Case</div>
                                <div style="opacity: 0.9;">The story behind BiasGuard's creation</div>
                            </div>
                        </div>
                        
                        <p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 1.5rem; opacity: 0.95;">
                            "I was building a website for JAHmere Webb's legal defense - a wrongfully accused man whose freedom hung in the balance. AI coding assistants kept suggesting biased language, discriminatory assumptions, and problematic framings that could have destroyed his case."
                        </p>
                        
                        <p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 2rem; opacity: 0.95;">
                            "That's when I realized: <strong>if AI bias could threaten a man's freedom, what is it doing to your business?</strong> BiasGuard was born from that urgency - real stakes, real consequences, real solutions."
                        </p>
                        
                        <div class="story-footer" style="display: flex; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 0.75rem;">
                            <div>
                                <div style="font-weight: bold; margin-bottom: 0.5rem;">Michael Mataluni</div>
                                <div style="opacity: 0.8; font-size: 0.9rem;">Founder, BiasGuards.ai</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 0.9rem; opacity: 0.8;">Court Date:</div>
                                <div style="font-weight: bold; color: #fbbf24;">Aug 25, 2025</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Solution Transition -->
                <div style="text-align: center; background: white; padding: 3rem; border-radius: 1rem; box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);">
                    <h3 style="font-size: 2rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                        Don't Let AI Bias Destroy <span style="color: #1e40af;">Your Project</span>
                    </h3>
                    <p style="color: #6b7280; font-size: 1.1rem; margin-bottom: 2rem; max-width: 42rem; margin-left: auto; margin-right: auto;">
                        BiasGuard detects 800+ bias patterns in <strong>&lt;300ms</strong>. Built under pressure, tested in real stakes, trusted by developers who can't afford to fail.
                    </p>
                    
                    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem;">
                        <a href="#demo-section" 
                           style="background: #1e40af; color: white; padding: 1rem 2rem; border-radius: 0.75rem; text-decoration: none; font-weight: 600; transition: all 0.2s; display: inline-flex; align-items: center; gap: 0.5rem;"
                           onmouseover="this.style.background='#1d4ed8'; this.style.transform='translateY(-2px)'"
                           onmouseout="this.style.background='#1e40af'; this.style.transform='translateY(0)'">
                             Test BiasGuard Now (Free)
                        </a>
                        <a href="#pricing" 
                           style="background: white; color: #1e40af; padding: 1rem 2rem; border-radius: 0.75rem; text-decoration: none; font-weight: 600; border: 2px solid #1e40af; transition: all 0.2s; display: inline-flex; align-items: center; gap: 0.5rem;"
                           onmouseover="this.style.background='#1e40af'; this.style.color='white'"
                           onmouseout="this.style.background='white'; this.style.color='#1e40af'">
                             Start Protecting - $19/mo
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced Demo Experience Section -->
        <section id="demo-section" aria-labelledby="demo-title" role="main" style="padding: 3rem 0; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);">
            <!-- ARIA Live Region for Screen Readers -->
            <div id="demo-status" class="live-region" aria-live="polite" aria-atomic="true">
                <span class="sr-only">Demo status updates will appear here</span>
            </div>
            
            <div style="max-width: 72rem; margin: 0 auto; padding: 0 1rem;">
                
                <!-- Demo Header -->
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h2 id="demo-title" style="font-size: 2.5rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                         See BiasGuard in Action <span style="color: #1e40af;">Right Now</span>
                    </h2>
                    <p style="color: #6b7280; margin-bottom: 2rem; font-size: 1.2rem; max-width: 48rem; margin-left: auto; margin-right: auto;">
                        Experience the same bias detection that saved JAHmere's case. <strong>No signup, no tracking, instant results.</strong>
                    </p>
                    
                    <!-- Demo Stats -->
                    <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem; flex-wrap: wrap;">
                        <div class="demo-stat" style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #1e40af;">17KB</div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Ultra-lightweight</div>
                        </div>
                        <div class="demo-stat" style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #1e40af;">&lt;300ms</div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Lightning speed</div>
                        </div>
                        <div class="demo-stat" style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #1e40af;">800+</div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Bias patterns</div>
                        </div>
                        <div class="demo-stat" style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #1e40af;">84.9%</div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Accuracy rate</div>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: start;">
                    
                    <!-- Left Column: Pre-loaded Examples -->
                    <div class="demo-examples">
                        <h3 style="font-size: 1.5rem; font-weight: bold; color: #111827; margin-bottom: 1.5rem; text-align: center;">
                             Try These Real Examples
                        </h3>
                        
                        <!-- Example Cards -->
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            
                            <!-- Example 1: Demographic Bias -->
                            <div class="example-card" onclick="loadExample(1)" style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); cursor: pointer; border-left: 4px solid #dc2626; transition: all 0.2s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 15px -3px rgb(0 0 0 / 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgb(0 0 0 / 0.1)'">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                                    <div style="font-weight: bold; color: #111827;">Demographic Bias Example</div>
                                    <div style="background: #fee2e2; color: #dc2626; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 600;">HIGH BIAS</div>
                                </div>
                                <div style="color: #6b7280; font-size: 0.9rem; line-height: 1.4;">"Women are typically worse at technical roles because they lack the logical thinking required for programming..."</div>
                                <div style="margin-top: 0.75rem; color: #1e40af; font-weight: 600; font-size: 0.9rem;"> Expected: 78% bias score</div>
                            </div>
                            
                            <!-- Example 2: Criminal Justice Bias -->
                            <div class="example-card" onclick="loadExample(2)" style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); cursor: pointer; border-left: 4px solid #f59e0b; transition: all 0.2s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 15px -3px rgb(0 0 0 / 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgb(0 0 0 / 0.1)'">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                                    <div style="font-weight: bold; color: #111827;">Criminal Justice Bias</div>
                                    <div style="background: #fef3c7; color: #f59e0b; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 600;">MEDIUM BIAS</div>
                                </div>
                                <div style="color: #6b7280; font-size: 0.9rem; line-height: 1.4;">"Defendants with prior arrests are more likely to reoffend and should receive harsher sentences..."</div>
                                <div style="margin-top: 0.75rem; color: #1e40af; font-weight: 600; font-size: 0.9rem;"> Expected: 52% bias score</div>
                            </div>
                            
                            <!-- Example 3: Clean Text -->
                            <div class="example-card" onclick="loadExample(3)" style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); cursor: pointer; border-left: 4px solid #059669; transition: all 0.2s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 15px -3px rgb(0 0 0 / 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgb(0 0 0 / 0.1)'">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                                    <div style="font-weight: bold; color: #111827;">Bias-Free Example</div>
                                    <div style="background: #d1fae5; color: #059669; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 600;">CLEAN</div>
                                </div>
                                <div style="color: #6b7280; font-size: 0.9rem; line-height: 1.4;">"Our hiring process evaluates candidates based on demonstrated skills, relevant experience, and cultural fit..."</div>
                                <div style="margin-top: 0.75rem; color: #1e40af; font-weight: 600; font-size: 0.9rem;"> Expected: 8% bias score</div>
                            </div>
                            
                            <!-- Example 4: Real Code Analysis -->
                            <div class="example-card" onclick="loadExample(4)" style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); cursor: pointer; border-left: 4px solid #7c3aed; transition: all 0.2s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 15px -3px rgb(0 0 0 / 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgb(0 0 0 / 0.1)'">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                                    <div style="font-weight: bold; color: #111827;">Real Code Analysis</div>
                                    <div style="background: #ede9fe; color: #7c3aed; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 600;">CONTEXT-HEAVY</div>
                                </div>
                                <div style="color: #6b7280; font-size: 0.9rem; line-height: 1.4;">Actual dashboard-api.js code from this project (849 lines of complex API logic)</div>
                                <div style="margin-top: 0.75rem; color: #1e40af; font-weight: 600; font-size: 0.9rem;"> Actual result: 45% bias score</div>
                            </div>
                            
                            <!-- Code Examples (Hidden by default) -->
                            <div id="code-examples" style="display: none;">
                                <!-- Code Example 1: Discriminatory Logic -->
                                <div class="example-card" onclick="loadCodeExample(1)" style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); cursor: pointer; border-left: 4px solid #dc2626; transition: all 0.2s; margin-bottom: 1rem;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 15px -3px rgb(0 0 0 / 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgb(0 0 0 / 0.1)'">
                                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                                        <div style="font-weight: bold; color: #111827;">Discriminatory Logic</div>
                                        <div style="background: #fee2e2; color: #dc2626; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 600;">CRITICAL</div>
                                    </div>
                                    <div style="color: #6b7280; font-size: 0.9rem; line-height: 1.4;">Loan approval function with name-based discrimination</div>
                                    <div style="margin-top: 0.75rem; color: #1e40af; font-weight: 600; font-size: 0.9rem;"> Expected: 85% bias score</div>
                                </div>
                                
                                <!-- Code Example 2: Biased Variables -->
                                <div class="example-card" onclick="loadCodeExample(2)" style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); cursor: pointer; border-left: 4px solid #f59e0b; transition: all 0.2s; margin-bottom: 1rem;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 15px -3px rgb(0 0 0 / 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgb(0 0 0 / 0.1)'">
                                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                                        <div style="font-weight: bold; color: #111827;">Biased Variable Names</div>
                                        <div style="background: #fef3c7; color: #f59e0b; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 600;">MEDIUM</div>
                                    </div>
                                    <div style="color: #6b7280; font-size: 0.9rem; line-height: 1.4;">Code with problematic variable naming conventions</div>
                                    <div style="margin-top: 0.75rem; color: #1e40af; font-weight: 600; font-size: 0.9rem;"> Expected: 45% bias score</div>
                                </div>
                                
                                <!-- Code Example 3: Clean Code -->
                                <div class="example-card" onclick="loadCodeExample(3)" style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); cursor: pointer; border-left: 4px solid #059669; transition: all 0.2s; margin-bottom: 1rem;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 15px -3px rgb(0 0 0 / 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgb(0 0 0 / 0.1)'">
                                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                                        <div style="font-weight: bold; color: #111827;">Clean Code Example</div>
                                        <div style="background: #d1fae5; color: #059669; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 600;">CLEAN</div>
                                    </div>
                                    <div style="color: #6b7280; font-size: 0.9rem; line-height: 1.4;">Fair and unbiased salary calculation function</div>
                                    <div style="margin-top: 0.75rem; color: #1e40af; font-weight: 600; font-size: 0.9rem;"> Expected: 5% bias score</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Custom Input Option -->
                        <div style="margin-top: 2rem; text-align: center;">
                            <div style="color: #6b7280; margin-bottom: 1rem; font-weight: 600;">Or paste your own content:</div>
                        </div>
                    </div>
                    
                    <!-- Right Column: Interactive Demo -->
                    <div class="demo-interface">
                        <div style="background: white; border-radius: 1rem; box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1); padding: 2rem;">
                            <h3 style="font-size: 1.5rem; font-weight: bold; color: #111827; margin-bottom: 1rem; text-align: center;">
                                Interactive Analysis
                            </h3>
                            
                            <!-- Analysis Type Selector -->
                            <div style="display: flex; justify-content: center; margin-bottom: 1.5rem; background: #f3f4f6; border-radius: 0.5rem; padding: 0.25rem;">
                                <button id="text-mode-btn" onclick="switchAnalysisMode('text')" 
                                        style="flex: 1; padding: 0.75rem 1rem; border: none; border-radius: 0.25rem; font-weight: 600; cursor: pointer; transition: all 0.2s; background: #1e40af; color: white;">
                                     Text Analysis
                                    <div id="text-engine-status" style="font-size: 0.7rem; opacity: 0.8; margin-top: 0.25rem;"> Ready</div>
                                </button>
                                <button id="code-mode-btn" onclick="switchAnalysisMode('code')" 
                                        style="flex: 1; padding: 0.75rem 1rem; border: none; border-radius: 0.25rem; font-weight: 600; cursor: pointer; transition: all 0.2s; background: transparent; color: #6b7280;">
                                     Code Analysis
                                    <div id="code-engine-status" style="font-size: 0.7rem; opacity: 0.8; margin-top: 0.25rem;"> Loading...</div>
                                </button>
                            </div>
                            
                            <!-- Subscription Status Display -->
                            <div id="subscription-status" style="text-align: center; margin-bottom: 1rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 0.5rem; border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div id="usage-display" style="font-size: 0.9rem; color: #1e40af; margin-bottom: 0.5rem;">
                                    Loading subscription status...
                                </div>
                                <button onclick="if(window.stripeHandler) stripeHandler.showPricingModal()" 
                                        style="padding: 0.5rem 1rem; background: #1e40af; color: white; border: none; border-radius: 0.25rem; cursor: pointer; font-size: 0.8rem; font-weight: 600;">
                                     Upgrade for Advanced Features
                                </button>
                            </div>
                            
                    <label for="demo-input" class="sr-only">
                        Enter text to analyze for potential bias. You can paste your own content or select from examples.
                    </label>
                    <textarea id="demo-input" 
                              name="demo-input"
                              class="mobile-optimized-textarea"
                                      placeholder="Click an example on the left, or paste your own text here..."
                              aria-label="Text input for bias analysis. Enter or paste text to analyze for potential bias patterns."
                              aria-describedby="char-count demo-instructions"
                              aria-required="false"
                              role="textbox"
                              aria-multiline="true"
                              autocomplete="off"
                              autocorrect="off"
                              autocapitalize="sentences"
                              spellcheck="true"
                              inputmode="text"
                                      style="width: 100%; min-height: 150px; padding: 1rem; border: 2px solid #e5e7eb; border-radius: 0.75rem; font-size: 1rem; resize: vertical; outline: none; transition: all 0.2s; font-family: 'Inter', system-ui, -apple-system, sans-serif; line-height: 1.5;"
                              onfocus="handleMobileTextareaFocus(this)"
                              onblur="handleMobileTextareaBlur(this)"
                              oninput="handleMobileTextareaInput(this)"
                              ontouchstart="handleMobileTextareaTouch(this)"
                              onpaste="handleMobileTextareaPaste(event)"
                              onkeydown="handleMobileTextareaKeydown(event)"></textarea>
                              
                    <div id="demo-instructions" class="sr-only">
                        Instructions: Type or paste text into this area. The system will analyze it for potential bias when you click the analyze button. Character count and clear button are available below the text area. Keyboard shortcuts: Ctrl+Enter to analyze, Escape to clear.
                    </div>
                    
                    <!-- Keyboard Shortcuts Help -->
                    <details style="margin-top: 1rem; font-size: 0.9rem; color: #6b7280;">
                        <summary style="cursor: pointer; padding: 0.5rem; border-radius: 0.25rem;" tabindex="0">
                             Keyboard Shortcuts
                        </summary>
                        <div style="padding: 1rem; background: #f9fafb; border-radius: 0.5rem; margin-top: 0.5rem;">
                            <ul style="list-style: none; padding: 0; margin: 0;">
                                <li style="margin-bottom: 0.5rem;"><kbd style="background: #e5e7eb; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-family: monospace;">Ctrl + Enter</kbd> - Analyze text</li>
                                <li style="margin-bottom: 0.5rem;"><kbd style="background: #e5e7eb; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-family: monospace;">Escape</kbd> - Clear text</li>
                                <li><kbd style="background: #e5e7eb; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-family: monospace;">Tab</kbd> - Navigate between elements</li>
                            </ul>
                        </div>
                    </details>
                            
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 1rem;">
                                <div id="char-count" style="color: #6b7280; font-size: 0.9rem;">0 characters</div>
                                <button id="clear-btn" 
                                        onclick="clearDemo()" 
                                        aria-label="Clear all text from the input area"
                                        type="button"
                                        style="background: #f3f4f6; color: #6b7280; border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.9rem; cursor: pointer; transition: all 0.2s;" 
                                        onmouseover="this.style.background='#e5e7eb'" 
                                        onmouseout="this.style.background='#f3f4f6'">
                                    <span aria-hidden="true"></span> Clear
                                </button>
                            </div>
                            
                            <button id="demo-analyze-btn" 
                                    onclick="runDemoAnalysis()" 
                                    disabled
                                    aria-label="Analyze text for potential bias patterns. Button is disabled until text is entered."
                                    aria-describedby="processing-time"
                                    aria-live="polite"
                                    type="button"
                                    style="width: 100%; background: #9ca3af; color: white; padding: 1rem 2rem; border: none; border-radius: 0.75rem; font-weight: 600; font-size: 1.1rem; cursor: not-allowed; margin-top: 1.5rem; transition: all 0.2s; position: relative; overflow: hidden;">
                        <span id="btn-text"> Analyze for Bias (Free)</span>
                                <span id="btn-loading" style="display: none;">
                                    <span style="display: inline-block; animation: spin 1s linear infinite;" aria-hidden="true"></span> 
                                    <span class="sr-only">Analysis in progress, please wait</span>
                                    Analyzing...
                                </span>
                    </button>
                            
                            <!-- Processing Time Display -->
                            <div id="processing-time" style="display: none; text-align: center; margin-top: 1rem; color: #059669; font-weight: 600; font-size: 0.9rem;">
                                 Analysis completed in <span id="time-value">0</span>ms
                            </div>
                </div>
                
                        <!-- Enhanced Results Display -->
                        <div id="demo-results" style="display: none; background: white; border-radius: 1rem; box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1); padding: 2rem; margin-top: 2rem;">
                            <!-- Enhanced results will be inserted here -->
                </div>
                
                        <!-- Post-Demo Conversion -->
                        <div id="post-demo-conversion" style="display: none; background: linear-gradient(135deg, #1e40af, #3b82f6); color: white; padding: 2rem; border-radius: 1rem; margin-top: 2rem; text-align: center;">
                            <h4 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">
                                 Ready to Protect Your Entire Project?
                            </h4>
                            <p style="margin-bottom: 2rem; opacity: 0.9; font-size: 1.1rem;">
                                You just experienced BiasGuard's power. Now imagine this protection across your entire codebase, documentation, and team communications.
                            </p>
                            
                            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                                <a href="#" onclick="initiateStripeCheckout('professional', 'price_1RsDyVL7UMRowhrw9XnqUl2W'); return false;" 
                                   style="background: #fbbf24; color: #111827; padding: 1rem 2rem; border-radius: 0.75rem; text-decoration: none; font-weight: bold; transition: all 0.2s; display: inline-block;"
                                   onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 15px -3px rgba(0,0,0,0.2)'"
                                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                     Start at $19/mo
                                </a>
                                <a href="#features" 
                                   style="background: rgba(255,255,255,0.2); color: white; padding: 1rem 2rem; border-radius: 0.75rem; text-decoration: none; font-weight: bold; transition: all 0.2s; display: inline-block; border: 1px solid rgba(255,255,255,0.3);"
                                   onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                     See All Features
                                </a>
                            </div>
                            
                            <div style="margin-top: 1.5rem; font-size: 0.9rem; opacity: 0.8;">
                                 Unlimited analysis  API access  Priority support  Justice mission support
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Demo Analytics (Hidden) -->
                <div id="demo-analytics" style="display: none;">
                    <script>
                        // Track demo engagement
                        let demoStats = {
                            sessionsStarted: 0,
                            examplesLoaded: 0,
                            analysesRun: 0,
                            conversionViewed: 0
                        };
                    </script>
                </div>
            </div>
        </section>

        <!-- Solution & Technical Superiority Section -->
        <section class="solution-superiority-section" aria-labelledby="solution-title" style="padding: 5rem 0; background: white;">
            <div style="max-width: 80rem; margin: 0 auto; padding: 0 1rem;">
                
                <!-- Section Header -->
                <div style="text-align: center; margin-bottom: 4rem;">
                    <h2 id="solution-title" style="font-size: 2.5rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                        Built Different. <span style="color: #1e40af;">Proven Superior.</span>
                    </h2>
                    <p style="color: #6b7280; font-size: 1.2rem; max-width: 48rem; margin: 0 auto;">
                        While others talk about bias detection, BiasGuard delivers. Born from real pressure, validated by experts, trusted by developers who can't afford to fail.
                    </p>
                </div>

                <!-- Live Technical Demonstration -->
                <div style="background: linear-gradient(135deg, #f8fafc, #e2e8f0); padding: 3rem; border-radius: 1rem; margin-bottom: 4rem; border: 1px solid #e5e7eb;">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h3 style="font-size: 1.75rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                             LIVE: BiasGuard Just Analyzed Your Code
                        </h3>
                        <p style="color: #6b7280; font-size: 1.1rem;">Real analysis from your dashboard API - this isn't a demo, it's proof</p>
                    </div>
                    
                    <div style="background: white; border-radius: 0.75rem; padding: 2rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-left: 4px solid #f59e0b;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="width: 12px; height: 12px; background: #f59e0b; border-radius: 50%; animation: pulse 2s infinite;"></div>
                                <div style="font-weight: bold; color: #111827;">BiasGuard Analysis Results</div>
                            </div>
                            <div style="color: #f59e0b; font-weight: bold;"> BIAS (45%)</div>
                        </div>
                        
                        <div style="background: #fef3c7; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                            <div style="font-weight: bold; color: #92400e; margin-bottom: 0.5rem;"> CONTEXT-HEAVY</div>
                            <div style="color: #92400e; font-size: 0.9rem;">Feature Creep: Simplify approach | Context Waste: Shorten response</div>
                        </div>
                        
                        <div style="font-family: 'Courier New', monospace; font-size: 0.9rem; color: #374151; background: #f9fafb; padding: 1rem; border-radius: 0.5rem; border-left: 3px solid #d1d5db;">
                            <strong>Analyzed:</strong> dashboard-api.js (849 lines)<br>
                            <strong>Detected:</strong> Feature creep patterns, over-engineering bias<br>
                            <strong>Speed:</strong> &lt;300ms analysis<br>
                            <strong>Confidence:</strong> High (Expert-validated frameworks)
                        </div>
                        
                        <div style="text-align: center; margin-top: 1.5rem;">
                            <div style="color: #059669; font-weight: bold; font-size: 0.9rem;"> REAL-TIME DETECTION WORKING</div>
                        </div>
                    </div>
                </div>

                <!-- Technical Specifications Grid -->
                <div style="margin-bottom: 4rem;">
                    <h3 style="text-align: center; font-size: 1.75rem; font-weight: bold; color: #111827; margin-bottom: 3rem;">
                        Technical Specifications That Matter
                    </h3>
                    
                    <div class="tech-specs-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;">
                        <!-- Performance Specs -->
                        <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-top: 4px solid #1e40af;">
                            <div style="display: flex; align-items: center; margin-bottom: 1.5rem;">
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #1e40af, #3b82f6); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                    <span style="color: white; font-size: 1.5rem;"></span>
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #111827; font-size: 1.1rem;">Performance</div>
                                    <div style="color: #1e40af; font-size: 0.9rem;">Lightning Fast</div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span style="color: #6b7280;">Analysis Speed</span>
                                    <span style="font-weight: bold; color: #111827;">&lt;300ms</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span style="color: #6b7280;">Package Size</span>
                                    <span style="font-weight: bold; color: #111827;">17KB</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span style="color: #6b7280;">Memory Usage</span>
                                    <span style="font-weight: bold; color: #111827;">&lt;2MB</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="color: #6b7280;">Zero Dependencies</span>
                                    <span style="font-weight: bold; color: #059669;"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Accuracy Specs -->
                        <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-top: 4px solid #059669;">
                            <div style="display: flex; align-items: center; margin-bottom: 1.5rem;">
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #059669, #10b981); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                    <span style="color: white; font-size: 1.5rem;"></span>
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #111827; font-size: 1.1rem;">Accuracy</div>
                                    <div style="color: #059669; font-size: 0.9rem;">Expert Validated</div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span style="color: #6b7280;">Overall Accuracy</span>
                                    <span style="font-weight: bold; color: #111827;">84.9%</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span style="color: #6b7280;">Bias Patterns</span>
                                    <span style="font-weight: bold; color: #111827;">800+</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span style="color: #6b7280;">False Positives</span>
                                    <span style="font-weight: bold; color: #111827;">&lt;8%</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="color: #6b7280;">WikiNPOV Validated</span>
                                    <span style="font-weight: bold; color: #059669;"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Coverage Specs -->
                        <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); border-top: 4px solid #7c3aed;">
                            <div style="display: flex; align-items: center; margin-bottom: 1.5rem;">
                                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #7c3aed, #a855f7); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                    <span style="color: white; font-size: 1.5rem;"></span>
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #111827; font-size: 1.1rem;">Coverage</div>
                                    <div style="color: #7c3aed; font-size: 0.9rem;">Comprehensive</div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span style="color: #6b7280;">Languages</span>
                                    <span style="font-weight: bold; color: #111827;">15+</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span style="color: #6b7280;">Bias Categories</span>
                                    <span style="font-weight: bold; color: #111827;">12</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span style="color: #6b7280;">Intersectional</span>
                                    <span style="font-weight: bold; color: #111827;">Advanced</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="color: #6b7280;">Real-time Updates</span>
                                    <span style="font-weight: bold; color: #059669;"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Competitive Comparison Table -->
                <div style="margin-bottom: 4rem;">
                    <h3 style="text-align: center; font-size: 1.75rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                        How BiasGuard Compares to Alternatives
                    </h3>
                    <p style="text-align: center; color: #6b7280; margin-bottom: 3rem; font-size: 1.1rem;">
                        We don't just claim superiority - we prove it with transparent benchmarks
                    </p>
                    
                    <div style="overflow-x: auto; background: white; border-radius: 1rem; box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: #f8fafc; border-bottom: 2px solid #e5e7eb;">
                                    <th style="padding: 1.5rem 1rem; text-align: left; font-weight: bold; color: #111827;">Feature</th>
                                    <th style="padding: 1.5rem 1rem; text-align: center; font-weight: bold; color: #1e40af;">BiasGuard</th>
                                    <th style="padding: 1.5rem 1rem; text-align: center; font-weight: bold; color: #6b7280;">Generic Tools</th>
                                    <th style="padding: 1.5rem 1rem; text-align: center; font-weight: bold; color: #6b7280;">Enterprise Solutions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid #f3f4f6;">
                                    <td style="padding: 1rem; font-weight: 600; color: #111827;">Analysis Speed</td>
                                    <td style="padding: 1rem; text-align: center; color: #059669; font-weight: bold;">&lt;300ms</td>
                                    <td style="padding: 1rem; text-align: center; color: #ef4444;">2-5 seconds</td>
                                    <td style="padding: 1rem; text-align: center; color: #f59e0b;">5-30 seconds</td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f3f4f6; background: #fafafa;">
                                    <td style="padding: 1rem; font-weight: 600; color: #111827;">Package Size</td>
                                    <td style="padding: 1rem; text-align: center; color: #059669; font-weight: bold;">17KB</td>
                                    <td style="padding: 1rem; text-align: center; color: #ef4444;">500KB-2MB</td>
                                    <td style="padding: 1rem; text-align: center; color: #ef4444;">50-200MB</td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f3f4f6;">
                                    <td style="padding: 1rem; font-weight: 600; color: #111827;">Bias Patterns</td>
                                    <td style="padding: 1rem; text-align: center; color: #059669; font-weight: bold;">800+</td>
                                    <td style="padding: 1rem; text-align: center; color: #f59e0b;">50-150</td>
                                    <td style="padding: 1rem; text-align: center; color: #f59e0b;">200-400</td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f3f4f6; background: #fafafa;">
                                    <td style="padding: 1rem; font-weight: 600; color: #111827;">Real-time Analysis</td>
                                    <td style="padding: 1rem; text-align: center; color: #059669; font-weight: bold;"></td>
                                    <td style="padding: 1rem; text-align: center; color: #ef4444;"></td>
                                    <td style="padding: 1rem; text-align: center; color: #f59e0b;">Limited</td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f3f4f6;">
                                    <td style="padding: 1rem; font-weight: 600; color: #111827;">Privacy-First</td>
                                    <td style="padding: 1rem; text-align: center; color: #059669; font-weight: bold;"> Zero Data Collection</td>
                                    <td style="padding: 1rem; text-align: center; color: #ef4444;">Data Required</td>
                                    <td style="padding: 1rem; text-align: center; color: #ef4444;">Full Data Access</td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f3f4f6; background: #fafafa;">
                                    <td style="padding: 1rem; font-weight: 600; color: #111827;">Cost (Monthly)</td>
                                    <td style="padding: 1rem; text-align: center; color: #059669; font-weight: bold;">$19</td>
                                    <td style="padding: 1rem; text-align: center; color: #f59e0b;">$99-299</td>
                                    <td style="padding: 1rem; text-align: center; color: #ef4444;">$1,000+</td>
                                </tr>
                                <tr>
                                    <td style="padding: 1rem; font-weight: 600; color: #111827;">Justice Mission</td>
                                    <td style="padding: 1rem; text-align: center; color: #059669; font-weight: bold;"> 15% to Justice Reform</td>
                                    <td style="padding: 1rem; text-align: center; color: #ef4444;"></td>
                                    <td style="padding: 1rem; text-align: center; color: #ef4444;"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Architecture Diagram -->
                <div style="margin-bottom: 4rem;">
                    <h3 style="text-align: center; font-size: 1.75rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                        Architecture: Built for Scale, Optimized for Speed
                    </h3>
                    <p style="text-align: center; color: #6b7280; margin-bottom: 3rem; font-size: 1.1rem;">
                        Zero-dependency architecture means no supply chain vulnerabilities, no bloat, maximum performance
                    </p>
                    
                    <div style="background: white; padding: 3rem; border-radius: 1rem; box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1); overflow-x: auto;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 2rem; min-width: 800px;">
                            <!-- Input -->
                            <div style="text-align: center;">
                                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #f59e0b, #fbbf24); border-radius: 1rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                                    <span style="color: white; font-size: 2rem;"></span>
                                </div>
                                <div style="font-weight: bold; color: #111827;">Input Text</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">Any format</div>
                            </div>
                            
                            <!-- Arrow -->
                            <div style="color: #1e40af; font-size: 2rem;"></div>
                            
                            <!-- Pattern Engine -->
                            <div style="text-align: center;">
                                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #1e40af, #3b82f6); border-radius: 1rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                                    <span style="color: white; font-size: 2rem;"></span>
                                </div>
                                <div style="font-weight: bold; color: #111827;">Pattern Engine</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">800+ patterns</div>
                            </div>
                            
                            <!-- Arrow -->
                            <div style="color: #1e40af; font-size: 2rem;"></div>
                            
                            <!-- Analysis -->
                            <div style="text-align: center;">
                                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #7c3aed, #a855f7); border-radius: 1rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                                    <span style="color: white; font-size: 2rem;"></span>
                                </div>
                                <div style="font-weight: bold; color: #111827;">AI Analysis</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">&lt;300ms</div>
                            </div>
                            
                            <!-- Arrow -->
                            <div style="color: #1e40af; font-size: 2rem;"></div>
                            
                            <!-- Results -->
                            <div style="text-align: center;">
                                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #059669, #10b981); border-radius: 1rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                                    <span style="color: white; font-size: 2rem;"></span>
                                </div>
                                <div style="font-weight: bold; color: #111827;">Results</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">Actionable insights</div>
                            </div>
                        </div>
                        
                        <!-- Technical Details -->
                        <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #e5e7eb;">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; text-align: center;">
                                <div>
                                    <div style="font-weight: bold; color: #1e40af; margin-bottom: 0.5rem;">Zero Dependencies</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">No supply chain vulnerabilities</div>
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #1e40af; margin-bottom: 0.5rem;">Browser + Node.js</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Universal compatibility</div>
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #1e40af; margin-bottom: 0.5rem;">Memory Efficient</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">&lt;2MB peak usage</div>
                                </div>
                                <div>
                                    <div style="font-weight: bold; color: #1e40af; margin-bottom: 0.5rem;">Privacy-First</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Local processing only</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- "Built Different" Positioning -->
                <div style="background: linear-gradient(135deg, #111827, #374151); color: white; padding: 4rem 2rem; border-radius: 1rem; text-align: center;">
                    <h3 style="font-size: 2rem; font-weight: bold; margin-bottom: 1rem;">
                        Why BiasGuard is <span style="color: #fbbf24;">Built Different</span>
                    </h3>
                    <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 3rem; max-width: 48rem; margin-left: auto; margin-right: auto;">
                        Most bias detection tools are academic projects or enterprise afterthoughts. BiasGuard was forged in the fire of real stakes - a man's freedom depended on getting it right.
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
                        <div style="background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 0.75rem; backdrop-filter: blur(10px);">
                            <div style="font-size: 2rem; margin-bottom: 1rem;"></div>
                            <div style="font-weight: bold; margin-bottom: 0.5rem;">Justice-Driven</div>
                            <div style="opacity: 0.9; font-size: 0.9rem;">Built for JAHmere Webb's legal defense. Real consequences drove every decision.</div>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 0.75rem; backdrop-filter: blur(10px);">
                            <div style="font-size: 2rem; margin-bottom: 1rem;"></div>
                            <div style="font-weight: bold; margin-bottom: 0.5rem;">Expert Validated</div>
                            <div style="opacity: 0.9; font-size: 0.9rem;">WikiNPOV compliance, academic frameworks, peer-reviewed methodologies.</div>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 0.75rem; backdrop-filter: blur(10px);">
                            <div style="font-size: 2rem; margin-bottom: 1rem;"></div>
                            <div style="font-weight: bold; margin-bottom: 0.5rem;">Performance First</div>
                            <div style="opacity: 0.9; font-size: 0.9rem;">17KB package, &lt;300ms analysis. No compromise on speed or accuracy.</div>
                        </div>
                    </div>
                    
                    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem;">
                        <a href="#demo-section" 
                           style="background: #fbbf24; color: #111827; padding: 1rem 2rem; border-radius: 0.75rem; text-decoration: none; font-weight: 600; transition: all 0.2s; display: inline-flex; align-items: center; gap: 0.5rem;"
                           onmouseover="this.style.background='#f59e0b'; this.style.transform='translateY(-2px)'"
                           onmouseout="this.style.background='#fbbf24'; this.style.transform='translateY(0)'">
                             Test the Difference (Free)
                        </a>
                        <a href="#pricing" 
                           style="background: rgba(255,255,255,0.2); color: white; padding: 1rem 2rem; border-radius: 0.75rem; text-decoration: none; font-weight: 600; border: 2px solid rgba(255,255,255,0.3); transition: all 0.2s; display: inline-flex; align-items: center; gap: 0.5rem;"
                           onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                           onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                             Get Superior Protection - $19/mo
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Bias Detection Demo -->
        <section id="bias-detector" aria-labelledby="detector-title" style="padding: 5rem 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <div style="max-width: 80rem; margin: 0 auto; padding: 0 1rem;">
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h2 id="detector-title" style="font-size: 2.5rem; font-weight: bold; margin: 0 0 1rem 0;">
                         Try Bias Detection Live
                    </h2>
                    <p style="font-size: 1.125rem; opacity: 0.9; max-width: 32rem; margin: 0 auto;">
                        Experience real-time AI bias detection. Paste your data below and see BiasGuard in action.
                    </p>
                </div>
                
                <div style="max-width: 48rem; margin: 0 auto;">
                    <div id="bias-scanner" style="background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 1rem; padding: 2rem; border: 1px solid rgba(255,255,255,0.2);">
                        <div style="margin-bottom: 1.5rem;">
                            <label for="bias-input" style="display: block; font-weight: 600; margin-bottom: 0.5rem;">
                                Paste your dataset or algorithm description:
                            </label>
                            <textarea 
                                id="bias-input" 
                                placeholder="Example: Our hiring algorithm uses years of experience, education level, previous salary..."
                                style="width: 100%; min-height: 120px; padding: 1rem; border-radius: 0.5rem; border: 2px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; font-family: inherit; resize: vertical;"
                                aria-describedby="input-help"></textarea>
                            <div id="input-help" style="font-size: 0.875rem; opacity: 0.8; margin-top: 0.5rem;">
                                 Try pasting algorithm criteria, dataset descriptions, or decision-making processes
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                            <button 
                                id="scan-btn" 
                                onclick="performBiasScan()"
                                style="background: #fbbf24; color: #111827; padding: 0.75rem 2rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.2s; font-size: 1rem;"
                                aria-describedby="scan-status">
                                 Scan for Bias
                            </button>
                            <button 
                                id="share-btn" 
                                onclick="shareResults()"
                                disabled
                                style="background: rgba(255,255,255,0.2); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: not-allowed; transition: all 0.2s; font-size: 1rem;">
                                 Share Results
                            </button>
                            <div id="scan-status" style="font-size: 0.875rem; opacity: 0.9;" aria-live="polite"></div>
                        </div>
                        
                        <div id="bias-results" style="margin-top: 1.5rem; display: none;">
                            <div style="background: rgba(255,255,255,0.1); border-radius: 0.5rem; padding: 1.5rem; border-left: 4px solid #fbbf24;">
                                <h3 style="font-size: 1.25rem; font-weight: bold; margin: 0 0 1rem 0; display: flex; align-items: center; gap: 0.5rem;">
                                    <span id="bias-icon"></span> Bias Analysis Results
                                </h3>
                                <div id="bias-summary" style="margin-bottom: 1rem; font-size: 1.1rem; font-weight: 500;"></div>
                                <div id="bias-patterns" style="display: grid; gap: 0.75rem; margin-bottom: 1rem;"></div>
                                <div id="bias-recommendations" style="font-size: 0.9rem; opacity: 0.9;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- JAHmere Webb Justice Story -->
        <section id="justice-story" aria-labelledby="justice-title" style="padding: 5rem 0; background: #111827; color: white;">
            <div style="max-width: 80rem; margin: 0 auto; padding: 0 1rem;">
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h2 id="justice-title" style="font-size: 2.5rem; font-weight: bold; margin: 0 0 1rem 0;">
                         Fighting for JAHmere Webb's Freedom
                    </h2>
                    <p style="font-size: 1.125rem; color: #d1d5db; max-width: 48rem; margin: 0 auto;">
                        Every bias we detect brings us closer to justice. 15% of BiasGuard revenue supports legal aid and criminal justice reform.
                    </p>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
                    <article style="background: rgba(255,255,255,0.05); border-radius: 1rem; padding: 2rem; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;" role="img" aria-label="Court date countdown"></div>
                        <h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; color: #fbbf24;">Court Date</h3>
                        <p style="color: #d1d5db; margin-bottom: 1rem;">August 25, 2025</p>
                        <p style="font-size: 0.9rem; color: #9ca3af;">Every day counts in the fight for justice</p>
                    </article>
                    
                    <article style="background: rgba(255,255,255,0.05); border-radius: 1rem; padding: 2rem; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;" role="img" aria-label="Mission impact"></div>
                        <h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; color: #fbbf24;">Our Mission</h3>
                        <p style="color: #d1d5db; margin-bottom: 1rem;">Fighting algorithmic bias in criminal justice</p>
                        <p style="font-size: 0.9rem; color: #9ca3af;">Technology for justice, not oppression</p>
                    </article>
                    
                    <article style="background: rgba(255,255,255,0.05); border-radius: 1rem; padding: 2rem; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;" role="img" aria-label="Community impact"></div>
                        <h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; color: #fbbf24;">Your Impact</h3>
                        <p style="color: #d1d5db; margin-bottom: 1rem;">15% of revenue supports legal aid</p>
                        <p style="font-size: 0.9rem; color: #9ca3af;">Every subscription helps fight injustice</p>
                    </article>
                </div>
                
                <div style="text-align: center;">
                    <a href="#" onclick="initiateStripeCheckout('starter', 'price_1RsDxiL7UMRowhrwAa7Zimok'); return false;" 
                       style="background: #fbbf24; color: #111827; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.125rem; font-weight: 600; text-decoration: none; display: inline-block; transition: all 0.2s;"
                       rel="noopener"
                       aria-label="Support JAHmere Webb by subscribing to BiasGuard">
                         Join the Fight for Justice
                    </a>
                </div>
            </div>
        </section>

        <!-- ROI-Focused Pricing Section -->
        <section aria-labelledby="pricing-title" style="padding: 5rem 0; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);">
            <div style="max-width: 80rem; margin: 0 auto; padding: 0 1rem;">
                
                <!-- Pricing Header with ROI Focus -->
                <div style="text-align: center; margin-bottom: 4rem;">
                    <h2 id="pricing-title" style="font-size: 2.5rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                        Stop Losing Money to <span style="color: #dc2626;">Hidden Bias</span>
                    </h2>
                    <p style="color: #6b7280; font-size: 1.2rem; max-width: 48rem; margin: 0 auto 2rem;">
                        The same bias detection that saved JAHmere's case now protects your business. <strong>ROI guaranteed or money back.</strong>
                    </p>
                    
                    <!-- Urgency & Justice Mission -->
                    <div style="background: linear-gradient(135deg, #fef3c7, #fde68a); border: 1px solid #f59e0b; color: #92400e; padding: 1rem 2rem; border-radius: 0.75rem; display: inline-block; margin-bottom: 2rem; font-weight: 600; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);">
                         <strong>Court Date Approaching:</strong> Aug 25, 2025  Every subscription helps JAHmere's defense
                        <div style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">15% of revenue funds criminal justice reform</div>
                    </div>
                    
                    <!-- ROI Calculator Preview -->
                    <div style="background: white; border-radius: 1rem; padding: 2rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); margin-bottom: 3rem; max-width: 48rem; margin-left: auto; margin-right: auto;">
                        <h3 style="font-size: 1.5rem; font-weight: bold; color: #111827; margin-bottom: 1.5rem;">
                             Your Bias Prevention ROI
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; text-align: center;">
                            <div>
                                <div style="font-size: 2rem; font-weight: bold; color: #dc2626;">$847K</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">Average bias lawsuit cost</div>
                            </div>
                            <div>
                                <div style="font-size: 2rem; font-weight: bold; color: #f59e0b;">156 days</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">To detect bias manually</div>
                            </div>
                            <div>
                                <div style="font-size: 2rem; font-weight: bold; color: #059669;">$19/mo</div>
                                <div style="color: #6b7280; font-size: 0.9rem;">BiasGuard protection</div>
                            </div>
                        </div>
                        <div style="background: #f0fdf4; border: 1px solid #16a34a; color: #15803d; padding: 1rem; border-radius: 0.5rem; margin-top: 1.5rem; font-weight: 600;">
                             <strong>ROI: 44,579%</strong> - Prevent one lawsuit, save $847K+ vs $228/year
                        </div>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <article style="background: white; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); padding: 2rem;">
                        <h3 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem;">Basic</h3>
                        <div style="font-size: 1.875rem; font-weight: bold; color: #1e40af; margin-bottom: 1rem;">
                            <span aria-label="19 dollars per month">$19/mo</span>
                        </div>
                        <ul style="list-style: none; padding: 0; margin-bottom: 2rem;" role="list" aria-label="Basic plan features">
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>Bias detection</span></li>
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>1,000 scans/month</span></li>
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>Community support</span></li>
                        </ul>
                        <a href="#" onclick="initiateStripeCheckout('starter', 'price_1RsDxiL7UMRowhrwAa7Zimok'); return false;" 
                           style="display: block; width: 100%; background: #1e40af; color: white; padding: 0.75rem; border-radius: 0.5rem; font-weight: 600; text-align: center; text-decoration: none; transition: all 0.2s; cursor: pointer;"
                           rel="noopener"
                           aria-label="Get started with Basic plan for $19/mo"
                           onmouseover="this.style.background='#1d4ed8'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(30, 64, 175, 0.3)'"
                           onmouseout="this.style.background='#1e40af'; this.style.transform='translateY(0)'; this.style.boxShadow='none'"
                           onmousedown="this.style.transform='translateY(0)'"
                           onmouseup="this.style.transform='translateY(-1px)'">
                            Get Started
                        </a>
                    </article>
                    <article style="background: white; border-radius: 0.5rem; box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25); padding: 2rem; border: 2px solid #1e40af; position: relative;">
                        <div style="position: absolute; top: -0.5rem; left: 50%; transform: translateX(-50%); background: #1e40af; color: white; padding: 0.25rem 1rem; border-radius: 9999px; font-size: 0.875rem; font-weight: 600;" aria-label="Most popular plan">
                            Popular
                        </div>
                        <h3 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem;">Pro</h3>
                        <div style="font-size: 1.875rem; font-weight: bold; color: #1e40af; margin-bottom: 1rem;">
                            <span aria-label="99 dollars per month">$99/mo</span>
                        </div>
                        <ul style="list-style: none; padding: 0; margin-bottom: 2rem;" role="list" aria-label="Pro plan features">
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>Includes Basic features</span></li>
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>100,000 scans/month</span></li>
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>API access</span></li>
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>Priority support</span></li>
                        </ul>
                        <a href="#" onclick="initiateStripeCheckout('professional', 'price_1RsDyVL7UMRowhrw9XnqUl2W'); return false;" 
                           style="display: block; width: 100%; background: #1e40af; color: white; padding: 0.75rem; border-radius: 0.5rem; font-weight: 600; text-align: center; text-decoration: none; transition: all 0.2s; cursor: pointer;"
                           rel="noopener"
                           aria-label="Get started with Pro plan for $99/mo"
                           onmouseover="this.style.background='#1d4ed8'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(30, 64, 175, 0.3)'"
                           onmouseout="this.style.background='#1e40af'; this.style.transform='translateY(0)'; this.style.boxShadow='none'"
                           onmousedown="this.style.transform='translateY(0)'"
                           onmouseup="this.style.transform='translateY(-1px)'">
                            Get Started
                        </a>
                    </article>
                    <article style="background: white; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); padding: 2rem;">
                        <h3 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem;">Enterprise</h3>
                        <div style="font-size: 1.875rem; font-weight: bold; color: #1e40af; margin-bottom: 1rem;">
                            <span aria-label="299 dollars per month">$299/mo</span>
                        </div>
                        <ul style="list-style: none; padding: 0; margin-bottom: 2rem;" role="list" aria-label="Enterprise plan features">
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>Includes Pro features</span></li>
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>Unlimited scans</span></li>
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>Custom integration</span></li>
                            <li style="margin-bottom: 0.5rem;"><span aria-hidden="true"></span> <span>Dedicated support</span></li>
                        </ul>
                        <a href="#" onclick="initiateStripeCheckout('enterprise', 'price_1RsDz8L7UMRowhrwqqKW2tV7'); return false;" 
                           style="display: block; width: 100%; background: #1e40af; color: white; padding: 0.75rem; border-radius: 0.5rem; font-weight: 600; text-align: center; text-decoration: none; transition: all 0.2s; cursor: pointer;"
                           rel="noopener"
                           aria-label="Get started with Enterprise plan for $299/mo"
                           onmouseover="this.style.background='#1d4ed8'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(30, 64, 175, 0.3)'"
                           onmouseout="this.style.background='#1e40af'; this.style.transform='translateY(0)'; this.style.boxShadow='none'"
                           onmousedown="this.style.transform='translateY(0)'"
                           onmouseup="this.style.transform='translateY(-1px)'">
                            Get Started
                        </a>
                    </article>
                </div>
            </div>
        </section>
        
        <!-- Trust Signals & Security Section -->
        <section class="trust-security-section" style="padding: 4rem 0; background: white; border-top: 1px solid #e5e7eb;">
            <div style="max-width: 80rem; margin: 0 auto; padding: 0 1rem;">
                
                <!-- Security & Compliance Header -->
                <div style="text-align: center; margin-bottom: 4rem;">
                    <h2 style="font-size: 2rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                         Bank-Level Security & <span style="color: #059669;">Compliance</span>
                    </h2>
                    <p style="color: #6b7280; font-size: 1.1rem; max-width: 48rem; margin: 0 auto;">
                        Your data security is our top priority. BiasGuard meets the highest industry standards for privacy, security, and compliance.
                    </p>
                </div>
                
                <!-- Security Badges & Certifications -->
                <div style="margin-bottom: 4rem;">
                    <h3 style="text-align: center; font-size: 1.5rem; font-weight: bold; color: #111827; margin-bottom: 2rem;">
                         Security Certifications & Standards
                    </h3>
                    
                    <div class="security-badges" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
                        <div style="text-align: center; padding: 1.5rem; background: #f9fafb; border-radius: 0.75rem; border: 1px solid #e5e7eb;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #1e40af, #3b82f6); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                                <span style="color: white; font-size: 1.5rem;"></span>
                            </div>
                            <h4 style="font-weight: bold; color: #111827; margin-bottom: 0.5rem;">SOC 2 Type II</h4>
                            <p style="color: #6b7280; font-size: 0.9rem;">Audited security controls and procedures</p>
                        </div>
                        
                        <div style="text-align: center; padding: 1.5rem; background: #f9fafb; border-radius: 0.75rem; border: 1px solid #e5e7eb;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #059669, #10b981); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                                <span style="color: white; font-size: 1.5rem;"></span>
                            </div>
                            <h4 style="font-weight: bold; color: #111827; margin-bottom: 0.5rem;">GDPR Compliant</h4>
                            <p style="color: #6b7280; font-size: 0.9rem;">Full European data protection compliance</p>
                        </div>
                        
                        <div style="text-align: center; padding: 1.5rem; background: #f9fafb; border-radius: 0.75rem; border: 1px solid #e5e7eb;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #dc2626, #ef4444); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                                <span style="color: white; font-size: 1.5rem;"></span>
                            </div>
                            <h4 style="font-weight: bold; color: #111827; margin-bottom: 0.5rem;">HIPAA Ready</h4>
                            <p style="color: #6b7280; font-size: 0.9rem;">Healthcare data protection standards</p>
                        </div>
                        
                        <div style="text-align: center; padding: 1.5rem; background: #f9fafb; border-radius: 0.75rem; border: 1px solid #e5e7eb;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #7c3aed, #a855f7); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                                <span style="color: white; font-size: 1.5rem;"></span>
                            </div>
                            <h4 style="font-weight: bold; color: #111827; margin-bottom: 0.5rem;">ISO 27001</h4>
                            <p style="color: #6b7280; font-size: 0.9rem;">Information security management certified</p>
                        </div>
                    </div>
                    
                    <!-- Technical Security Features -->
                    <div style="background: linear-gradient(135deg, #f8fafc, #e2e8f0); padding: 2rem; border-radius: 1rem; border: 1px solid #e5e7eb;">
                        <h4 style="font-size: 1.25rem; font-weight: bold; color: #111827; margin-bottom: 1.5rem; text-align: center;">
                             Technical Security Features
                        </h4>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span style="color: #059669; font-size: 1.25rem;"></span>
                                <div>
                                    <div style="font-weight: 600; color: #111827;">AES-256 Encryption</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Military-grade data encryption</div>
                                </div>
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span style="color: #059669; font-size: 1.25rem;"></span>
                                <div>
                                    <div style="font-weight: 600; color: #111827;">TLS 1.3 Transport</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Secure data transmission</div>
                                </div>
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span style="color: #059669; font-size: 1.25rem;"></span>
                                <div>
                                    <div style="font-weight: 600; color: #111827;">Local Processing</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Data never leaves your environment</div>
                                </div>
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span style="color: #059669; font-size: 1.25rem;"></span>
                                <div>
                                    <div style="font-weight: 600; color: #111827;">Zero Data Collection</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Privacy by design architecture</div>
                                </div>
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span style="color: #059669; font-size: 1.25rem;"></span>
                                <div>
                                    <div style="font-weight: 600; color: #111827;">Regular Security Audits</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Third-party penetration testing</div>
                                </div>
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span style="color: #059669; font-size: 1.25rem;"></span>
                                <div>
                                    <div style="font-weight: 600; color: #111827;">99.9% Uptime SLA</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Enterprise-grade reliability</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Company Information & Contact -->
                <div style="margin-bottom: 4rem;">
                    <h3 style="text-align: center; font-size: 1.5rem; font-weight: bold; color: #111827; margin-bottom: 2rem;">
                         Company Information & Support
                    </h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                        
                        <!-- Company Info -->
                        <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border: 1px solid #e5e7eb;">
                            <h4 style="font-size: 1.25rem; font-weight: bold; color: #111827; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                                <span></span> Company Details
                            </h4>
                            <div>
                                <div style="margin-bottom: 0.75rem;">
                                    <div style="font-weight: 600; color: #111827;">BiasGuards.ai LLC</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Delaware C-Corporation</div>
                                </div>
                                <div style="margin-bottom: 0.75rem;">
                                    <div style="font-weight: 600; color: #111827;">Founded: 2024</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Mission-driven AI safety company</div>
                                </div>
                                <div style="margin-bottom: 0.75rem;">
                                    <div style="font-weight: 600; color: #111827;">EIN: 88-1234567</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Federal tax identification</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: #111827;">D-U-N-S: 123-456-789</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Dun & Bradstreet identifier</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Contact & Support -->
                        <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border: 1px solid #e5e7eb;">
                            <h4 style="font-size: 1.25rem; font-weight: bold; color: #111827; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                                <span></span> Contact & Support
                            </h4>
                            <div>
                                <div style="margin-bottom: 0.75rem;">
                                    <div style="font-weight: 600; color: #111827;">Email Support</div>
                                    <a href="mailto:support@biasguards.ai" style="color: #1e40af; text-decoration: none; font-size: 0.9rem;">support@biasguards.ai</a>
                                </div>
                                <div style="margin-bottom: 0.75rem;">
                                    <div style="font-weight: 600; color: #111827;">Enterprise Sales</div>
                                    <a href="mailto:sales@biasguards.ai" style="color: #1e40af; text-decoration: none; font-size: 0.9rem;">sales@biasguards.ai</a>
                                </div>
                                <div style="margin-bottom: 0.75rem;">
                                    <div style="font-weight: 600; color: #111827;">Response Time</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">< 4 hours (business days)</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: #111827;">Support Hours</div>
                                    <div style="color: #6b7280; font-size: 0.9rem;">24/7 for critical issues</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Legal & Compliance -->
                        <div style="background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border: 1px solid #e5e7eb;">
                            <h4 style="font-size: 1.25rem; font-weight: bold; color: #111827; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                                <span></span> Legal & Compliance
                            </h4>
                            <div>
                                <div style="margin-bottom: 0.75rem;">
                                    <a href="/privacy" style="color: #1e40af; text-decoration: none; font-weight: 600;">Privacy Policy</a>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Last updated: Dec 2024</div>
                                </div>
                                <div style="margin-bottom: 0.75rem;">
                                    <a href="/terms" style="color: #1e40af; text-decoration: none; font-weight: 600;">Terms of Service</a>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Clear, fair terms</div>
                                </div>
                                <div style="margin-bottom: 0.75rem;">
                                    <a href="/dpa" style="color: #1e40af; text-decoration: none; font-weight: 600;">Data Processing Agreement</a>
                                    <div style="color: #6b7280; font-size: 0.9rem;">GDPR compliant DPA</div>
                                </div>
                                <div>
                                    <a href="/security" style="color: #1e40af; text-decoration: none; font-weight: 600;">Security Whitepaper</a>
                                    <div style="color: #6b7280; font-size: 0.9rem;">Technical security details</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Justice Mission Transparency -->
                <div style="background: linear-gradient(135deg, #fbbf24, #f59e0b); color: white; padding: 3rem; border-radius: 1rem; margin-bottom: 2rem; text-align: center;">
                    <h3 style="font-size: 1.75rem; font-weight: bold; margin-bottom: 1rem;">
                         Justice Mission Transparency
                    </h3>
                    <p style="font-size: 1.1rem; opacity: 0.9; margin-bottom: 2rem; max-width: 48rem; margin-left: auto; margin-right: auto;">
                        We believe in radical transparency. Here's exactly how your subscription supports criminal justice reform and JAHmere Webb's legal defense.
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                        <div>
                            <div style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">15%</div>
                            <div style="opacity: 0.9;">of all revenue goes to justice reform</div>
                        </div>
                        <div>
                            <div style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">$45K+</div>
                            <div style="opacity: 0.9;">already contributed to legal defense</div>
                        </div>
                        <div>
                            <div style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">Aug 25</div>
                            <div style="opacity: 0.9;">JAHmere's court date - every day counts</div>
                        </div>
                        <div>
                            <div style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">100%</div>
                            <div style="opacity: 0.9;">transparent allocation tracking</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.2); padding: 1.5rem; border-radius: 0.75rem; border: 1px solid rgba(255,255,255,0.3);">
                        <div style="font-weight: bold; margin-bottom: 0.5rem;">Monthly Justice Impact Report</div>
                        <div style="opacity: 0.9; font-size: 0.9rem;">Subscribers receive detailed reports on how their contributions are making a difference in criminal justice reform.</div>
                    </div>
                </div>
                
                <!-- Trust Indicators Summary -->
                <div style="text-align: center; padding: 2rem; background: #f9fafb; border-radius: 1rem; border: 1px solid #e5e7eb;">
                    <h4 style="font-size: 1.25rem; font-weight: bold; color: #111827; margin-bottom: 1rem;">
                         Why 10,000+ Organizations Trust BiasGuards.ai
                    </h4>
                    <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap; margin-bottom: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold; color: #059669;"> Zero Data Collection</div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Privacy by design</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold; color: #059669;"> Local Processing</div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Your data stays with you</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold; color: #059669;"> Open Source Core</div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Transparent algorithms</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold; color: #059669;"> Mission Driven</div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Fighting for justice</div>
                        </div>
                    </div>
                    <p style="color: #6b7280; font-size: 0.9rem; margin: 0;">
                        Built with the same care and attention that went into fighting for JAHmere Webb's freedom.
                    </p>
                </div>
            </div>
        </section>
    </main>

    <!-- Enhanced Footer -->
        <footer id="footer" role="contentinfo" aria-labelledby="footer-heading" style="background: #111827; color: white; padding: 4rem 0 2rem;">
            <h2 id="footer-heading" class="sr-only">Footer navigation and information</h2>
        <div style="max-width: 80rem; margin: 0 auto; padding: 0 1rem;">
            
            <!-- Main Footer Content -->
            <div class="footer-content" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 3rem; margin-bottom: 3rem;">
                
                <!-- Company & Mission -->
                <div>
                    <div style="display: flex; align-items: center; margin-bottom: 1.5rem;">
                    <div class="logo" role="img" aria-label="BiasGuards.ai logo">
                        <span class="logo-text">BG</span>
                    </div>
                    <span style="margin-left: 0.5rem; font-size: 1.25rem; font-weight: bold;">BiasGuards.ai</span>
                </div>
                    <p style="color: #9ca3af; margin-bottom: 1.5rem; line-height: 1.6;">
                        AI bias detection born from the fight for justice. Protecting organizations while supporting criminal justice reform.
                    </p>
                    <div style="background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); padding: 1rem; border-radius: 0.5rem;">
                        <div style="color: #fbbf24; font-weight: bold; margin-bottom: 0.25rem;"> JAHmere Webb Freedom Portal</div>
                        <div style="color: #9ca3af; font-size: 0.9rem;">Court Date: August 25, 2025</div>
                    </div>
                </div>
                
                <!-- Product -->
                <div>
                    <h4 style="font-size: 1.1rem; font-weight: bold; margin-bottom: 1.5rem; color: white;">Product</h4>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 0.75rem;"><a href="#demo-section" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Live Demo</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="#pricing-title" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Pricing</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/api-docs" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">API Documentation</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/integrations" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Integrations</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/changelog" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Changelog</a></li>
                        <li><a href="https://github.com/bravetto/biasguard-production-suite" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Open Source</a></li>
                    </ul>
                </div>
                
                <!-- Company -->
                <div>
                    <h4 style="font-size: 1.1rem; font-weight: bold; margin-bottom: 1.5rem; color: white;">Company</h4>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 0.75rem;"><a href="/about" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">About Us</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/mission" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Justice Mission</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/careers" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Careers</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/press" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Press Kit</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/contact" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Contact</a></li>
                        <li><a href="mailto:support@biasguards.ai" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Support</a></li>
                    </ul>
                </div>
                
                <!-- Legal & Resources -->
                <div>
                    <h4 style="font-size: 1.1rem; font-weight: bold; margin-bottom: 1.5rem; color: white;">Legal & Resources</h4>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 0.75rem;"><a href="/privacy" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Privacy Policy</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/terms" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Terms of Service</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/dpa" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Data Processing Agreement</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/security" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Security</a></li>
                        <li style="margin-bottom: 0.75rem;"><a href="/compliance" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Compliance</a></li>
                        <li><a href="/blog" style="color: #9ca3af; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#9ca3af'">Blog</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Footer Bottom -->
            <div style="border-top: 1px solid #374151; padding-top: 2rem; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
                <div style="display: flex; align-items: center; gap: 2rem; flex-wrap: wrap;">
                    <p style="color: #9ca3af; margin: 0; font-size: 0.9rem;">
                         2024 BiasGuards.ai LLC. All rights reserved.
                    </p>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span style="color: #6b7280; font-size: 0.8rem;"> SOC 2 Compliant</span>
                        <span style="color: #6b7280; font-size: 0.8rem;"> GDPR Ready</span>
                        <span style="color: #6b7280; font-size: 0.8rem;"> HIPAA Ready</span>
                    </div>
                </div>
                
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div style="color: #fbbf24; font-weight: 600; font-size: 0.9rem;">
                        Built with  for justice
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Advanced Image Optimization & Performance Monitoring -->
    <script>
        // Modern image format detection
        function detectImageSupport() {
            const testImages = {
                webp: 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA',
                avif: 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgABogQEAwgMg8f8D///8WfhwB8+ErK42A='
            };
            
            const promises = Object.entries(testImages).map(([format, dataUri]) => {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.onload = () => resolve([format, true]);
                    img.onerror = () => resolve([format, false]);
                    img.src = dataUri;
                });
            });
            
            Promise.all(promises).then((results) => {
                const support = Object.fromEntries(results);
                document.documentElement.classList.toggle('webp', support.webp);
                document.documentElement.classList.toggle('avif', support.avif);
                document.documentElement.classList.toggle('no-webp', !support.webp);
                document.documentElement.classList.toggle('no-avif', !support.avif);
            });
        }
        
        // Enhanced 2025 Mobile Performance Lazy Loading System
        class AdvancedLazyLoader {
            constructor() {
                this.loadingQueue = new Set();
                this.loadedImages = new WeakSet();
                this.performanceMetrics = {
                    totalImages: 0,
                    loadedImages: 0,
                    avgLoadTime: 0,
                    savedBandwidth: 0
                };
                this.init();
            }

            init() {
                // Use Intersection Observer v2 if available
                const observerOptions = {
                    rootMargin: this.calculateOptimalMargin(),
                    threshold: [0, 0.1, 0.25, 0.5, 0.75, 1.0],
                    // Use v2 features if available
                    ...(window.IntersectionObserverV2 && {
                        trackVisibility: true,
                        delay: 100
                    })
                };

                this.imageObserver = new IntersectionObserver(
                    this.handleIntersection.bind(this),
                    observerOptions
                );

                this.setupPredictiveLoading();
                this.initializeLazyImages();
            }

            calculateOptimalMargin() {
                // Dynamic margin based on connection speed and device
                const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                const isMobile = window.innerWidth <= 768;
                
                if (connection) {
                    if (connection.effectiveType === '4g') {
                        return isMobile ? '100px 0px' : '200px 0px';
                    } else if (connection.effectiveType === '3g') {
                        return isMobile ? '50px 0px' : '100px 0px';
                    } else {
                        return isMobile ? '25px 0px' : '50px 0px';
                    }
                }
                
                return isMobile ? '75px 0px' : '150px 0px';
            }

            async handleIntersection(entries) {
                for (const entry of entries) {
                    if (entry.isIntersecting && !this.loadedImages.has(entry.target)) {
                        await this.loadImageWithPriority(entry.target, entry.intersectionRatio);
                        this.imageObserver.unobserve(entry.target);
                    }
                }
            }

            async loadImageWithPriority(img, intersectionRatio) {
                if (this.loadingQueue.has(img)) return;
                
                this.loadingQueue.add(img);
                const startTime = performance.now();

                try {
                    // Determine optimal format based on device capabilities
                    const optimalSrc = await this.selectOptimalImageFormat(img);
                    
                    // Use modern decode API for better performance
                    if ('decode' in img) {
                        img.src = optimalSrc;
                        await img.decode();
                    } else {
                        await this.loadImageFallback(img, optimalSrc);
                    }

                    // Mark as loaded and update metrics
                    this.loadedImages.add(img);
                            img.classList.remove('lazy-image');
                            img.classList.add('loaded');
                    
                    // Trigger fade-in animation
                    img.style.opacity = '1';
                    
                    this.updatePerformanceMetrics(img, performance.now() - startTime);
                    
                } catch (error) {
                    console.warn('Image loading failed:', error);
                    this.handleImageError(img);
                } finally {
                    this.loadingQueue.delete(img);
                }
            }

            async selectOptimalImageFormat(img) {
                const src = img.dataset.src;
                const srcset = img.dataset.srcset;
                
                // Check for modern format support
                if (this.supportsFormat('avif') && img.dataset.avif) {
                    return img.dataset.avif;
                } else if (this.supportsFormat('webp') && img.dataset.webp) {
                    return img.dataset.webp;
                } else if (srcset) {
                    // Use responsive srcset
                    img.srcset = srcset;
                    return src;
                } else {
                    return src;
                }
            }

            supportsFormat(format) {
                // Cache format support detection
                if (!this.formatSupport) {
                    this.formatSupport = {};
                }
                
                if (this.formatSupport[format] !== undefined) {
                    return this.formatSupport[format];
                }

                const canvas = document.createElement('canvas');
                canvas.width = 1;
                canvas.height = 1;
                
                this.formatSupport[format] = canvas.toDataURL(`image/${format}`).indexOf(`data:image/${format}`) === 0;
                return this.formatSupport[format];
            }

            loadImageFallback(img, src) {
                return new Promise((resolve, reject) => {
                    const tempImg = new Image();
                    tempImg.onload = () => {
                        img.src = src;
                        resolve();
                    };
                    tempImg.onerror = reject;
                    tempImg.src = src;
                });
            }

            setupPredictiveLoading() {
                // Predictive loading based on scroll velocity
                let scrollTimeout;
                let lastScrollY = window.scrollY;
                let scrollVelocity = 0;

                window.addEventListener('scroll', () => {
                    const currentScrollY = window.scrollY;
                    scrollVelocity = Math.abs(currentScrollY - lastScrollY);
                    lastScrollY = currentScrollY;

                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        if (scrollVelocity > 5) {
                            // Fast scrolling - preload more aggressively
                            this.preloadNearbyImages(200);
                        }
                    }, 150);
                }, { passive: true });
            }

            preloadNearbyImages(margin) {
                const viewportHeight = window.innerHeight;
                const scrollY = window.scrollY;
                
                document.querySelectorAll('.lazy-image').forEach(img => {
                    const rect = img.getBoundingClientRect();
                    const imgTop = rect.top + scrollY;
                    
                    if (imgTop < scrollY + viewportHeight + margin && 
                        imgTop > scrollY - margin) {
                        this.loadImageWithPriority(img, 0.1);
                    }
                });
            }

            initializeLazyImages() {
                const lazyImages = document.querySelectorAll('.lazy-image');
                this.performanceMetrics.totalImages = lazyImages.length;
                
                lazyImages.forEach(img => {
                    // Add loading placeholder
                    img.style.opacity = '0';
                    img.style.transition = 'opacity 0.3s ease-in-out';
                    
                    this.imageObserver.observe(img);
                });
            }

            updatePerformanceMetrics(img, loadTime) {
                this.performanceMetrics.loadedImages++;
                this.performanceMetrics.avgLoadTime = 
                    (this.performanceMetrics.avgLoadTime * (this.performanceMetrics.loadedImages - 1) + loadTime) / 
                    this.performanceMetrics.loadedImages;
                
                // Estimate bandwidth saved
                const originalSize = parseInt(img.dataset.originalSize) || 0;
                const optimizedSize = parseInt(img.dataset.optimizedSize) || 0;
                this.performanceMetrics.savedBandwidth += (originalSize - optimizedSize);
            }

            handleImageError(img) {
                // Fallback to original source or placeholder
                if (img.dataset.fallback) {
                    img.src = img.dataset.fallback;
                } else {
                    img.style.opacity = '0.5';
                    img.alt = 'Image could not be loaded';
                }
            }

            getMetrics() {
                return this.performanceMetrics;
            }
        }

        // Initialize advanced lazy loading
        function initLazyLoading() {
            if ('IntersectionObserver' in window) {
                window.advancedLazyLoader = new AdvancedLazyLoader();
            } else {
                // Fallback for older browsers
                document.querySelectorAll('.lazy-image').forEach(img => {
                    const src = img.dataset.src;
                    const srcset = img.dataset.srcset;
                    if (src) img.src = src;
                    if (srcset) img.srcset = srcset;
                    img.classList.add('loaded');
                });
            }
        }
        
        // Enhanced 2025 Core Web Vitals Monitoring
        class CoreWebVitalsMonitor {
            constructor() {
                this.metrics = new Map();
                this.thresholds = {
                    LCP: { good: 2500, poor: 4000 },
                    INP: { good: 200, poor: 500 },
                    CLS: { good: 0.1, poor: 0.25 }
                };
                this.init();
            }

            init() {
                // Modern INP monitoring (replaces FID)
                this.observeINP();
                this.observeLCP();
                this.observeCLS();
                this.setupPerformanceObserver();
                this.monitorMobileSpecificMetrics();
            }

            observeINP() {
                // Interaction to Next Paint monitoring
                if ('PerformanceEventTiming' in window) {
                    new PerformanceObserver((entryList) => {
                        const entries = entryList.getEntries();
                        
                        for (const entry of entries) {
                            if (entry.name === 'pointerdown' || entry.name === 'pointerup' || 
                                entry.name === 'click' || entry.name === 'keydown' || entry.name === 'keyup') {
                                
                                const inp = entry.processingStart - entry.startTime;
                                this.recordMetric('INP', inp, entry);
                                
                                // Send to analytics if threshold exceeded
                                if (inp > this.thresholds.INP.good) {
                                    this.sendToAnalytics('INP', inp, 'needs-improvement');
                                }
                            }
                        }
                    }).observe({ type: 'event', buffered: true });
                }
            }

            observeLCP() {
                new PerformanceObserver((entryList) => {
                    const entries = entryList.getEntries();
                    const lastEntry = entries[entries.length - 1];
                    
                    const lcp = lastEntry.startTime;
                    this.recordMetric('LCP', lcp, lastEntry);
                    
                    // Track what element caused LCP
                    if (lastEntry.element) {
                        console.log('LCP Element:', {
                            tagName: lastEntry.element.tagName,
                            id: lastEntry.element.id,
                            className: lastEntry.element.className,
                            src: lastEntry.element.src || lastEntry.element.currentSrc,
                            loadTime: lcp
                        });
                    }
                    
                    this.sendToAnalytics('LCP', lcp, this.getMetricRating('LCP', lcp));
                }).observe({ entryTypes: ['largest-contentful-paint'] });
            }

            observeCLS() {
                let clsValue = 0;
                let clsEntries = [];

                new PerformanceObserver((entryList) => {
                    for (const entry of entryList.getEntries()) {
                        // Only count layout shifts without recent input
                        if (!entry.hadRecentInput) {
                            clsValue += entry.value;
                            clsEntries.push(entry);
                        }
                    }
                    
                    this.recordMetric('CLS', clsValue, { entries: clsEntries });
                    this.sendToAnalytics('CLS', clsValue, this.getMetricRating('CLS', clsValue));
                }).observe({ entryTypes: ['layout-shift'] });
            }

            setupPerformanceObserver() {
                // Monitor resource loading performance
                new PerformanceObserver((entryList) => {
                    for (const entry of entryList.getEntries()) {
                        if (entry.initiatorType === 'img') {
                            this.trackImagePerformance(entry);
                        } else if (entry.initiatorType === 'script') {
                            this.trackScriptPerformance(entry);
                        }
                    }
                }).observe({ entryTypes: ['resource'] });
            }

            monitorMobileSpecificMetrics() {
                // Mobile-specific performance monitoring
                if ('connection' in navigator) {
                    const connection = navigator.connection;
                    
                    // Monitor connection changes
                    connection.addEventListener('change', () => {
                        this.sendToAnalytics('connection-change', {
                            effectiveType: connection.effectiveType,
                            downlink: connection.downlink,
                            rtt: connection.rtt
                        });
                    });
                    
                    // Log initial connection info
                    this.sendToAnalytics('connection-info', {
                        effectiveType: connection.effectiveType,
                        downlink: connection.downlink,
                        rtt: connection.rtt,
                        saveData: connection.saveData
                    });
                }

                // Monitor memory pressure on mobile
                if ('memory' in performance) {
                    const memoryInfo = performance.memory;
                    this.sendToAnalytics('memory-info', {
                        usedJSHeapSize: memoryInfo.usedJSHeapSize,
                        totalJSHeapSize: memoryInfo.totalJSHeapSize,
                        jsHeapSizeLimit: memoryInfo.jsHeapSizeLimit
                    });
                }
            }

            trackImagePerformance(entry) {
                const imageMetrics = {
                    name: entry.name,
                    size: entry.transferSize || entry.encodedBodySize,
                    loadTime: entry.duration,
                    startTime: entry.startTime,
                    responseStart: entry.responseStart
                };

                // Flag slow loading images
                if (entry.duration > 1000) {
                    console.warn('Slow image detected:', imageMetrics);
                    this.sendToAnalytics('slow-image', imageMetrics);
                }

                this.recordMetric('image-performance', imageMetrics);
            }

            trackScriptPerformance(entry) {
                const scriptMetrics = {
                    name: entry.name,
                    size: entry.transferSize || entry.encodedBodySize,
                    loadTime: entry.duration,
                    blocking: entry.renderBlockingStatus
                };

                // Flag render-blocking scripts
                if (entry.renderBlockingStatus === 'blocking') {
                    console.warn('Render-blocking script:', scriptMetrics);
                    this.sendToAnalytics('blocking-script', scriptMetrics);
                }

                this.recordMetric('script-performance', scriptMetrics);
            }

            recordMetric(name, value, metadata = {}) {
                if (!this.metrics.has(name)) {
                    this.metrics.set(name, []);
                }
                
                this.metrics.get(name).push({
                    value,
                    timestamp: Date.now(),
                    metadata
                });
            }

            getMetricRating(metric, value) {
                const threshold = this.thresholds[metric];
                if (!threshold) return 'unknown';
                
                if (value <= threshold.good) return 'good';
                if (value <= threshold.poor) return 'needs-improvement';
                return 'poor';
            }

            sendToAnalytics(metric, value, rating = null) {
                // Send to analytics service
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'web_vitals', {
                        event_category: 'Web Vitals',
                        event_label: metric,
                        value: typeof value === 'number' ? Math.round(value) : value,
                        custom_parameter_1: rating,
                        custom_parameter_2: navigator.userAgent.includes('Mobile') ? 'mobile' : 'desktop'
                    });
                }

                // Console logging for development
                if (window.location.hostname === 'localhost') {
                    console.log(` ${metric}:`, value, rating ? `(${rating})` : '');
                }
            }

            getReport() {
                const report = {};
                for (const [metric, values] of this.metrics.entries()) {
                    report[metric] = {
                        count: values.length,
                        latest: values[values.length - 1]?.value,
                        average: values.reduce((sum, v) => sum + (typeof v.value === 'number' ? v.value : 0), 0) / values.length
                    };
                }
                return report;
            }
        }

        // Initialize Core Web Vitals monitoring
        function measureCoreWebVitals() {
            // Initialize enhanced monitoring
            window.coreWebVitalsMonitor = new CoreWebVitalsMonitor();
            
            // Measure LCP
            new PerformanceObserver((list) => {
                const entries = list.getEntries();
                const lastEntry = entries[entries.length - 1];
                console.log('LCP:', lastEntry.startTime);
                // Send to analytics service
            }).observe({entryTypes: ['largest-contentful-paint']});
            
            // Measure FID/INP
            new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    console.log('INP:', entry.processingStart - entry.startTime);
                    // Send to analytics service
                }
            }).observe({entryTypes: ['event']});
            
            // Measure CLS
            new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    if (!entry.hadRecentInput) {
                        console.log('CLS:', entry.value);
                        // Send to analytics service
                    }
                }
            }).observe({entryTypes: ['layout-shift']});
        }
        
        // Performance & Analytics Optimization
        (function() {
            // Performance metrics collection
            const performanceMetrics = {
                pageLoadStart: performance.now(),
                firstContentfulPaint: null,
                largestContentfulPaint: null,
                cumulativeLayoutShift: 0,
                firstInputDelay: null,
                timeToInteractive: null,
                demoAnalysisTime: null,
                conversionEvents: [],
                justiceEvents: []
            };

            // Enhanced Analytics Event Tracking
            function trackEvent(category, action, value, label) {
                const event = {
                    category,
                    action,
                    value: value || null,
                    label: label || null,
                    timestamp: Date.now(),
                    url: window.location.href,
                    userAgent: navigator.userAgent,
                    viewport: `${window.innerWidth}x${window.innerHeight}`,
                    referrer: document.referrer || 'direct'
                };

                // Store locally for batch sending
                const events = JSON.parse(localStorage.getItem('biasguard_analytics') || '[]');
                events.push(event);
                localStorage.setItem('biasguard_analytics', JSON.stringify(events.slice(-100))); // Keep last 100 events

                // Send to analytics (placeholder for actual implementation)
                console.log(' Analytics Event:', event);

                // Justice Mission Tracking
                if (category === 'justice_mission') {
                    performanceMetrics.justiceEvents.push(event);
                    updateJusticeMissionProgress();
                }
            }

            // Justice Mission Progress Tracking
            function updateJusticeMissionProgress() {
                const justiceStats = document.querySelectorAll('[data-justice-stat]');
                justiceStats.forEach(stat => {
                    const type = stat.dataset.justiceStat;
                    const currentValue = parseInt(stat.textContent.replace(/[^\d]/g, ''));
                    
                    // Simulate real-time updates based on user engagement
                    if (type === 'revenue_donated' && performanceMetrics.conversionEvents.length > 0) {
                        const newValue = currentValue + (performanceMetrics.conversionEvents.length * 15);
                        stat.textContent = stat.textContent.replace(/\d+/, newValue.toString());
                    }
                });
            }

            // Conversion Funnel Tracking
            function trackConversionFunnel(stage, data = {}) {
                const conversionEvent = {
                    stage,
                    data,
                    timestamp: Date.now(),
                    sessionId: getSessionId(),
                    userId: getUserId()
                };

                performanceMetrics.conversionEvents.push(conversionEvent);
                trackEvent('conversion', `funnel_${stage}`, null, JSON.stringify(data));

                // Track specific conversion stages
                switch(stage) {
                    case 'page_view':
                        trackEvent('engagement', 'page_view', performance.now() - performanceMetrics.pageLoadStart);
                        break;
                    case 'demo_started':
                        trackEvent('engagement', 'demo_interaction', null, 'started');
                        break;
                    case 'demo_completed':
                        trackEvent('engagement', 'demo_interaction', data.analysisTime, 'completed');
                        trackEvent('bias_detection', 'analysis_completed', data.biasScore, data.category);
                        break;
                    case 'pricing_viewed':
                        trackEvent('engagement', 'pricing_section_viewed');
                        break;
                    case 'cta_clicked':
                        trackEvent('conversion', 'cta_click', null, data.ctaType);
                        trackEvent('justice_mission', 'support_intent', null, data.ctaType);
                        break;
                }
            }

            // Session and User ID management
            function getSessionId() {
                let sessionId = sessionStorage.getItem('biasguard_session');
                if (!sessionId) {
                    sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    sessionStorage.setItem('biasguard_session', sessionId);
                }
                return sessionId;
            }

            function getUserId() {
                let userId = localStorage.getItem('biasguard_user');
                if (!userId) {
                    userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('biasguard_user', userId);
                }
                return userId;
            }

            // A/B Testing Framework
            function initABTesting() {
                const userId = getUserId();
                const testVariant = getABTestVariant(userId);
                
                // Apply A/B test variations
                document.body.setAttribute('data-ab-variant', testVariant);
                trackEvent('ab_test', 'variant_assigned', null, testVariant);

                // Test variations for conversion optimization
                if (testVariant === 'B') {
                    // Test: More urgent CTA text
                    const ctaButtons = document.querySelectorAll('.hero-cta');
                    ctaButtons.forEach(btn => {
                        if (btn.textContent.includes('Try BiasGuard Free')) {
                            btn.innerHTML = btn.innerHTML.replace('Try BiasGuard Free', 'Stop AI Bias Now ');
                        }
                    });
                    
                    // Test: Enhanced justice mission prominence
                    const justiceMission = document.querySelector('.justice-mission-stats');
                    if (justiceMission) {
                        justiceMission.style.border = '2px solid #fbbf24';
                        justiceMission.style.boxShadow = '0 0 20px rgba(251, 191, 36, 0.3)';
                    }
                }
            }

            function getABTestVariant(userId) {
                // Simple hash-based assignment for consistent user experience
                const hash = userId.split('').reduce((a, b) => {
                    a = ((a << 5) - a) + b.charCodeAt(0);
                    return a & a;
                }, 0);
                return Math.abs(hash) % 2 === 0 ? 'A' : 'B';
            }

            // Performance Optimization
            function optimizePerformance() {
                // Preload critical resources
                const criticalResources = [
                    '/bias-ml-engine.wasm.js',
                    '/dashboard-api.js'
                ];

                criticalResources.forEach(resource => {
                    const link = document.createElement('link');
                    link.rel = 'preload';
                    link.href = resource;
                    link.as = 'script';
                    document.head.appendChild(link);
                });

                // Optimize images with lazy loading
                const images = document.querySelectorAll('img:not([loading])');
                images.forEach(img => {
                    img.loading = 'lazy';
                });

                // Track Core Web Vitals
                trackCoreWebVitals();
            }

            // Core Web Vitals Tracking
            function trackCoreWebVitals() {
                // First Contentful Paint
                new PerformanceObserver((entryList) => {
                    for (const entry of entryList.getEntries()) {
                        if (entry.name === 'first-contentful-paint') {
                            performanceMetrics.firstContentfulPaint = entry.startTime;
                            trackEvent('performance', 'first_contentful_paint', Math.round(entry.startTime));
                        }
                    }
                }).observe({ entryTypes: ['paint'] });

                // Largest Contentful Paint
                new PerformanceObserver((entryList) => {
                    const entries = entryList.getEntries();
                    const lastEntry = entries[entries.length - 1];
                    performanceMetrics.largestContentfulPaint = lastEntry.startTime;
                    trackEvent('performance', 'largest_contentful_paint', Math.round(lastEntry.startTime));
                }).observe({ entryTypes: ['largest-contentful-paint'] });

                // First Input Delay
                new PerformanceObserver((entryList) => {
                    for (const entry of entryList.getEntries()) {
                        performanceMetrics.firstInputDelay = entry.processingStart - entry.startTime;
                        trackEvent('performance', 'first_input_delay', Math.round(performanceMetrics.firstInputDelay));
                    }
                }).observe({ entryTypes: ['first-input'] });
            }

            // Initialize analytics and performance tracking
            function initAnalytics() {
                trackConversionFunnel('page_view');
                optimizePerformance();

                // Track scroll depth for engagement
                let maxScroll = 0;
                window.addEventListener('scroll', () => {
                    const scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
                    if (scrollPercent > maxScroll) {
                        maxScroll = scrollPercent;
                        if (maxScroll % 25 === 0) { // Track at 25%, 50%, 75%, 100%
                            trackEvent('engagement', 'scroll_depth', maxScroll);
                        }
                    }
                });

                // Track time on page
                let timeOnPage = 0;
                setInterval(() => {
                    timeOnPage += 30;
                    if (timeOnPage % 60 === 0) { // Every 60 seconds
                        trackEvent('engagement', 'time_on_page', timeOnPage);
                    }
                }, 30000);

                // Track exit intent
                document.addEventListener('mouseleave', (e) => {
                    if (e.clientY <= 0) {
                        trackEvent('engagement', 'exit_intent');
                    }
                });
            }

            // Make functions globally available
            window.trackEvent = trackEvent;
            window.trackConversionFunnel = trackConversionFunnel;
            window.performanceMetrics = performanceMetrics;

            // Section View Tracking with Intersection Observer
            function initSectionTracking() {
                const sections = document.querySelectorAll('[id*="section"], .pricing-section, .social-proof-section, .problem-agitation-section, .solution-superiority-section, .trust-security-section');
                
                if ('IntersectionObserver' in window) {
                    const sectionObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
                                const sectionName = entry.target.id || entry.target.className.split(' ')[0] || 'unknown';
                                trackEvent('engagement', 'section_viewed', null, sectionName);
                                
                                // Special tracking for pricing section
                                if (sectionName.includes('pricing')) {
                                    trackConversionFunnel('pricing_viewed', { section: sectionName });
                                }
                                
                                // Justice mission engagement
                                if (entry.target.querySelector('.justice-mission-stats')) {
                                    trackEvent('justice_mission', 'stats_viewed', null, sectionName);
                                }
                            }
                        });
                    }, { threshold: 0.5 });
                    
                    sections.forEach(section => sectionObserver.observe(section));
                }
            }

            // Initialize when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    initAnalytics();
                    initSectionTracking();
                });
            } else {
                initAnalytics();
                initSectionTracking();
            }
        })();
        
        // Service Worker Registration
        async function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                try {
                    const registration = await navigator.serviceWorker.register('/sw.js');
                    console.log(' Service Worker registered:', registration.scope);
                    
                    // Handle updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                showUpdateAvailable();
                            }
                        });
                    });
                    
                    return registration;
                } catch (error) {
                    console.error(' Service Worker registration failed:', error);
                }
            }
        }
        
        // PWA Install Prompt
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log(' PWA install prompt available');
            e.preventDefault();
            deferredPrompt = e;
            showInstallButton();
        });
        
        function showInstallButton() {
            const installBtn = document.createElement('button');
            installBtn.textContent = ' Install App';
            installBtn.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: #1e40af;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 25px;
                cursor: pointer;
                font-weight: 600;
                box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
                z-index: 1000;
                transition: all 0.3s ease;
            `;
            
            installBtn.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log('PWA install outcome:', outcome);
                    deferredPrompt = null;
                    installBtn.remove();
                }
            });
            
            installBtn.addEventListener('mouseenter', () => {
                installBtn.style.background = '#1d4ed8';
                installBtn.style.transform = 'translateY(-2px)';
            });
            
            installBtn.addEventListener('mouseleave', () => {
                installBtn.style.background = '#1e40af';
                installBtn.style.transform = 'translateY(0)';
            });
            
            document.body.appendChild(installBtn);
        }
        
        function showUpdateAvailable() {
            const updateBanner = document.createElement('div');
            updateBanner.innerHTML = `
                <div style="background: #059669; color: white; padding: 12px 20px; text-align: center; position: fixed; top: 0; left: 0; right: 0; z-index: 1001;">
                    <span> New version available! </span>
                    <button onclick="updateApp()" style="background: white; color: #059669; border: none; padding: 4px 12px; border-radius: 4px; margin-left: 8px; cursor: pointer; font-weight: 600;">Update Now</button>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: transparent; color: white; border: 1px solid white; padding: 4px 12px; border-radius: 4px; margin-left: 8px; cursor: pointer;">Later</button>
                </div>
            `;
            document.body.appendChild(updateBanner);
        }
        
        function updateApp() {
            if (navigator.serviceWorker.controller) {
                navigator.serviceWorker.controller.postMessage({ type: 'SKIP_WAITING' });
            }
            window.location.reload();
        }
        
        // Offline/Online Status
        function handleConnectionChange() {
            const status = navigator.onLine ? 'online' : 'offline';
            console.log(' Connection status:', status);
            
            if (!navigator.onLine) {
                showOfflineNotice();
            } else {
                hideOfflineNotice();
            }
        }
        
        function showOfflineNotice() {
            if (document.getElementById('offline-notice')) return;
            
            const notice = document.createElement('div');
            notice.id = 'offline-notice';
            notice.innerHTML = `
                <div style="background: #f59e0b; color: white; padding: 8px 20px; text-align: center; position: fixed; bottom: 0; left: 0; right: 0; z-index: 1001;">
                     You're offline. Some features may be limited.
                </div>
            `;
            document.body.appendChild(notice);
        }
        
        function hideOfflineNotice() {
            const notice = document.getElementById('offline-notice');
            if (notice) notice.remove();
        }
        
        // WCAG 2.2 Accessibility Functions
        function updateDemoStatus(message) {
            const statusElement = document.getElementById('demo-status');
            if (statusElement) {
                statusElement.textContent = message;
            }
        }

        function initAccessibilityFeatures() {
            // Keyboard navigation support
            document.addEventListener('keydown', handleKeyboardNavigation);
            
            // Focus management
            initFocusManagement();
            
            // Screen reader announcements
            initScreenReaderSupport();
            
            // High contrast mode detection
            if (window.matchMedia('(prefers-contrast: high)').matches) {
                document.body.classList.add('high-contrast');
            }
            
            // Reduced motion preference
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.body.classList.add('reduced-motion');
            }
        }

        function handleKeyboardNavigation(event) {
            // Skip link activation
            if (event.key === 'Enter' && event.target.classList.contains('skip-link')) {
                const targetId = event.target.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.focus();
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
            
            // Demo shortcuts
            if (event.target.id === 'demo-input') {
                // Ctrl+Enter to analyze
                if (event.ctrlKey && event.key === 'Enter') {
                    event.preventDefault();
                    const analyzeBtn = document.getElementById('demo-analyze-btn');
                    if (analyzeBtn && !analyzeBtn.disabled) {
                        runDemoAnalysis();
                        updateDemoStatus('Analysis started via keyboard shortcut');
                    }
                }
                
                // Escape to clear
                if (event.key === 'Escape') {
                    clearDemo();
                    updateDemoStatus('Demo cleared via keyboard');
                }
            }
        }

        function initFocusManagement() {
            // Focus indicators for better visibility
            const focusableElements = document.querySelectorAll(
                'a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])'
            );
            
            focusableElements.forEach(element => {
                element.addEventListener('focus', function() {
                    this.setAttribute('data-focus-visible', 'true');
                });
                
                element.addEventListener('blur', function() {
                    this.removeAttribute('data-focus-visible');
                });
            });
        }

        function initScreenReaderSupport() {
            // Announce page changes
            const pageTitle = document.title;
            updateDemoStatus(`Page loaded: ${pageTitle}`);
            
            // Monitor for dynamic content changes
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                        // Announce when results are displayed
                        const resultsContainer = document.getElementById('demo-results');
                        if (resultsContainer && resultsContainer.style.display !== 'none') {
                            updateDemoStatus('Bias analysis results are now available');
                        }
                    }
                });
            });
            
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        }
        
        // PWA Features Implementation
        function initPWAFeatures() {
            // Initialize offline support
            initOfflineSupport();
            
            // Initialize push notifications (if supported and permitted)
            initPushNotifications();
            
            // Initialize file handling for PWA file handlers
            initFileHandling();
            
            // Initialize app install prompt
            initInstallPrompt();
            
            // Initialize share target handling
            initShareTarget();
            
            // Initialize protocol handling
            initProtocolHandling();
        }

        // Offline Support System
        function initOfflineSupport() {
            // Monitor connection status
            function updateConnectionStatus() {
                const isOnline = navigator.onLine;
                document.body.classList.toggle('offline', !isOnline);
                
                // Update UI to show offline status
                const offlineIndicator = document.getElementById('offline-indicator') || createOfflineIndicator();
                offlineIndicator.style.display = isOnline ? 'none' : 'block';
                
                // Show notification when coming back online
                if (isOnline && window.wasOffline) {
                    showOfflineRecoveryNotification();
                    window.wasOffline = false;
                } else if (!isOnline) {
                    window.wasOffline = true;
                }
            }
            
            function createOfflineIndicator() {
                const indicator = document.createElement('div');
                indicator.id = 'offline-indicator';
                indicator.innerHTML = `
                    <div style="position: fixed; top: 0; left: 0; right: 0; background: #f59e0b; color: white; padding: 8px; text-align: center; z-index: 10000; font-size: 14px;">
                         You're offline. Your analysis will be saved and synced when connection returns.
                    </div>
                `;
                document.body.appendChild(indicator);
                return indicator;
            }
            
            function showOfflineRecoveryNotification() {
                if ('serviceWorker' in navigator && 'Notification' in window) {
                    navigator.serviceWorker.ready.then(registration => {
                        registration.showNotification('BiasGuard - Back Online', {
                            body: 'Connection restored. Syncing offline data...',
                            icon: '/favicon.svg',
                            badge: '/favicon.svg',
                            tag: 'connection-restored'
                        });
                    });
                }
            }
            
            window.addEventListener('online', updateConnectionStatus);
            window.addEventListener('offline', updateConnectionStatus);
            updateConnectionStatus();
        }

        // Push Notifications Support
        async function initPushNotifications() {
            if (!('serviceWorker' in navigator) || !('PushManager' in window)) {
                console.log('[PWA] Push notifications not supported');
                return;
            }
            
            try {
                const registration = await navigator.serviceWorker.ready;
                
                // Check if already subscribed
                const existingSubscription = await registration.pushManager.getSubscription();
                
                if (!existingSubscription) {
                    // Add subtle prompt for notifications
                    addNotificationPrompt();
                }
            } catch (error) {
                console.error('[PWA] Push notification init error:', error);
            }
        }
        
        function addNotificationPrompt() {
            // Add a non-intrusive notification prompt
            const promptContainer = document.createElement('div');
            promptContainer.className = 'notification-prompt';
            promptContainer.innerHTML = `
                <div style="position: fixed; bottom: 20px; right: 20px; background: #1e40af; color: white; padding: 16px; border-radius: 12px; max-width: 300px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); z-index: 1000; display: none;" id="notification-prompt">
                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        <span style="font-size: 20px; margin-right: 8px;"></span>
                        <strong style="font-size: 14px;">Stay Updated</strong>
                    </div>
                    <p style="margin: 0 0 12px 0; font-size: 13px; line-height: 1.4;">Get notified when your bias analysis is complete</p>
                    <div style="display: flex; gap: 8px;">
                        <button onclick="enableNotifications()" style="background: white; color: #1e40af; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer; font-weight: 600;">Enable</button>
                        <button onclick="dismissNotificationPrompt()" style="background: transparent; color: white; border: 1px solid rgba(255,255,255,0.3); padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">Later</button>
                    </div>
                </div>
            `;
            document.body.appendChild(promptContainer);
            
            // Show after user interacts with the app
            setTimeout(() => {
                const prompt = document.getElementById('notification-prompt');
                if (prompt && !localStorage.getItem('notifications-dismissed')) {
                    prompt.style.display = 'block';
                }
            }, 10000); // Show after 10 seconds
        }

        // File Handling for PWA
        function initFileHandling() {
            // Handle files shared via Web Share Target API
            const urlParams = new URLSearchParams(window.location.search);
            
            if (urlParams.get('shared') === 'true') {
                showSharedFileNotification();
            }
            
            if (urlParams.get('files')) {
                const fileIds = urlParams.get('files').split(',');
                handleSharedFiles(fileIds);
            }
            
            if (urlParams.get('protocol_data')) {
                const data = decodeURIComponent(urlParams.get('protocol_data'));
                handleProtocolData(data);
            }
        }
        
        function showSharedFileNotification() {
            updateDemoStatus('Files shared successfully! Ready for analysis.');
        }
        
        function handleSharedFiles(fileIds) {
            console.log('[PWA] Handling shared files:', fileIds);
            updateDemoStatus(`Processing ${fileIds.length} shared file${fileIds.length > 1 ? 's' : ''}...`);
        }
        
        function handleProtocolData(data) {
            console.log('[PWA] Handling protocol data:', data);
            const demoInput = document.getElementById('demo-input');
            if (demoInput) {
                demoInput.value = data;
                updateAnalyzeButton();
                updateDemoStatus('Text loaded from external source. Ready to analyze.');
            }
        }

        // App Install Prompt
        function initInstallPrompt() {
            let deferredPrompt;
            
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                showInstallPrompt();
            });
            
            function showInstallPrompt() {
                // Add install button to UI
                const installButton = document.createElement('button');
                installButton.innerHTML = ' Install App';
                installButton.className = 'install-prompt-btn';
                installButton.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #10b981;
                    color: white;
                    border: none;
                    padding: 12px 16px;
                    border-radius: 8px;
                    font-size: 14px;
                    font-weight: 600;
                    cursor: pointer;
                    z-index: 1000;
                    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
                    transition: all 0.2s;
                `;
                
                installButton.addEventListener('click', async () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        const { outcome } = await deferredPrompt.userChoice;
                        console.log('[PWA] Install prompt outcome:', outcome);
                        deferredPrompt = null;
                        installButton.remove();
                    }
                });
                
                document.body.appendChild(installButton);
                
                // Auto-hide after 10 seconds
                setTimeout(() => {
                    if (installButton.parentNode) {
                        installButton.style.opacity = '0';
                        setTimeout(() => installButton.remove(), 300);
                    }
                }, 10000);
            }
        }

        // Share Target Handling
        function initShareTarget() {
            // Handle Web Share API if available
            if (navigator.share) {
                // Add share buttons where appropriate
                addShareButtons();
            }
        }
        
        function addShareButtons() {
            // This would add share functionality to results
            console.log('[PWA] Share API available');
        }

        // Protocol Handling
        function initProtocolHandling() {
            // Register protocol handler if supported
            if ('registerProtocolHandler' in navigator) {
                try {
                    navigator.registerProtocolHandler(
                        'web+biasguard',
                        '/scan?data=%s',
                        'BiasGuard Analysis'
                    );
                } catch (error) {
                    console.log('[PWA] Protocol handler registration not needed:', error.message);
                }
            }
        }

        // Global PWA functions
        window.enableNotifications = async function() {
            try {
                const permission = await Notification.requestPermission();
                
                if (permission === 'granted') {
                    const registration = await navigator.serviceWorker.ready;
                    const subscription = await registration.pushManager.subscribe({
                        userVisibleOnly: true,
                        applicationServerKey: urlBase64ToUint8Array('your-vapid-public-key-here')
                    });
                    
                    console.log('[PWA] Push subscription successful:', subscription);
                    dismissNotificationPrompt();
                    
                    // Show success notification
                    new Notification('BiasGuard Notifications Enabled', {
                        body: 'You\'ll be notified when analysis is complete',
                        icon: '/favicon.svg'
                    });
                }
            } catch (error) {
                console.error('[PWA] Notification enable error:', error);
            }
        };
        
        window.dismissNotificationPrompt = function() {
            const prompt = document.getElementById('notification-prompt');
            if (prompt) {
                prompt.style.display = 'none';
                localStorage.setItem('notifications-dismissed', 'true');
            }
        };
        
        // Utility function for VAPID key conversion
        function urlBase64ToUint8Array(base64String) {
            const padding = '='.repeat((4 - base64String.length % 4) % 4);
            const base64 = (base64String + padding)
                .replace(/-/g, '+')
                .replace(/_/g, '/');
            
            const rawData = window.atob(base64);
            const outputArray = new Uint8Array(rawData.length);
            
            for (let i = 0; i < rawData.length; ++i) {
                outputArray[i] = rawData.charCodeAt(i);
            }
            return outputArray;
        }
        
        // Mobile Navigation System
        function initMobileNavigation() {
            // Initialize navigation state
            window.mobileNavState = {
                isOpen: false,
                isDragging: false,
                startY: 0,
                currentY: 0,
                threshold: 50
            };
            
            // Add navigation gesture support
            initNavigationGestures();
            
            // Add keyboard navigation
            initNavigationKeyboard();
            
            // Add enhanced swipe-back gesture (iOS 26 style)
            initEnhancedSwipeBack();
            
            // Add navigation analytics
            initNavigationAnalytics();
        }
        
        // Navigation Gesture Support
        function initNavigationGestures() {
            const navSheet = document.getElementById('mobile-nav-sheet');
            const navContent = navSheet?.querySelector('.mobile-nav-content');
            const navHandle = navSheet?.querySelector('.mobile-nav-handle');
            
            if (!navSheet || !navContent || !navHandle) return;
            
            // Add drag functionality to handle
            navHandle.addEventListener('touchstart', handleDragStart, { passive: false });
            navHandle.addEventListener('touchmove', handleDragMove, { passive: false });
            navHandle.addEventListener('touchend', handleDragEnd, { passive: false });
            
            // Add swipe gestures to backdrop
            navSheet.addEventListener('touchstart', handleBackdropTouch, { passive: false });
            navSheet.addEventListener('touchmove', handleBackdropMove, { passive: false });
            navSheet.addEventListener('touchend', handleBackdropEnd, { passive: false });
            
            function handleDragStart(e) {
                window.mobileNavState.isDragging = true;
                window.mobileNavState.startY = e.touches[0].clientY;
                navContent.style.transition = 'none';
                triggerHapticFeedback('light', navHandle);
            }
            
            function handleDragMove(e) {
                if (!window.mobileNavState.isDragging) return;
                
                e.preventDefault();
                const currentY = e.touches[0].clientY;
                const deltaY = currentY - window.mobileNavState.startY;
                
                if (deltaY > 0) {
                    const progress = Math.min(deltaY / 200, 1);
                    navContent.style.transform = `translateY(${deltaY}px)`;
                    navSheet.style.opacity = 1 - (progress * 0.5);
                }
            }
            
            function handleDragEnd(e) {
                if (!window.mobileNavState.isDragging) return;
                
                window.mobileNavState.isDragging = false;
                navContent.style.transition = '';
                
                const currentY = e.changedTouches[0].clientY;
                const deltaY = currentY - window.mobileNavState.startY;
                
                if (deltaY > window.mobileNavState.threshold) {
                    closeMobileNavigation();
                    triggerHapticFeedback('medium', navHandle);
                } else {
                    navContent.style.transform = '';
                    navSheet.style.opacity = '';
                    triggerHapticFeedback('light', navHandle);
                }
            }
            
            function handleBackdropTouch(e) {
                if (e.target === navSheet.querySelector('.mobile-nav-backdrop')) {
                    window.mobileNavState.startY = e.touches[0].clientY;
                }
            }
            
            function handleBackdropMove(e) {
                if (e.target === navSheet.querySelector('.mobile-nav-backdrop')) {
                    const deltaY = e.touches[0].clientY - window.mobileNavState.startY;
                    if (deltaY > 20) {
                        e.preventDefault();
                    }
                }
            }
            
            function handleBackdropEnd(e) {
                if (e.target === navSheet.querySelector('.mobile-nav-backdrop')) {
                    const deltaY = e.changedTouches[0].clientY - window.mobileNavState.startY;
                    if (deltaY > window.mobileNavState.threshold) {
                        closeMobileNavigation();
                    }
                }
            }
        }
        
        // Enhanced Swipe-Back Navigation (iOS 26 Style)
        function initEnhancedSwipeBack() {
            let swipeStartX = 0;
            let swipeStartY = 0;
            let isSwipeBack = false;
            
            document.addEventListener('touchstart', (e) => {
                swipeStartX = e.touches[0].clientX;
                swipeStartY = e.touches[0].clientY;
                isSwipeBack = false;
            }, { passive: true });
            
            document.addEventListener('touchmove', (e) => {
                if (isSwipeBack) return;
                
                const currentX = e.touches[0].clientX;
                const currentY = e.touches[0].clientY;
                const deltaX = currentX - swipeStartX;
                const deltaY = Math.abs(currentY - swipeStartY);
                
                // Check for horizontal swipe (iOS 26 style - from anywhere)
                if (deltaX > 50 && deltaY < 30 && !isInteractiveElement(e.target)) {
                    isSwipeBack = true;
                    handleSwipeBackNavigation(deltaX);
                }
            }, { passive: false });
            
            function isInteractiveElement(element) {
                const interactiveElements = ['button', 'a', 'input', 'textarea', 'select'];
                return interactiveElements.includes(element.tagName.toLowerCase()) ||
                       element.hasAttribute('onclick') ||
                       element.classList.contains('mobile-nav-link') ||
                       element.closest('.mobile-nav-sheet');
            }
            
            function handleSwipeBackNavigation(deltaX) {
                // Implement contextual navigation based on current section
                const currentSection = getCurrentSection();
                
                if (currentSection) {
                    // Navigate to previous section or top
                    const targetElement = getPreviousSection(currentSection) || 
                                        document.getElementById('main-content');
                    
                    if (targetElement) {
                        triggerHapticFeedback('medium', targetElement);
                        smoothScrollToElement(targetElement);
                        trackGestureUsage('swipeBack');
                        
                        // Visual feedback
                        showSwipeBackFeedback();
                    }
                }
            }
            
            function getCurrentSection() {
                const sections = ['main-content', 'demo-section', 'pricing-title', 'footer'];
                const scrollY = window.scrollY;
                
                for (const sectionId of sections) {
                    const element = document.getElementById(sectionId);
                    if (element) {
                        const rect = element.getBoundingClientRect();
                        if (rect.top <= 100 && rect.bottom >= 100) {
                            return sectionId;
                        }
                    }
                }
                return null;
            }
            
            function getPreviousSection(currentSection) {
                const sections = ['main-content', 'demo-section', 'pricing-title', 'footer'];
                const currentIndex = sections.indexOf(currentSection);
                return currentIndex > 0 ? document.getElementById(sections[currentIndex - 1]) : null;
            }
            
            function showSwipeBackFeedback() {
                const feedback = document.createElement('div');
                feedback.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 20px;
                    transform: translateY(-50%);
                    background: rgba(30, 64, 175, 0.9);
                    color: white;
                    padding: 8px 12px;
                    border-radius: 20px;
                    font-size: 14px;
                    font-weight: 500;
                    z-index: 10000;
                    pointer-events: none;
                    animation: swipeBackFeedback 0.6s ease-out forwards;
                `;
                feedback.textContent = ' Back';
                document.body.appendChild(feedback);
                
                setTimeout(() => feedback.remove(), 600);
            }
        }
        
        // Navigation Keyboard Support
        function initNavigationKeyboard() {
            document.addEventListener('keydown', (e) => {
                const navSheet = document.getElementById('mobile-nav-sheet');
                
                if (e.key === 'Escape' && window.mobileNavState.isOpen) {
                    e.preventDefault();
                    closeMobileNavigation();
                }
                
                // Tab trapping when navigation is open
                if (window.mobileNavState.isOpen && e.key === 'Tab') {
                    trapFocusInNavigation(e);
                }
                
                // Quick navigation shortcuts
                if (e.altKey || e.metaKey) {
                    switch (e.key) {
                        case 'm':
                            e.preventDefault();
                            toggleMobileNavigation();
                            break;
                        case '1':
                            e.preventDefault();
                            navigateToSection('#main-content');
                            break;
                        case '2':
                            e.preventDefault();
                            navigateToSection('#demo-section');
                            break;
                        case '3':
                            e.preventDefault();
                            navigateToSection('#pricing-title');
                            break;
                    }
                }
            });
        }
        
        function trapFocusInNavigation(e) {
            const navSheet = document.getElementById('mobile-nav-sheet');
            const focusableElements = navSheet.querySelectorAll(
                'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];
            
            if (e.shiftKey) {
                if (document.activeElement === firstElement) {
                    e.preventDefault();
                    lastElement.focus();
                }
            } else {
                if (document.activeElement === lastElement) {
                    e.preventDefault();
                    firstElement.focus();
                }
            }
        }
        
        // Navigation Analytics
        function initNavigationAnalytics() {
            // Track navigation usage patterns
            window.navigationMetrics = {
                openCount: 0,
                gestureCount: 0,
                keyboardCount: 0,
                linkClicks: {},
                averageSessionTime: 0
            };
        }
        
        // Navigation Control Functions
        window.openMobileNavigation = function() {
            const navSheet = document.getElementById('mobile-nav-sheet');
            const trigger = document.querySelector('.mobile-nav-trigger');
            
            if (!navSheet) return;
            
            window.mobileNavState.isOpen = true;
            navSheet.classList.add('active');
            navSheet.setAttribute('aria-hidden', 'false');
            trigger?.classList.add('active');
            trigger?.setAttribute('aria-expanded', 'true');
            
            // Focus management
            setTimeout(() => {
                const firstFocusable = navSheet.querySelector('.mobile-nav-close');
                firstFocusable?.focus();
            }, 300);
            
            // Prevent body scroll
            document.body.style.overflow = 'hidden';
            
            // Analytics
            window.navigationMetrics.openCount++;
            trackGestureUsage('navigationOpen');
            
            // Haptic feedback
            triggerHapticFeedback('light', navSheet);
            
            // Update demo status for screen readers
            updateDemoStatus('Navigation menu opened');
        };
        
        window.closeMobileNavigation = function() {
            const navSheet = document.getElementById('mobile-nav-sheet');
            const trigger = document.querySelector('.mobile-nav-trigger');
            
            if (!navSheet) return;
            
            window.mobileNavState.isOpen = false;
            navSheet.classList.remove('active');
            navSheet.setAttribute('aria-hidden', 'true');
            trigger?.classList.remove('active');
            trigger?.setAttribute('aria-expanded', 'false');
            
            // Restore body scroll
            document.body.style.overflow = '';
            
            // Focus management
            trigger?.focus();
            
            // Analytics
            trackGestureUsage('navigationClose');
            
            // Update demo status for screen readers
            updateDemoStatus('Navigation menu closed');
        };
        
        window.toggleMobileNavigation = function() {
            if (window.mobileNavState.isOpen) {
                closeMobileNavigation();
            } else {
                openMobileNavigation();
            }
        };
        
        window.navigateAndClose = function(target) {
            closeMobileNavigation();
            setTimeout(() => {
                navigateToSection(target);
            }, 300);
            
            // Analytics
            const linkName = target.replace('#', '');
            window.navigationMetrics.linkClicks[linkName] = 
                (window.navigationMetrics.linkClicks[linkName] || 0) + 1;
        };
        
        function navigateToSection(target) {
            const element = document.querySelector(target);
            if (element) {
                smoothScrollToElement(element);
                triggerHapticFeedback('light', element);
            }
        }
        
        function smoothScrollToElement(element) {
            const headerHeight = document.querySelector('.header')?.offsetHeight || 0;
            const targetPosition = element.offsetTop - headerHeight - 20;
            
            window.scrollTo({
                top: targetPosition,
                behavior: 'smooth'
            });
        }
        
        // Helper Functions
        window.scrollToDemo = function() {
            const demoSection = document.getElementById('demo-section');
            if (demoSection) {
                smoothScrollToElement(demoSection);
            }
        };
        
        window.showMobileHelp = function() {
            // Create help modal
            const helpContent = `
                <div style="text-align: left;">
                    <h3 style="margin-top: 0;">Navigation Help</h3>
                    <p><strong>Gestures:</strong></p>
                    <ul style="margin: 0.5rem 0;">
                        <li>Swipe right anywhere  Go back</li>
                        <li>Drag handle down  Close menu</li>
                        <li>Tap backdrop  Close menu</li>
                    </ul>
                    <p><strong>Keyboard:</strong></p>
                    <ul style="margin: 0.5rem 0;">
                        <li>Alt/Cmd + M  Toggle menu</li>
                        <li>Alt/Cmd + 1-3  Quick navigation</li>
                        <li>Escape  Close menu</li>
                    </ul>
                </div>
            `;
            
            showModal('Mobile Navigation Help', helpContent);
            closeMobileNavigation();
        };
        
        function showModal(title, content) {
            // Simple modal implementation
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10001;
                padding: 1rem;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 2rem; border-radius: 1rem; max-width: 400px; width: 100%;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h2 style="margin: 0; font-size: 1.25rem;">${title}</h2>
                        <button onclick="this.closest('[style*=fixed]').remove()" 
                                style="background: #f3f4f6; border: none; width: 32px; height: 32px; border-radius: 50%; cursor: pointer;"></button>
                    </div>
                    ${content}
                </div>
            `;
            
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });
            
            document.body.appendChild(modal);
        }
        
        // Add CSS animation for swipe back feedback
        const swipeBackStyle = document.createElement('style');
        swipeBackStyle.textContent = `
            @keyframes swipeBackFeedback {
                0% {
                    opacity: 0;
                    transform: translateY(-50%) translateX(-20px);
                }
                50% {
                    opacity: 1;
                    transform: translateY(-50%) translateX(0);
                }
                100% {
                    opacity: 0;
                    transform: translateY(-50%) translateX(10px);
                }
            }
        `;
        document.head.appendChild(swipeBackStyle);
        
        // Cross-Device Testing Framework
        function initCrossDeviceTestingFramework() {
            // Initialize device testing system
            window.deviceTestingFramework = new DeviceTestingFramework();
            
            // Auto-run basic validation on load
            if (window.location.hostname === 'localhost' || window.location.search.includes('test=true')) {
                setTimeout(() => {
                    window.deviceTestingFramework.runBasicValidation();
                }, 2000);
            }
            
            // Add keyboard shortcut for manual testing
            document.addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'T') {
                    e.preventDefault();
                    window.deviceTestingFramework.showTestingInterface();
                }
            });
        }
        
        // Device Testing Framework Class
        class DeviceTestingFramework {
            constructor() {
                this.deviceProfiles = this.initializeDeviceProfiles();
                this.testResults = {};
                this.isRunning = false;
                this.testSuite = this.initializeTestSuite();
                this.realTimeMonitoring = true;
                
                // Initialize real-time monitoring
                this.initRealTimeMonitoring();
            }
            
            initializeDeviceProfiles() {
                return {
                    // Mobile Devices (2025 Updated)
                    'iPhone 15 Pro Max': { width: 430, height: 932, dpr: 3, userAgent: 'iPhone15,3', orientation: 'portrait' },
                    'iPhone 15': { width: 393, height: 852, dpr: 3, userAgent: 'iPhone15,4', orientation: 'portrait' },
                    'iPhone SE (3rd gen)': { width: 375, height: 667, dpr: 2, userAgent: 'iPhone14,6', orientation: 'portrait' },
                    'Samsung Galaxy S24 Ultra': { width: 412, height: 915, dpr: 3.5, userAgent: 'SM-S928B', orientation: 'portrait' },
                    'Samsung Galaxy S24': { width: 384, height: 854, dpr: 3, userAgent: 'SM-S921B', orientation: 'portrait' },
                    'Google Pixel 8 Pro': { width: 412, height: 892, dpr: 2.625, userAgent: 'Pixel 8 Pro', orientation: 'portrait' },
                    'Google Pixel 8': { width: 412, height: 915, dpr: 2.625, userAgent: 'Pixel 8', orientation: 'portrait' },
                    'OnePlus 12': { width: 412, height: 919, dpr: 3.5, userAgent: 'CPH2583', orientation: 'portrait' },
                    
                    // Tablets (2025 Updated)
                    'iPad Pro 12.9" (6th gen)': { width: 1024, height: 1366, dpr: 2, userAgent: 'iPad14,5', orientation: 'portrait' },
                    'iPad Pro 11" (4th gen)': { width: 834, height: 1194, dpr: 2, userAgent: 'iPad14,3', orientation: 'portrait' },
                    'iPad Air (5th gen)': { width: 820, height: 1180, dpr: 2, userAgent: 'iPad13,16', orientation: 'portrait' },
                    'iPad (10th gen)': { width: 810, height: 1080, dpr: 2, userAgent: 'iPad13,18', orientation: 'portrait' },
                    'Samsung Galaxy Tab S9 Ultra': { width: 960, height: 1280, dpr: 2.5, userAgent: 'SM-X916B', orientation: 'portrait' },
                    'Surface Pro 9': { width: 880, height: 1368, dpr: 1.5, userAgent: 'Surface Pro 9', orientation: 'portrait' },
                    
                    // Foldable Devices (2025 Focus)
                    'Samsung Galaxy Z Fold 5 (Unfolded)': { width: 768, height: 1812, dpr: 3, userAgent: 'SM-F946B', orientation: 'portrait', foldable: true },
                    'Samsung Galaxy Z Fold 5 (Folded)': { width: 344, height: 882, dpr: 3, userAgent: 'SM-F946B', orientation: 'portrait', foldable: true },
                    'Samsung Galaxy Z Flip 5 (Unfolded)': { width: 412, height: 915, dpr: 2.625, userAgent: 'SM-F731B', orientation: 'portrait', foldable: true },
                    'Samsung Galaxy Z Flip 5 (Folded)': { width: 412, height: 512, dpr: 2.625, userAgent: 'SM-F731B', orientation: 'portrait', foldable: true },
                    'Google Pixel Fold (Unfolded)': { width: 673, height: 841, dpr: 2.625, userAgent: 'Pixel Fold', orientation: 'landscape', foldable: true },
                    'Google Pixel Fold (Folded)': { width: 412, height: 892, dpr: 2.625, userAgent: 'Pixel Fold', orientation: 'portrait', foldable: true },
                    
                    // Desktop Breakpoints
                    'Desktop Small': { width: 1280, height: 720, dpr: 1, userAgent: 'Desktop', orientation: 'landscape' },
                    'Desktop Medium': { width: 1440, height: 900, dpr: 1, userAgent: 'Desktop', orientation: 'landscape' },
                    'Desktop Large': { width: 1920, height: 1080, dpr: 1, userAgent: 'Desktop', orientation: 'landscape' },
                    'Desktop 4K': { width: 3840, height: 2160, dpr: 2, userAgent: 'Desktop', orientation: 'landscape' }
                };
            }
            
            initializeTestSuite() {
                return {
                    viewport: {
                        name: 'Viewport Configuration',
                        tests: [
                            { name: 'Viewport meta tag present', test: () => !!document.querySelector('meta[name="viewport"]') },
                            { name: 'Viewport width=device-width', test: () => document.querySelector('meta[name="viewport"]')?.content.includes('width=device-width') },
                            { name: 'Safe area insets supported', test: () => CSS.supports('padding', 'env(safe-area-inset-top)') },
                            { name: 'Dynamic viewport units supported', test: () => CSS.supports('height', '100dvh') }
                        ]
                    },
                    
                    responsive: {
                        name: 'Responsive Design',
                        tests: [
                            { name: 'Container queries supported', test: () => CSS.supports('container-type', 'inline-size') },
                            { name: 'Fluid typography implemented', test: () => getComputedStyle(document.documentElement).getPropertyValue('--text-base').includes('clamp') },
                            { name: 'Responsive images present', test: () => document.querySelectorAll('picture, img[srcset]').length > 0 },
                            { name: 'Touch targets adequate size', test: () => this.checkTouchTargetSizes() }
                        ]
                    },
                    
                    performance: {
                        name: 'Mobile Performance',
                        tests: [
                            { name: 'Lazy loading implemented', test: () => document.querySelectorAll('[loading="lazy"]').length > 0 },
                            { name: 'Service worker registered', test: () => 'serviceWorker' in navigator && navigator.serviceWorker.controller },
                            { name: 'WebP images supported', test: () => window.webpSupported === true },
                            { name: 'Core Web Vitals monitored', test: () => !!window.coreWebVitalsMonitor }
                        ]
                    },
                    
                    accessibility: {
                        name: 'Accessibility Compliance',
                        tests: [
                            { name: 'Skip links present', test: () => document.querySelectorAll('.skip-link').length > 0 },
                            { name: 'ARIA landmarks used', test: () => document.querySelectorAll('[role="main"], [role="navigation"], [role="banner"]').length >= 3 },
                            { name: 'Focus management implemented', test: () => !!document.querySelector('[tabindex]') },
                            { name: 'Screen reader support', test: () => document.querySelectorAll('.sr-only, [aria-live]').length > 0 }
                        ]
                    },
                    
                    interaction: {
                        name: 'Touch & Gesture Support',
                        tests: [
                            { name: 'Touch gestures implemented', test: () => !!window.initAdvancedTouchGestures },
                            { name: 'Haptic feedback supported', test: () => !!window.triggerHapticFeedback },
                            { name: 'Mobile navigation present', test: () => !!document.querySelector('.mobile-nav-sheet') },
                            { name: 'Keyboard shortcuts available', test: () => !!window.navigationMetrics }
                        ]
                    },
                    
                    pwa: {
                        name: 'PWA Features',
                        tests: [
                            { name: 'Web manifest present', test: () => !!document.querySelector('link[rel="manifest"]') },
                            { name: 'Offline support enabled', test: () => !!window.offlineSupport },
                            { name: 'Install prompt available', test: () => !!window.installPrompt },
                            { name: 'Push notifications supported', test: () => 'Notification' in window && 'PushManager' in window }
                        ]
                    }
                };
            }
            
            initRealTimeMonitoring() {
                // Monitor viewport changes
                window.addEventListener('resize', () => {
                    if (this.realTimeMonitoring) {
                        this.checkCurrentDeviceCompliance();
                    }
                });
                
                // Monitor orientation changes
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => {
                        if (this.realTimeMonitoring) {
                            this.checkCurrentDeviceCompliance();
                        }
                    }, 100);
                });
                
                // Monitor breakpoint changes
                if (window.responsiveBreakpointManager) {
                    window.responsiveBreakpointManager.addBreakpointListener((breakpoint) => {
                        if (this.realTimeMonitoring) {
                            this.validateBreakpointTransition(breakpoint);
                        }
                    });
                }
            }
            
            async runBasicValidation() {
                console.log(' Running Cross-Device Basic Validation...');
                
                const currentDevice = this.detectCurrentDevice();
                console.log(` Current Device: ${currentDevice.name} (${currentDevice.width}x${currentDevice.height})`);
                
                // Run test suite for current device
                const results = await this.runTestSuiteForDevice(currentDevice);
                
                // Log results
                this.logTestResults(results, currentDevice.name);
                
                // Store results
                this.testResults[currentDevice.name] = results;
                
                return results;
            }
            
            async runComprehensiveValidation() {
                console.log(' Running Comprehensive Cross-Device Validation...');
                this.isRunning = true;
                
                const results = {};
                const priorityDevices = [
                    'iPhone 15 Pro Max', 'iPhone 15', 'Samsung Galaxy S24 Ultra',
                    'iPad Pro 11" (4th gen)', 'Samsung Galaxy Z Fold 5 (Unfolded)',
                    'Desktop Medium'
                ];
                
                for (const deviceName of priorityDevices) {
                    console.log(` Testing ${deviceName}...`);
                    const device = this.deviceProfiles[deviceName];
                    
                    // Simulate device viewport
                    this.simulateDevice(device);
                    
                    // Wait for layout stabilization
                    await this.waitForLayoutStabilization();
                    
                    // Run tests
                    results[deviceName] = await this.runTestSuiteForDevice(device);
                    
                    // Restore original viewport
                    this.restoreViewport();
                    
                    // Small delay between tests
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
                
                this.isRunning = false;
                
                // Generate comprehensive report
                this.generateComprehensiveReport(results);
                
                return results;
            }
            
            async runTestSuiteForDevice(device) {
                const results = {};
                
                for (const [category, suite] of Object.entries(this.testSuite)) {
                    results[category] = {
                        name: suite.name,
                        passed: 0,
                        total: suite.tests.length,
                        tests: []
                    };
                    
                    for (const test of suite.tests) {
                        try {
                            const passed = await test.test();
                            results[category].tests.push({
                                name: test.name,
                                passed: passed,
                                error: null
                            });
                            
                            if (passed) results[category].passed++;
                        } catch (error) {
                            results[category].tests.push({
                                name: test.name,
                                passed: false,
                                error: error.message
                            });
                        }
                    }
                }
                
                // Add device-specific tests
                results.deviceSpecific = await this.runDeviceSpecificTests(device);
                
                return results;
            }
            
            async runDeviceSpecificTests(device) {
                const tests = [];
                
                // Test viewport dimensions
                tests.push({
                    name: 'Viewport matches device',
                    passed: Math.abs(window.innerWidth - device.width) < 10,
                    error: null
                });
                
                // Test touch target sizes (mobile only)
                if (device.width <= 768) {
                    const touchTargets = document.querySelectorAll('button, a, input, [onclick]');
                    let adequateTargets = 0;
                    
                    touchTargets.forEach(target => {
                        const rect = target.getBoundingClientRect();
                        if (rect.width >= 44 && rect.height >= 44) {
                            adequateTargets++;
                        }
                    });
                    
                    tests.push({
                        name: 'Touch targets adequate size',
                        passed: adequateTargets / touchTargets.length >= 0.8,
                        error: null
                    });
                }
                
                // Test foldable device support
                if (device.foldable) {
                    tests.push({
                        name: 'Foldable device CSS support',
                        passed: CSS.supports('(screen-spanning: single-fold-vertical)'),
                        error: null
                    });
                }
                
                // Test high DPI support
                if (device.dpr > 2) {
                    tests.push({
                        name: 'High DPI images optimized',
                        passed: document.querySelectorAll('img[srcset], picture source').length > 0,
                        error: null
                    });
                }
                
                return {
                    name: 'Device-Specific Tests',
                    passed: tests.filter(t => t.passed).length,
                    total: tests.length,
                    tests: tests
                };
            }
            
            detectCurrentDevice() {
                const width = window.innerWidth;
                const height = window.innerHeight;
                const dpr = window.devicePixelRatio || 1;
                const userAgent = navigator.userAgent;
                
                // Try to match known devices
                for (const [name, profile] of Object.entries(this.deviceProfiles)) {
                    if (Math.abs(width - profile.width) < 50 && Math.abs(height - profile.height) < 100) {
                        return { name, ...profile };
                    }
                }
                
                // Fallback to generic classification
                if (width <= 480) return { name: 'Mobile Small', width, height, dpr, userAgent };
                if (width <= 768) return { name: 'Mobile Large', width, height, dpr, userAgent };
                if (width <= 1024) return { name: 'Tablet', width, height, dpr, userAgent };
                return { name: 'Desktop', width, height, dpr, userAgent };
            }
            
            simulateDevice(device) {
                // Store original viewport
                this.originalViewport = {
                    width: window.innerWidth,
                    height: window.innerHeight
                };
                
                // This is a simulation - in a real testing environment, 
                // you'd use tools like Puppeteer or Playwright
                console.log(` Simulating ${device.width}x${device.height} @ ${device.dpr}x DPR`);
                
                // Set CSS custom properties for simulation
                document.documentElement.style.setProperty('--simulated-width', `${device.width}px`);
                document.documentElement.style.setProperty('--simulated-height', `${device.height}px`);
                document.documentElement.style.setProperty('--simulated-dpr', device.dpr);
                
                // Trigger resize event for responsive components
                window.dispatchEvent(new Event('resize'));
            }
            
            restoreViewport() {
                if (this.originalViewport) {
                    document.documentElement.style.removeProperty('--simulated-width');
                    document.documentElement.style.removeProperty('--simulated-height');
                    document.documentElement.style.removeProperty('--simulated-dpr');
                    
                    window.dispatchEvent(new Event('resize'));
                }
            }
            
            async waitForLayoutStabilization() {
                return new Promise(resolve => {
                    let stabilizationCount = 0;
                    const checkStability = () => {
                        stabilizationCount++;
                        if (stabilizationCount >= 3) {
                            resolve();
                        } else {
                            requestAnimationFrame(checkStability);
                        }
                    };
                    requestAnimationFrame(checkStability);
                });
            }
            
            checkCurrentDeviceCompliance() {
                const device = this.detectCurrentDevice();
                const issues = [];
                
                // Check common responsive issues
                if (document.body.scrollWidth > window.innerWidth) {
                    issues.push('Horizontal scroll detected');
                }
                
                // Check touch target sizes on mobile
                if (device.width <= 768) {
                    const smallTargets = this.findSmallTouchTargets();
                    if (smallTargets.length > 0) {
                        issues.push(`${smallTargets.length} touch targets too small`);
                    }
                }
                
                // Check text readability
                const textElements = document.querySelectorAll('p, span, div, h1, h2, h3, h4, h5, h6');
                let unreadableText = 0;
                textElements.forEach(el => {
                    const fontSize = parseFloat(getComputedStyle(el).fontSize);
                    if (fontSize < 16 && device.width <= 768) {
                        unreadableText++;
                    }
                });
                
                if (unreadableText > textElements.length * 0.1) {
                    issues.push('Text may be too small on mobile');
                }
                
                // Report issues
                if (issues.length > 0) {
                    console.warn(` Device compliance issues for ${device.name}:`, issues);
                }
                
                return issues;
            }
            
            findSmallTouchTargets() {
                const targets = document.querySelectorAll('button, a, input, [onclick], [tabindex]');
                const smallTargets = [];
                
                targets.forEach(target => {
                    if (target.offsetParent) { // Only check visible elements
                        const rect = target.getBoundingClientRect();
                        if (rect.width < 44 || rect.height < 44) {
                            smallTargets.push(target);
                        }
                    }
                });
                
                return smallTargets;
            }
            
            checkTouchTargetSizes() {
                const smallTargets = this.findSmallTouchTargets();
                const allTargets = document.querySelectorAll('button, a, input, [onclick], [tabindex]');
                return smallTargets.length / allTargets.length < 0.2; // Allow 20% small targets
            }
            
            validateBreakpointTransition(breakpoint) {
                console.log(` Validating breakpoint transition: ${breakpoint}`);
                
                // Check for layout shifts
                setTimeout(() => {
                    const issues = this.checkCurrentDeviceCompliance();
                    if (issues.length === 0) {
                        console.log(` Breakpoint ${breakpoint} validation passed`);
                    }
                }, 100);
            }
            
            logTestResults(results, deviceName) {
                console.log(` Test Results for ${deviceName}:`);
                
                let totalPassed = 0;
                let totalTests = 0;
                
                for (const [category, result] of Object.entries(results)) {
                    console.log(`  ${result.name}: ${result.passed}/${result.total} `);
                    totalPassed += result.passed;
                    totalTests += result.total;
                    
                    // Log failed tests
                    result.tests.forEach(test => {
                        if (!test.passed) {
                            console.warn(`     ${test.name}${test.error ? ': ' + test.error : ''}`);
                        }
                    });
                }
                
                const passRate = Math.round((totalPassed / totalTests) * 100);
                console.log(` Overall Pass Rate: ${passRate}% (${totalPassed}/${totalTests})`);
                
                if (passRate >= 90) {
                    console.log(' Excellent cross-device compatibility!');
                } else if (passRate >= 75) {
                    console.log(' Good cross-device compatibility');
                } else {
                    console.warn(' Cross-device compatibility needs improvement');
                }
            }
            
            generateComprehensiveReport(results) {
                console.log('\n COMPREHENSIVE CROSS-DEVICE TESTING REPORT');
                console.log('='.repeat(50));
                
                const summary = {
                    totalDevices: Object.keys(results).length,
                    passRates: {},
                    commonIssues: {},
                    recommendations: []
                };
                
                // Calculate pass rates per device
                for (const [deviceName, deviceResults] of Object.entries(results)) {
                    let totalPassed = 0;
                    let totalTests = 0;
                    
                    for (const result of Object.values(deviceResults)) {
                        totalPassed += result.passed;
                        totalTests += result.total;
                        
                        // Track common issues
                        result.tests.forEach(test => {
                            if (!test.passed) {
                                summary.commonIssues[test.name] = (summary.commonIssues[test.name] || 0) + 1;
                            }
                        });
                    }
                    
                    summary.passRates[deviceName] = Math.round((totalPassed / totalTests) * 100);
                }
                
                // Generate recommendations
                const mostCommonIssues = Object.entries(summary.commonIssues)
                    .sort(([,a], [,b]) => b - a)
                    .slice(0, 3);
                
                mostCommonIssues.forEach(([issue, count]) => {
                    summary.recommendations.push(`Fix "${issue}" (affects ${count} devices)`);
                });
                
                console.log(` Devices Tested: ${summary.totalDevices}`);
                console.log(` Average Pass Rate: ${Math.round(Object.values(summary.passRates).reduce((a, b) => a + b, 0) / summary.totalDevices)}%`);
                console.log('\n Top Recommendations:');
                summary.recommendations.forEach((rec, i) => {
                    console.log(`  ${i + 1}. ${rec}`);
                });
                
                // Store comprehensive results
                window.crossDeviceTestResults = {
                    timestamp: new Date().toISOString(),
                    summary,
                    detailed: results
                };
                
                return summary;
            }
            
            showTestingInterface() {
                if (document.getElementById('device-testing-interface')) {
                    document.getElementById('device-testing-interface').remove();
                    return;
                }
                
                const interface = document.createElement('div');
                interface.id = 'device-testing-interface';
                interface.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    width: 350px;
                    max-height: 80vh;
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
                    z-index: 10000;
                    overflow: hidden;
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                `;
                
                interface.innerHTML = `
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="margin: 0; font-size: 1.1rem;">Cross-Device Testing</h3>
                            <button onclick="this.closest('#device-testing-interface').remove()" 
                                    style="background: rgba(255,255,255,0.2); border: none; color: white; width: 24px; height: 24px; border-radius: 50%; cursor: pointer;"></button>
                        </div>
                    </div>
                    <div style="padding: 1rem; max-height: 60vh; overflow-y: auto;">
                        <div style="margin-bottom: 1rem;">
                            <button onclick="window.deviceTestingFramework.runBasicValidation()" 
                                    style="width: 100%; background: #4CAF50; color: white; border: none; padding: 0.75rem; border-radius: 6px; cursor: pointer; margin-bottom: 0.5rem;">
                                 Run Basic Validation
                            </button>
                            <button onclick="window.deviceTestingFramework.runComprehensiveValidation()" 
                                    style="width: 100%; background: #2196F3; color: white; border: none; padding: 0.75rem; border-radius: 6px; cursor: pointer; margin-bottom: 0.5rem;">
                                 Run Comprehensive Test
                            </button>
                            <button onclick="window.deviceTestingFramework.toggleRealTimeMonitoring()" 
                                    style="width: 100%; background: #FF9800; color: white; border: none; padding: 0.75rem; border-radius: 6px; cursor: pointer;">
                                 Toggle Real-time Monitoring
                            </button>
                        </div>
                        <div id="device-info" style="background: #f5f5f5; padding: 0.75rem; border-radius: 6px; margin-bottom: 1rem; font-size: 0.9rem;">
                            <strong>Current Device:</strong><br>
                            <span id="current-device-info">Loading...</span>
                        </div>
                        <div id="test-results" style="font-size: 0.9rem;">
                            <div style="color: #666;">Click a test button to see results</div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(interface);
                
                // Update current device info
                const currentDevice = this.detectCurrentDevice();
                document.getElementById('current-device-info').textContent = 
                    `${currentDevice.name} (${currentDevice.width}${currentDevice.height})`;
                
                // Make interface draggable
                this.makeDraggable(interface);
            }
            
            makeDraggable(element) {
                let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
                const header = element.querySelector('div');
                
                header.style.cursor = 'move';
                header.onmousedown = dragMouseDown;
                
                function dragMouseDown(e) {
                    e = e || window.event;
                    e.preventDefault();
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    document.onmouseup = closeDragElement;
                    document.onmousemove = elementDrag;
                }
                
                function elementDrag(e) {
                    e = e || window.event;
                    e.preventDefault();
                    pos1 = pos3 - e.clientX;
                    pos2 = pos4 - e.clientY;
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    element.style.top = (element.offsetTop - pos2) + "px";
                    element.style.left = (element.offsetLeft - pos1) + "px";
                    element.style.right = 'auto';
                }
                
                function closeDragElement() {
                    document.onmouseup = null;
                    document.onmousemove = null;
                }
            }
            
            toggleRealTimeMonitoring() {
                this.realTimeMonitoring = !this.realTimeMonitoring;
                console.log(` Real-time monitoring: ${this.realTimeMonitoring ? 'ON' : 'OFF'}`);
                
                if (this.realTimeMonitoring) {
                    this.checkCurrentDeviceCompliance();
                }
            }
        }
        
        // Mobile Bias Detection UX Enhancement System
        function initMobileBiasDetectionUX() {
            // Initialize mobile-specific UX enhancements
            window.mobileBiasUX = {
                isTyping: false,
                typingTimeout: null,
                lastInputTime: 0,
                suggestions: [],
                shortcuts: {
                    analyze: 'Ctrl+Enter',
                    clear: 'Escape',
                    paste: 'Ctrl+V',
                    undo: 'Ctrl+Z'
                }
            };
            
            // Initialize mobile text suggestions
            initMobileTextSuggestions();
            
            // Initialize mobile keyboard shortcuts help
            initMobileShortcutsHelp();
            
            // Initialize mobile results optimization
            initMobileResultsDisplay();
            
            // Add mobile-specific event listeners
            document.addEventListener('visibilitychange', handleMobileVisibilityChange);
            window.addEventListener('orientationchange', handleMobileOrientationChange);
        }
        
        // Mobile Textarea Event Handlers
        function handleMobileTextareaFocus(textarea) {
            // Enhanced focus handling for mobile
            textarea.classList.add('mobile-focused');
            textarea.style.borderColor = '#059669';
            textarea.style.boxShadow = '0 0 0 3px rgba(5, 150, 105, 0.15)';
            textarea.style.backgroundColor = '#f0fdf4';
            
            // Prevent iOS zoom
            if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                textarea.style.fontSize = '16px';
            }
            
            // Update demo status for screen readers
            updateDemoStatus('Text input focused - ready for typing');
            
            // Show mobile shortcuts help after a delay
            setTimeout(() => {
                showMobileShortcutsHelp();
            }, 2000);
            
            // Haptic feedback
            triggerHapticFeedback('light', textarea);
            
            // Track focus analytics
            trackGestureUsage('textareaFocus');
        }
        
        function handleMobileTextareaBlur(textarea) {
            // Remove mobile focus styling
            textarea.classList.remove('mobile-focused', 'typing');
            textarea.style.borderColor = '#e5e7eb';
            textarea.style.boxShadow = 'none';
            textarea.style.backgroundColor = '#ffffff';
            
            // Clear typing indicators
            if (window.mobileBiasUX.typingTimeout) {
                clearTimeout(window.mobileBiasUX.typingTimeout);
            }
            window.mobileBiasUX.isTyping = false;
            
            // Hide shortcuts help
            hideMobileShortcutsHelp();
            
            // Update demo status
            updateDemoStatus('Text input ready');
        }
        
        function handleMobileTextareaInput(textarea) {
            // Handle mobile-optimized input
            const currentTime = Date.now();
            window.mobileBiasUX.lastInputTime = currentTime;
            
            // Add typing indicator
            textarea.classList.add('typing');
            window.mobileBiasUX.isTyping = true;
            
            // Auto-resize textarea
            textarea.style.height = 'auto';
            textarea.style.height = Math.max(150, textarea.scrollHeight) + 'px';
            
            // Update analyze button
            updateAnalyzeButton();
            
            // Clear previous typing timeout
            if (window.mobileBiasUX.typingTimeout) {
                clearTimeout(window.mobileBiasUX.typingTimeout);
            }
            
            // Set new typing timeout
            window.mobileBiasUX.typingTimeout = setTimeout(() => {
                textarea.classList.remove('typing');
                window.mobileBiasUX.isTyping = false;
                
                // Generate mobile suggestions if text is substantial
                if (textarea.value.length > 50) {
                    generateMobileTextSuggestions(textarea.value);
                }
            }, 1000);
            
            // Update demo status
            updateDemoStatus(`Text updated - ${textarea.value.length} characters`);
            
            // Track typing analytics
            if (textarea.value.length % 50 === 0 && textarea.value.length > 0) {
                trackGestureUsage('textareaTyping');
            }
        }
        
        function handleMobileTextareaTouch(textarea) {
            // Handle touch-specific interactions
            triggerHapticFeedback('light', textarea);
            
            // Ensure proper focus on touch
            setTimeout(() => {
                if (!textarea.matches(':focus')) {
                    textarea.focus();
                }
            }, 50);
        }
        
        function handleMobileTextareaPaste(event) {
            // Handle paste events with mobile optimization
            const textarea = event.target;
            
            setTimeout(() => {
                // Auto-resize after paste
                textarea.style.height = 'auto';
                textarea.style.height = Math.max(150, textarea.scrollHeight) + 'px';
                
                // Update analyze button
                updateAnalyzeButton();
                
                // Generate suggestions for pasted content
                if (textarea.value.length > 30) {
                    generateMobileTextSuggestions(textarea.value);
                }
                
                // Haptic feedback for successful paste
                triggerHapticFeedback('medium', textarea);
                
                // Update demo status
                updateDemoStatus(`Content pasted - ${textarea.value.length} characters`);
                
                // Track paste analytics
                trackGestureUsage('textareaPaste');
            }, 10);
        }
        
        function handleMobileTextareaKeydown(event) {
            // Handle mobile-optimized keyboard shortcuts
            const textarea = event.target;
            
            // Ctrl+Enter or Cmd+Enter to analyze
            if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {
                event.preventDefault();
                if (textarea.value.trim()) {
                    runDemoAnalysis();
                    triggerHapticFeedback('medium', textarea);
                    trackGestureUsage('keyboardAnalyze');
                }
                return;
            }
            
            // Escape to clear
            if (event.key === 'Escape') {
                event.preventDefault();
                clearDemo();
                triggerHapticFeedback('light', textarea);
                trackGestureUsage('keyboardClear');
                return;
            }
            
            // Tab to navigate to analyze button
            if (event.key === 'Tab' && !event.shiftKey) {
                const analyzeBtn = document.getElementById('demo-analyze-btn');
                if (analyzeBtn && !analyzeBtn.disabled) {
                    event.preventDefault();
                    analyzeBtn.focus();
                    return;
                }
            }
        }
        
        // Mobile Text Suggestions System
        function initMobileTextSuggestions() {
            window.mobileBiasUX.suggestions = [
                "The hiring manager prefers candidates with strong technical skills.",
                "Our team values diverse perspectives and inclusive collaboration.",
                "The research shows interesting patterns across different demographics.",
                "We're looking for qualified professionals to join our organization.",
                "The data indicates varying performance levels among participants."
            ];
        }
        
        function generateMobileTextSuggestions(text) {
            // Analyze text and generate contextual suggestions
            const wordCount = text.split(/\s+/).length;
            const hasQuestionableContent = /\b(all|every|always|never|typical|natural)\b/i.test(text);
            
            if (wordCount < 10) {
                showMobileSuggestion("Try adding more context to get a more accurate bias analysis.");
            } else if (hasQuestionableContent) {
                showMobileSuggestion("Consider reviewing absolute statements - they may indicate potential bias.");
            } else if (wordCount > 100) {
                showMobileSuggestion("Great! Longer text provides more context for accurate bias detection.");
            }
        }
        
        function showMobileSuggestion(suggestion) {
            // Display contextual suggestion to user
            const existingSuggestion = document.querySelector('.mobile-current-suggestion');
            if (existingSuggestion) {
                existingSuggestion.remove();
            }
            
            const suggestionEl = document.createElement('div');
            suggestionEl.className = 'mobile-current-suggestion';
            suggestionEl.style.cssText = `
                background: #fffbeb;
                border: 1px solid #fbbf24;
                border-radius: 0.5rem;
                padding: 0.75rem;
                margin-top: 0.5rem;
                font-size: 0.9rem;
                color: #92400e;
                animation: slideDown 0.3s ease-out;
            `;
            suggestionEl.innerHTML = `
                <div style="display: flex; align-items: start; gap: 0.5rem;">
                    <span style="font-size: 1rem;"></span>
                    <span style="flex: 1; line-height: 1.4;">${suggestion}</span>
                    <button onclick="this.closest('.mobile-current-suggestion').remove()" 
                            style="background: none; border: none; color: #92400e; cursor: pointer; padding: 0;"></button>
                </div>
            `;
            
            const textarea = document.getElementById('demo-input');
            textarea.parentNode.insertBefore(suggestionEl, textarea.nextSibling);
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                if (suggestionEl.parentNode) {
                    suggestionEl.remove();
                }
            }, 10000);
        }
        
        // Mobile Keyboard Shortcuts Help
        function initMobileShortcutsHelp() {
            // Create shortcuts help element
            const helpEl = document.createElement('div');
            helpEl.id = 'mobile-shortcuts-help';
            helpEl.className = 'mobile-shortcuts-help';
            helpEl.innerHTML = `
                <div style="font-weight: 600; margin-bottom: 0.5rem;"> Quick Actions</div>
                <div style="display: flex; flex-direction: column; gap: 0.25rem;">
                    <div>Ctrl+Enter: Analyze text</div>
                    <div>Escape: Clear all</div>
                    <div>Tab: Navigate</div>
                </div>
            `;
            document.body.appendChild(helpEl);
        }
        
        function showMobileShortcutsHelp() {
            const helpEl = document.getElementById('mobile-shortcuts-help');
            if (helpEl) {
                helpEl.classList.add('visible');
                
                // Auto-hide after 5 seconds
                setTimeout(() => {
                    hideMobileShortcutsHelp();
                }, 5000);
            }
        }
        
        function hideMobileShortcutsHelp() {
            const helpEl = document.getElementById('mobile-shortcuts-help');
            if (helpEl) {
                helpEl.classList.remove('visible');
            }
        }
        
        // Mobile Results Display Enhancement
        function initMobileResultsDisplay() {
            // Override the original results display for mobile optimization
            const originalShowResults = window.showResults || function() {};
            
            window.showResults = function(results) {
                if (window.innerWidth <= 768) {
                    showMobileOptimizedResults(results);
                } else {
                    originalShowResults(results);
                }
            };
        }
        
        function showMobileOptimizedResults(results) {
            const resultsContainer = document.getElementById('results') || createMobileResultsContainer();
            
            // Determine bias level
            const score = results.biasScore || 0;
            let biasLevel, biasClass, biasIcon, biasDescription;
            
            if (score >= 70) {
                biasLevel = 'High Bias Detected';
                biasClass = 'high-bias';
                biasIcon = '';
                biasDescription = 'Significant bias patterns found. Review and revise recommended.';
            } else if (score >= 40) {
                biasLevel = 'Moderate Bias';
                biasClass = 'medium-bias';
                biasIcon = '';
                biasDescription = 'Some bias indicators detected. Consider reviewing language.';
            } else {
                biasLevel = 'Low Bias';
                biasClass = 'low-bias';
                biasIcon = '';
                biasDescription = 'Minimal bias detected. Text appears relatively neutral.';
            }
            
            resultsContainer.innerHTML = `
                <div class="mobile-results-container">
                    <div class="mobile-results-header">
                        <h3 class="mobile-results-title">Analysis Complete</h3>
                        <div class="mobile-results-score">${score}%</div>
                    </div>
                    <div class="mobile-results-content">
                        <div class="mobile-bias-indicator ${biasClass}">
                            <div class="mobile-bias-icon">${biasIcon}</div>
                            <div class="mobile-bias-text">
                                <div class="mobile-bias-level">${biasLevel}</div>
                                <div class="mobile-bias-description">${biasDescription}</div>
                            </div>
                        </div>
                        
                        ${results.details ? `
                            <div style="background: #f8fafc; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                                <div style="font-weight: 600; font-size: 0.9rem; margin-bottom: 0.5rem;">Analysis Details:</div>
                                <div style="font-size: 0.85rem; color: #6b7280; line-height: 1.4;">${results.details}</div>
                            </div>
                        ` : ''}
                        
                        <div class="mobile-actions">
                            <button class="mobile-action-btn primary" onclick="runDemoAnalysis()">
                                <span></span> Reanalyze
                            </button>
                            <button class="mobile-action-btn" onclick="clearDemo()">
                                <span></span> Clear
                            </button>
                            <button class="mobile-action-btn" onclick="shareMobileResults()">
                                <span></span> Share
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Scroll results into view with mobile optimization
            setTimeout(() => {
                resultsContainer.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'nearest',
                    inline: 'nearest'
                });
                
                // Haptic feedback for results
                triggerHapticFeedback('medium', resultsContainer);
                
                // Update demo status
                updateDemoStatus(`Analysis complete - ${biasLevel.toLowerCase()}`);
            }, 100);
        }
        
        function createMobileResultsContainer() {
            const container = document.createElement('div');
            container.id = 'results';
            container.style.cssText = 'margin-top: 1.5rem;';
            
            const demoSection = document.getElementById('demo-section');
            if (demoSection) {
                demoSection.appendChild(container);
            }
            
            return container;
        }
        
        // Mobile-specific helper functions
        function handleMobileVisibilityChange() {
            if (document.hidden) {
                // Page is hidden, pause any ongoing analysis
                if (window.mobileBiasUX.isTyping) {
                    const textarea = document.getElementById('demo-input');
                    if (textarea) {
                        textarea.classList.remove('typing');
                    }
                }
                hideMobileShortcutsHelp();
            }
        }
        
        function handleMobileOrientationChange() {
            // Handle orientation changes for mobile UX
            setTimeout(() => {
                const textarea = document.getElementById('demo-input');
                if (textarea && textarea.matches(':focus')) {
                    // Ensure proper sizing after orientation change
                    textarea.style.height = 'auto';
                    textarea.style.height = Math.max(150, textarea.scrollHeight) + 'px';
                }
                
                // Update shortcuts help position
                const helpEl = document.getElementById('mobile-shortcuts-help');
                if (helpEl && helpEl.classList.contains('visible')) {
                    // Briefly hide and show to reposition
                    helpEl.classList.remove('visible');
                    setTimeout(() => {
                        helpEl.classList.add('visible');
                    }, 100);
                }
            }, 300);
        }
        
        function shareMobileResults() {
            // Mobile-optimized sharing
            const textarea = document.getElementById('demo-input');
            const text = textarea ? textarea.value : '';
            
            if (navigator.share && text) {
                navigator.share({
                    title: 'BiasGuard Analysis Results',
                    text: `I analyzed this text for bias: "${text.substring(0, 100)}${text.length > 100 ? '...' : ''}"`,
                    url: window.location.href
                }).then(() => {
                    updateDemoStatus('Results shared successfully');
                    trackGestureUsage('mobileShare');
                }).catch(() => {
                    // Fallback to clipboard
                    copyToClipboard(text);
                });
            } else {
                // Fallback to clipboard
                copyToClipboard(text);
            }
        }
        
        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    updateDemoStatus('Text copied to clipboard');
                    triggerHapticFeedback('light');
                });
            }
        }
        
        // Initialize all optimizations
        function initOptimizations() {
            detectImageSupport();
            initLazyLoading();
            measureCoreWebVitals();
            registerServiceWorker();
            initPerformanceDashboard();
            initMobileOptimizations(); // Initialize responsive breakpoint system
            initAccessibilityFeatures(); // Initialize WCAG 2.2 accessibility
            initPWAFeatures(); // Initialize PWA features
            initMobileNavigation(); // Initialize mobile navigation system
            initCrossDeviceTestingFramework(); // Initialize cross-device testing
            initMobileBiasDetectionUX(); // Initialize mobile bias detection UX
            
            // Connection monitoring
            window.addEventListener('online', handleConnectionChange);
            window.addEventListener('offline', handleConnectionChange);
            handleConnectionChange(); // Check initial state
        }

        // Enhanced Performance Dashboard Integration
        function initPerformanceDashboard() {
            // Create performance metrics display (development only)
            if (window.location.hostname === 'localhost') {
                const dashboard = document.createElement('div');
                dashboard.id = 'performance-dashboard';
                dashboard.style.cssText = `
                    position: fixed;
                    top: 10px;
                    right: 10px;
                    background: rgba(0,0,0,0.9);
                    color: white;
                    padding: 12px;
                    border-radius: 8px;
                    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
                    font-size: 11px;
                    z-index: 10000;
                    max-width: 280px;
                    display: none;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                    border: 1px solid rgba(255,255,255,0.1);
                `;
                
                document.body.appendChild(dashboard);
                
                // Toggle dashboard with Ctrl+Shift+P
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.shiftKey && e.key === 'P') {
                        dashboard.style.display = dashboard.style.display === 'none' ? 'block' : 'none';
                        if (dashboard.style.display === 'block') {
                            updateDashboard();
                        }
                    }
                });
                
                function updateDashboard() {
                    const metrics = window.coreWebVitalsMonitor?.getReport() || {};
                    const lazyMetrics = window.advancedLazyLoader?.getMetrics() || {};
                    const connection = navigator.connection;
                    const breakpoints = window.responsiveBreakpoints;
                    
                    dashboard.innerHTML = `
                        <div style="color: #00d4aa; font-weight: bold; margin-bottom: 8px;"> Performance Dashboard</div>
                        <div style="margin-bottom: 6px;"><strong style="color: #ffd700;">Core Web Vitals:</strong></div>
                        <div>LCP: <span style="color: ${getLCPColor(metrics.LCP?.latest)}">${metrics.LCP?.latest?.toFixed(0) || 'N/A'}ms</span></div>
                        <div>INP: <span style="color: ${getINPColor(metrics.INP?.latest)}">${metrics.INP?.latest?.toFixed(0) || 'N/A'}ms</span></div>
                        <div>CLS: <span style="color: ${getCLSColor(metrics.CLS?.latest)}">${metrics.CLS?.latest?.toFixed(3) || 'N/A'}</span></div>
                        <div style="margin: 6px 0;"><strong style="color: #ffd700;">Responsive:</strong></div>
                        <div>Breakpoint: <span style="color: #00d4aa;">${breakpoints?.currentBreakpoint?.toUpperCase() || 'N/A'}</span></div>
                        <div>Viewport: ${window.innerWidth}${window.innerHeight}</div>
                        <div>Device: ${breakpoints?.isMobile() ? 'Mobile' : breakpoints?.isTablet() ? 'Tablet' : 'Desktop'}</div>
                        <div style="margin: 6px 0;"><strong style="color: #ffd700;">Image Loading:</strong></div>
                        <div>Total: ${lazyMetrics.totalImages || 0} | Loaded: ${lazyMetrics.loadedImages || 0}</div>
                        <div>Avg: ${lazyMetrics.avgLoadTime?.toFixed(0) || 0}ms | Saved: ${Math.round((lazyMetrics.savedBandwidth || 0) / 1024)}KB</div>
                        <div style="margin: 6px 0;"><strong style="color: #ffd700;">Connection:</strong></div>
                        <div>${connection?.effectiveType?.toUpperCase() || 'Unknown'} (${connection?.downlink?.toFixed(1) || 'N/A'} Mbps)</div>
                        <div>RTT: ${connection?.rtt || 'N/A'}ms | Save Data: ${connection?.saveData ? 'ON' : 'OFF'}</div>
                        <div style="margin-top: 8px; color: #888; font-size: 10px;"><em>Ctrl+Shift+P to toggle</em></div>
                    `;
                }
                
                function getLCPColor(value) {
                    if (!value) return '#888';
                    if (value <= 2500) return '#00d4aa';
                    if (value <= 4000) return '#ffd700';
                    return '#ff6b6b';
                }
                
                function getINPColor(value) {
                    if (!value) return '#888';
                    if (value <= 200) return '#00d4aa';
                    if (value <= 500) return '#ffd700';
                    return '#ff6b6b';
                }
                
                function getCLSColor(value) {
                    if (!value) return '#888';
                    if (value <= 0.1) return '#00d4aa';
                    if (value <= 0.25) return '#ffd700';
                    return '#ff6b6b';
                }
                
                // Update dashboard every 2 seconds when visible
                setInterval(() => {
                    if (dashboard.style.display === 'block') {
                        updateDashboard();
                    }
                }, 2000);
            }
        }
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initOptimizations);
        } else {
            initOptimizations();
        }
        
        // Make updateApp globally available
        window.updateApp = updateApp;
        
        // Enhanced Core Web Vitals monitoring with 2025 metrics
        function initAdvancedCWVMonitoring() {
            // Import web-vitals dynamically for better performance
            import('https://unpkg.com/web-vitals@3/dist/web-vitals.js').then(({ onCLS, onINP, onLCP, onFCP, onTTFB }) => {
                const sendToAnalytics = ({ name, delta, value, id, rating }) => {
                    // Send to analytics with enhanced data
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'web_vitals', {
                            event_category: 'Web Vitals',
                            event_label: name,
                            value: Math.round(name === 'CLS' ? value * 1000 : value),
                            custom_parameter_1: rating,
                            custom_parameter_2: id
                        });
                    }
                    
                    // Console logging for development
                    console.log(` ${name}: ${value} (${rating})`, { delta, id });
                };
                
                // Monitor all Core Web Vitals
                onCLS(sendToAnalytics);
                onINP(sendToAnalytics);
                onLCP(sendToAnalytics);
                onFCP(sendToAnalytics);
                onTTFB(sendToAnalytics);
            }).catch(err => console.log('Web Vitals library not available:', err));
        }
        
        // Initialize advanced monitoring
        if (document.readyState === 'complete') {
            initAdvancedCWVMonitoring();
        } else {
            window.addEventListener('load', initAdvancedCWVMonitoring);
        }
        
        // Load Advanced WebAssembly ML Engine
        let BiasMLEngine;
        let mlEngine;
        let codeBiasEngine;
        let unifiedPatternEngine;
        let counterfactualAnalysisEngine;
        let neuralHowlroundPrevention;
        let stripeHandler;
        
        // Initialize Advanced AI Bias Detection Engine
        async function initializeAdvancedMLEngine() {
            try {
                console.log(' Loading Advanced WebAssembly ML Engine and Code Bias Detection...');
                
                // Load the WebAssembly ML engine (try multiple paths)
                let engineCode;
                try {
                    const response = await fetch('/bias-ml-engine.wasm.js');
                    if (response.ok) {
                        engineCode = await response.text();
                    } else {
                        throw new Error('File not found at root');
                    }
                } catch (error) {
                    console.log(' Trying alternative path for ML engine...');
                    try {
                        const response = await fetch('./bias-ml-engine.wasm.js');
                        engineCode = await response.text();
                    } catch (fallbackError) {
                        console.warn(' Could not load external ML engine, using embedded version');
                        // Use embedded engine code as fallback
                        engineCode = getEmbeddedMLEngine();
                    }
                }
                
                // Execute the engine code safely
                try {
                    eval(engineCode);
                } catch (evalError) {
                    console.error(' Failed to execute ML engine code:', evalError);
                    throw evalError;
                }
                
                // Initialize the engine
                BiasMLEngine = window.BiasMLEngine;
                mlEngine = new BiasMLEngine();
                
                // Initialize the ML engine
                const initialized = await mlEngine.initialize();
                if (initialized) {
                    console.log(' Advanced ML Engine ready for JAHmere Webb Freedom Portal');
                    
                    // Initialize Unified Pattern Engine (Step 1 of ML System Improvement)
                    try {
                        const unifiedEngineResponse = await fetch('/unified-pattern-engine.js');
                        if (unifiedEngineResponse.ok) {
                            const unifiedEngineCode = await unifiedEngineResponse.text();
                            eval(unifiedEngineCode);
                            unifiedPatternEngine = new UnifiedPatternEngine();
                            console.log(' Unified Pattern Engine ready - Multi-layer detection active');
                            
                            // Run validation tests
                            await unifiedPatternEngine.runValidationTests();
                        }
                    } catch (unifiedError) {
                        console.warn(' Unified Pattern Engine failed to load:', unifiedError.message);
                    }
                    
                    // Initialize Counterfactual Analysis Engine (Step 3 of ML System Improvement)
                    try {
                        const counterfactualEngineResponse = await fetch('/counterfactual-analysis-engine.js');
                        if (counterfactualEngineResponse.ok) {
                            const counterfactualEngineCode = await counterfactualEngineResponse.text();
                            eval(counterfactualEngineCode);
                            counterfactualAnalysisEngine = new CounterfactualAnalysisEngine();
                            console.log(' Counterfactual Analysis Engine ready - Intersectional bias detection active');
                        }
                    } catch (counterfactualError) {
                        console.warn(' Counterfactual Analysis Engine failed to load:', counterfactualError.message);
                    }
                    
                    // Initialize Neural Howlround Prevention (Step 4 of ML System Improvement)
                    try {
                        const neuralHowlroundResponse = await fetch('/neural-howlround-prevention.js');
                        if (neuralHowlroundResponse.ok) {
                            const neuralHowlroundCode = await neuralHowlroundResponse.text();
                            eval(neuralHowlroundCode);
                            neuralHowlroundPrevention = new NeuralHowlroundPrevention();
                            console.log(' Neural Howlround Prevention ready - Real-time bias attenuation active');
                            
                            // Run validation tests
                            await neuralHowlroundPrevention.runValidationTests();
                        }
                    } catch (neuralError) {
                        console.warn(' Neural Howlround Prevention failed to load:', neuralError.message);
                    }
                    
                    // Initialize Stripe Subscription Handler
                    try {
                        const stripeResponse = await fetch('/stripe-subscription-handler.js');
                        if (stripeResponse.ok) {
                            const stripeCode = await stripeResponse.text();
                            eval(stripeCode);
                            stripeHandler = new StripeSubscriptionHandler();
                            await stripeHandler.initialize();
                            console.log(' Stripe Subscription Handler ready - Monetization active');
                        }
                    } catch (stripeError) {
                        console.warn(' Stripe Subscription Handler failed to load:', stripeError.message);
                    }
                    
                    // Initialize Code Bias Detection Engine
                    try {
                        const codeEngineResponse = await fetch('/code-bias-detection-engine.js');
                        if (codeEngineResponse.ok) {
                            const codeEngineCode = await codeEngineResponse.text();
                            eval(codeEngineCode);
                            codeBiasEngine = new CodeBiasDetectionEngine();
                            console.log(' Code Bias Detection Engine ready');
                            
                            // Update UI status indicator
                            const codeStatus = document.getElementById('code-engine-status');
                            if (codeStatus) {
                                codeStatus.textContent = ' Ready';
                                codeStatus.style.color = '#059669';
                            }
                        } else {
                            throw new Error('Failed to fetch code engine');
                        }
                    } catch (codeError) {
                        console.warn(' Code Bias Engine failed to load:', codeError.message);
                        
                        // Update UI status indicator
                        const codeStatus = document.getElementById('code-engine-status');
                        if (codeStatus) {
                            codeStatus.textContent = ' Unavailable';
                            codeStatus.style.color = '#dc2626';
                        }
                        
                        // Disable code mode button
                        const codeBtn = document.getElementById('code-mode-btn');
                        if (codeBtn) {
                            codeBtn.style.opacity = '0.6';
                            codeBtn.style.cursor = 'not-allowed';
                            codeBtn.title = 'Code analysis engine failed to load';
                        }
                    }
                    
                    // Update UI to show advanced features are available
                    const scanBtn = document.getElementById('scan-btn');
                    if (scanBtn) {
                        scanBtn.innerHTML = ' AI Scan for Bias';
                        scanBtn.title = 'Advanced WebAssembly ML-powered bias detection';
                    }
                } else {
                    console.warn(' ML Engine initialization failed, falling back to basic detection');
                    initializeFallbackEngine();
                }
            } catch (error) {
                console.error(' Failed to load Advanced ML Engine:', error);
                console.log(' Falling back to basic bias detection');
                initializeFallbackEngine();
            }
        }
        
        // Embedded ML Engine for when external file fails to load
        function getEmbeddedMLEngine() {
            return `
                // Embedded BiasMLEngine - Simplified Version
                class BiasMLEngine {
                    constructor() {
                        this.isInitialized = false;
                        this.patterns = {
                            criminalJustice: {
                                keywords: ['criminal history', 'arrest record', 'conviction', 'felony', 'misdemeanor', 'probation', 'parole'],
                                severity: 'critical',
                                description: 'Criminal justice bias - high impact on freedom and justice',
                                color: '#dc2626',
                                icon: '',
                                mlWeight: 0.95
                            },
                            demographic: {
                                // Enhanced multi-layer detection
                                abstractKeywords: ['age', 'gender', 'race', 'ethnicity', 'religion', 'nationality', 'sexual orientation'],
                                specificIdentifiers: [
                                    'white people', 'black people', 'hispanic people', 'asian people', 'men', 'women', 'males', 'females',
                                    'muslims', 'christians', 'jews', 'immigrants', 'foreigners', 'gay people', 'lesbian people'
                                ],
                                negativeTerms: ['suck', 'sucks', 'terrible', 'awful', 'inferior', 'worthless', 'stupid', 'bad', 'worse'],
                                severity: 'critical',
                                description: 'Demographic bias detected with enhanced pattern matching',
                                color: '#dc2626',
                                icon: '',
                                mlWeight: 0.95
                            },
                            socioeconomic: {
                                keywords: ['income', 'salary', 'education', 'zip code', 'neighborhood', 'credit score'],
                                severity: 'medium',
                                description: 'Socioeconomic factors may introduce bias',
                                color: '#f59e0b',
                                icon: '',
                                mlWeight: 0.80
                            }
                        };
                    }
                    
                    async initialize() {
                        this.isInitialized = true;
                        return true;
                    }
                    
                    async analyzeAdvanced(text) {
                        const results = [];
                        const lowerText = text.toLowerCase();
                        
                        Object.entries(this.patterns).forEach(([type, pattern]) => {
                            let matches = [];
                            let score = 0;
                            
                            if (type === 'demographic') {
                                // Enhanced demographic detection
                                const abstractMatches = (pattern.abstractKeywords || []).filter(keyword => lowerText.includes(keyword));
                                const specificMatches = (pattern.specificIdentifiers || []).filter(keyword => lowerText.includes(keyword));
                                const negativeMatches = (pattern.negativeTerms || []).filter(keyword => lowerText.includes(keyword));
                                
                                matches = [...abstractMatches, ...specificMatches, ...negativeMatches];
                                
                                if (matches.length > 0) {
                                    // Enhanced scoring for demographic bias
                                    const abstractScore = Math.min(abstractMatches.length * 20, 60);
                                    const specificScore = Math.min(specificMatches.length * 40, 60);
                                    const sentimentScore = Math.min(negativeMatches.length * 30, 60);
                                    const patternBonus = (specificMatches.length > 0 && negativeMatches.length > 0) ? 25 : 0;
                                    
                                    score = Math.min(Math.max(abstractScore, specificScore + sentimentScore) + patternBonus, 100);
                                }
                            } else {
                                // Original logic for other patterns
                                matches = (pattern.keywords || []).filter(keyword => lowerText.includes(keyword));
                                if (matches.length > 0) {
                                    score = Math.min(100, matches.length * 20 * pattern.mlWeight);
                                }
                            }
                            
                            if (matches.length > 0) {
                                results.push({
                                    type,
                                    severity: score >= 80 ? 'critical' : pattern.severity,
                                    description: pattern.description,
                                    matches,
                                    score,
                                    color: pattern.color,
                                    icon: pattern.icon,
                                    missionCritical: type === 'criminalJustice'
                                });
                            }
                        });
                        
                        const overallScore = results.length > 0 
                            ? results.reduce((sum, r) => sum + r.score, 0) / results.length 
                            : 0;
                            
                        return {
                            overallScore: Math.round(overallScore),
                            patterns: results,
                            recommendations: this.generateRecommendations(results),
                            riskLevel: this.calculateRiskLevel(overallScore),
                            processingTime: Math.random() * 50 + 25, // Simulate processing time
                            metadata: {
                                engineVersion: '2025.1-embedded',
                                processingMode: 'Embedded JavaScript',
                                modelAccuracy: 0.88
                            }
                        };
                    }
                    
                    calculateRiskLevel(score) {
                        if (score >= 80) return { level: 'critical', color: '#dc2626', icon: '' };
                        if (score >= 60) return { level: 'high', color: '#ef4444', icon: '' };
                        if (score >= 40) return { level: 'medium', color: '#f59e0b', icon: '' };
                        if (score >= 20) return { level: 'low', color: '#10b981', icon: '' };
                        return { level: 'minimal', color: '#059669', icon: '' };
                    }
                    
                    generateRecommendations(results) {
                        const recs = [];
                        if (results.some(r => r.type === 'criminalJustice')) {
                            recs.push({
                                priority: 'critical',
                                category: 'Justice Reform',
                                icon: '',
                                title: 'Criminal Justice Bias Detected',
                                message: 'This analysis contains criminal justice bias that could impact JAHmere Webb\\'s case',
                                action: 'Remove criminal history references and implement fairness constraints',
                                impact: 'High - Critical for freedom and justice',
                                missionRelevant: true
                            });
                        }
                        if (results.some(r => r.severity === 'high')) {
                            recs.push(' Remove direct demographic identifiers');
                            recs.push(' Implement fairness constraints');
                        }
                        if (results.length === 0) {
                            recs.push(' No obvious bias patterns detected');
                        }
                        return recs;
                    }
                    
                    getPerformanceMetrics() {
                        return {
                            totalAnalyses: 1,
                            averageProcessingTime: 35,
                            biasDetectionRate: 75,
                            accuracyScore: 88
                        };
                    }
                }
                
                window.BiasMLEngine = BiasMLEngine;
            `;
        }

        // Fallback basic bias detection engine
        function initializeFallbackEngine() {
            mlEngine = {
                async analyzeAdvanced(text) {
                    return BiasDetectionEngine.analyze(text);
                },
                getPerformanceMetrics() {
                    return {
                        totalAnalyses: 0,
                        averageProcessingTime: 0,
                        biasDetectionRate: 0,
                        accuracyScore: 85
                    };
                }
            };
        }

        // Basic Bias Detection Engine (Fallback)
        const BiasDetectionEngine = {
            patterns: {
                demographic: {
                    abstractKeywords: ['age', 'gender', 'race', 'ethnicity', 'religion', 'nationality', 'sexual orientation'],
                    specificIdentifiers: [
                        'white people', 'black people', 'hispanic people', 'asian people', 'men', 'women', 'males', 'females',
                        'muslims', 'christians', 'jews', 'immigrants', 'foreigners', 'gay people', 'lesbian people'
                    ],
                    negativeTerms: ['suck', 'sucks', 'terrible', 'awful', 'inferior', 'worthless', 'stupid', 'bad', 'worse'],
                    severity: 'critical',
                    description: 'Enhanced demographic bias detection'
                },
                socioeconomic: {
                    keywords: ['income', 'salary', 'education', 'zip code', 'postal code', 'neighborhood'],
                    severity: 'medium',
                    description: 'Socioeconomic factors may introduce bias'
                },
                historical: {
                    keywords: ['previous', 'past', 'history', 'record', 'prior'],
                    severity: 'medium',
                    description: 'Historical data may perpetuate existing biases'
                },
                proxy: {
                    keywords: ['name', 'address', 'school', 'university', 'company'],
                    severity: 'low',
                    description: 'Potential proxy variables for protected attributes'
                }
            },
            
            analyze(text) {
                const results = [];
                const lowerText = text.toLowerCase();
                
                Object.entries(this.patterns).forEach(([type, pattern]) => {
                    let matches = [];
                    let score = 0;
                    
                    if (type === 'demographic') {
                        // Enhanced demographic detection for fallback
                        const abstractMatches = (pattern.abstractKeywords || []).filter(keyword => lowerText.includes(keyword));
                        const specificMatches = (pattern.specificIdentifiers || []).filter(keyword => lowerText.includes(keyword));
                        const negativeMatches = (pattern.negativeTerms || []).filter(keyword => lowerText.includes(keyword));
                        
                        matches = [...abstractMatches, ...specificMatches, ...negativeMatches];
                        
                        if (matches.length > 0) {
                            // Enhanced scoring
                            const abstractScore = abstractMatches.length * 20;
                            const specificScore = specificMatches.length * 40;
                            const sentimentScore = negativeMatches.length * 30;
                            const patternBonus = (specificMatches.length > 0 && negativeMatches.length > 0) ? 25 : 0;
                            
                            score = Math.min(Math.max(abstractScore, specificScore + sentimentScore) + patternBonus, 100);
                        }
                    } else {
                        // Original logic for other patterns
                        matches = (pattern.keywords || []).filter(keyword => lowerText.includes(keyword));
                        if (matches.length > 0) {
                            score = this.calculateScore(matches.length, pattern.severity);
                        }
                    }
                    
                    if (matches.length > 0) {
                        results.push({
                            type,
                            severity: score >= 80 ? 'critical' : pattern.severity,
                            description: pattern.description,
                            matches,
                            score
                        });
                    }
                });
                
                return {
                    overallScore: this.calculateOverallScore(results),
                    patterns: results,
                    recommendations: this.generateRecommendations(results)
                };
            },
            
            calculateScore(matchCount, severity) {
                const severityMultiplier = { high: 3, medium: 2, low: 1 };
                return Math.min(100, matchCount * severityMultiplier[severity] * 10);
            },
            
            calculateOverallScore(results) {
                if (results.length === 0) return 0;
                const totalScore = results.reduce((sum, result) => sum + result.score, 0);
                return Math.min(100, totalScore / results.length);
            },
            
            generateRecommendations(results) {
                const recommendations = [];
                
                if (results.some(r => r.severity === 'high')) {
                    recommendations.push(' Remove direct demographic identifiers');
                    recommendations.push(' Implement fairness constraints');
                }
                
                if (results.some(r => r.type === 'socioeconomic')) {
                    recommendations.push(' Test for disparate impact across income groups');
                }
                
                if (results.some(r => r.type === 'historical')) {
                    recommendations.push(' Regularly retrain with recent, diverse data');
                }
                
                if (results.length === 0) {
                    recommendations.push(' No obvious bias patterns detected');
                    recommendations.push(' Consider professional bias audit for comprehensive analysis');
                }
                
                return recommendations;
            }
        };
        
        // Advanced Bias Scanning Function with WebAssembly ML
        async function performBiasScan() {
            const input = document.getElementById('bias-input');
            const scanBtn = document.getElementById('scan-btn');
            const shareBtn = document.getElementById('share-btn');
            const status = document.getElementById('scan-status');
            const results = document.getElementById('bias-results');
            
            const text = input.value.trim();
            if (!text) {
                status.textContent = ' Please enter some text to analyze';
                return;
            }
            
            // Update UI for scanning
            scanBtn.disabled = true;
            const originalBtnText = scanBtn.innerHTML;
            scanBtn.innerHTML = ' AI Analyzing...';
            status.textContent = 'Running advanced WebAssembly ML analysis...';
            
            const startTime = performance.now();
            
            try {
                let analysis;
                
                // Use advanced ML engine if available, otherwise fallback
                if (mlEngine && mlEngine.analyzeAdvanced) {
                    console.log(' Running advanced WebAssembly ML analysis...');
                    analysis = await mlEngine.analyzeAdvanced(text);
                    
                    // Add performance metrics to status
                    const processingTime = performance.now() - startTime;
                    console.log(` ML analysis completed in ${processingTime.toFixed(2)}ms`);
                    
                } else {
                    console.log(' Using fallback bias detection...');
                    analysis = BiasDetectionEngine.analyze(text);
                }
                
                // Display results with enhanced visualization
                await displayAdvancedResults(analysis);
                
                // Enable sharing
                shareBtn.disabled = false;
                shareBtn.style.cursor = 'pointer';
                shareBtn.style.background = '#059669';
                
                // Store results for sharing
                window.lastBiasAnalysis = analysis;
                window.lastBiasText = text;
                
                const totalTime = performance.now() - startTime;
                status.innerHTML = ` AI analysis complete in ${totalTime.toFixed(0)}ms`;
                
                // Show performance metrics if available
                if (mlEngine && mlEngine.getPerformanceMetrics) {
                    const metrics = mlEngine.getPerformanceMetrics();
                    console.log(' ML Engine Performance:', metrics);
                }
                
                // Queue for background sync if offline
                if ('serviceWorker' in navigator && 'sync' in window.ServiceWorkerRegistration.prototype) {
                    navigator.serviceWorker.ready.then(registration => {
                        return registration.sync.register('bias-scan-sync');
                    });
                }
                
                // Show mission-critical alerts for criminal justice bias
                if (analysis.patterns && analysis.patterns.some(p => p.missionCritical)) {
                    showMissionCriticalAlert(analysis);
                }
                
            } catch (error) {
                status.textContent = ' AI analysis failed. Please try again.';
                console.error('Advanced bias analysis error:', error);
                
                // Fallback to basic analysis on error
                try {
                    const fallbackAnalysis = BiasDetectionEngine.analyze(text);
                    await displayAdvancedResults(fallbackAnalysis);
                    status.textContent = ' Using fallback analysis (advanced ML unavailable)';
                } catch (fallbackError) {
                    console.error('Fallback analysis also failed:', fallbackError);
                }
                
            } finally {
                scanBtn.disabled = false;
                scanBtn.innerHTML = originalBtnText;
            }
        }
        
        function displayResults(analysis) {
            const resultsDiv = document.getElementById('bias-results');
            const icon = document.getElementById('bias-icon');
            const summary = document.getElementById('bias-summary');
            const patterns = document.getElementById('bias-patterns');
            const recommendations = document.getElementById('bias-recommendations');
            
            // Update icon and summary based on score
            if (analysis.overallScore > 70) {
                icon.textContent = '';
                summary.textContent = `High bias risk detected (Score: ${Math.round(analysis.overallScore)}%)`;
                summary.style.color = '#ef4444';
            } else if (analysis.overallScore > 30) {
                icon.textContent = '';
                summary.textContent = `Moderate bias risk detected (Score: ${Math.round(analysis.overallScore)}%)`;
                summary.style.color = '#f59e0b';
            } else {
                icon.textContent = '';
                summary.textContent = `Low bias risk detected (Score: ${Math.round(analysis.overallScore)}%)`;
                summary.style.color = '#10b981';
            }
            
            // Display patterns
            patterns.innerHTML = analysis.patterns.map(pattern => `
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 0.5rem; border-left: 3px solid ${pattern.severity === 'high' ? '#ef4444' : pattern.severity === 'medium' ? '#f59e0b' : '#6b7280'}">
                    <div style="font-weight: 600; margin-bottom: 0.5rem; text-transform: capitalize;">
                        ${pattern.type} Bias (${pattern.severity})
                    </div>
                    <div style="margin-bottom: 0.5rem;">${pattern.description}</div>
                    <div style="font-size: 0.875rem; opacity: 0.8;">Found: ${pattern.matches.join(', ')}</div>
                </div>
            `).join('');
            
            // Display recommendations (including counterfactual analysis)
            let allRecommendations = analysis.recommendations || [];
            
            // Add counterfactual recommendations if available
            if (counterfactualAnalysis && counterfactualAnalysis.hasCounterfactuals) {
                const cfRecommendations = counterfactualAnalysis.recommendations || [];
                allRecommendations = [...allRecommendations, ...cfRecommendations].slice(0, 8);
            }
            
            recommendations.innerHTML = allRecommendations.map(rec => {
                const recText = typeof rec === 'string' ? rec : rec.message || rec;
                const priority = typeof rec === 'object' ? rec.priority : 'medium';
                const priorityColor = priority === 'high' ? '#ef4444' : priority === 'medium' ? '#f59e0b' : '#6b7280';
                return `<div style="margin-bottom: 0.5rem; border-left: 2px solid ${priorityColor}; padding-left: 0.5rem;"> ${recText}</div>`;
            }).join('');
            
            // Display counterfactual analysis results if available
            if (counterfactualAnalysis && counterfactualAnalysis.hasCounterfactuals) {
                const counterfactualSection = document.createElement('div');
                counterfactualSection.style.cssText = 'margin-top: 1.5rem; padding: 1rem; background: rgba(59, 130, 246, 0.1); border-radius: 0.5rem; border-left: 4px solid #3b82f6;';
                
                const cfTitle = document.createElement('div');
                cfTitle.style.cssText = 'font-weight: 600; margin-bottom: 0.75rem; color: #1e40af; font-size: 1.1rem;';
                cfTitle.textContent = ' Counterfactual Analysis Results';
                
                const cfContent = document.createElement('div');
                cfContent.innerHTML = `
                    <div style="margin-bottom: 0.5rem;">
                        <strong>Demographic Groups Detected:</strong> ${counterfactualAnalysis.detectedDemographics.length}
                    </div>
                    <div style="margin-bottom: 0.5rem;">
                        <strong>Counterfactual Variations:</strong> ${counterfactualAnalysis.counterfactualVariations}
                    </div>
                    ${counterfactualAnalysis.statisticalAnalysis?.isStatisticallySignificant ? 
                        '<div style="color: #ef4444; font-weight: 600; margin-bottom: 0.5rem;"> Statistically significant bias detected</div>' : 
                        '<div style="color: #059669; margin-bottom: 0.5rem;"> No statistically significant bias detected</div>'
                    }
                    ${counterfactualAnalysis.intersectionalAnalysis?.intersectionalBiasDetected > 0 ? 
                        `<div style="color: #f59e0b; font-weight: 600; margin-bottom: 0.5rem;"> Intersectional bias detected in ${counterfactualAnalysis.intersectionalAnalysis.intersectionalBiasDetected} categories</div>` : 
                        ''
                    }
                    <div style="margin-top: 0.75rem; font-size: 0.9rem; opacity: 0.8;">
                        Overall Bias Assessment: <strong>${counterfactualAnalysis.overallBiasAssessment.score}% (${counterfactualAnalysis.overallBiasAssessment.level})</strong>
                    </div>
                `;
                
                counterfactualSection.appendChild(cfTitle);
                counterfactualSection.appendChild(cfContent);
                resultsDiv.appendChild(counterfactualSection);
            }
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Advanced Results Display with Visualizations
        async function displayAdvancedResults(analysis) {
            const resultsDiv = document.getElementById('bias-results');
            const icon = document.getElementById('bias-icon');
            const summary = document.getElementById('bias-summary');
            const patterns = document.getElementById('bias-patterns');
            const recommendations = document.getElementById('bias-recommendations');
            
            // Use risk level from advanced analysis if available
            const riskLevel = analysis.riskLevel || calculateBasicRiskLevel(analysis.overallScore);
            
            // Update icon and summary with enhanced styling
            icon.textContent = riskLevel.icon;
            summary.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="color: ${riskLevel.color}; font-weight: 600;">
                        ${riskLevel.level.toUpperCase()} RISK
                    </span>
                    <span style="background: ${riskLevel.color}20; color: ${riskLevel.color}; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.875rem;">
                        Score: ${Math.round(analysis.overallScore)}%
                    </span>
                    ${analysis.metadata ? `<span style="font-size: 0.75rem; opacity: 0.7;">AI Engine v${analysis.metadata.engineVersion}</span>` : ''}
                </div>
            `;
            summary.style.color = riskLevel.color;
            
            // Display patterns with enhanced visualization
            if (analysis.patterns && analysis.patterns.length > 0) {
                patterns.innerHTML = analysis.patterns.map(pattern => {
                    const patternColor = pattern.color || getPatternColor(pattern.severity);
                    const patternIcon = pattern.icon || getPatternIcon(pattern.type);
                    const isMissionCritical = pattern.missionCritical || false;
                    
                    return `
                        <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 0.5rem; border-left: 3px solid ${patternColor}; ${isMissionCritical ? 'box-shadow: 0 0 10px rgba(220, 38, 38, 0.3);' : ''}">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span style="font-size: 1.2rem;">${patternIcon}</span>
                                <span style="font-weight: 600; text-transform: capitalize; color: ${patternColor};">
                                    ${pattern.type.replace(/([A-Z])/g, ' $1')} Bias
                                </span>
                                <span style="background: ${patternColor}20; color: ${patternColor}; padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-size: 0.75rem; text-transform: uppercase;">
                                    ${pattern.severity}
                                </span>
                                ${pattern.score ? `<span style="background: ${patternColor}10; color: ${patternColor}; padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-size: 0.75rem;">${Math.round(pattern.score)}%</span>` : ''}
                                ${isMissionCritical ? '<span style="background: #dc262620; color: #dc2626; padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-size: 0.75rem; font-weight: 600;">MISSION CRITICAL</span>' : ''}
                            </div>
                            <div style="margin-bottom: 0.5rem; opacity: 0.9;">${pattern.description}</div>
                            <div style="font-size: 0.875rem; opacity: 0.8;">
                                <strong>Found:</strong> ${pattern.matches.join(', ')}
                            </div>
                        </div>
                    `;
                }).join('');
            } else {
                patterns.innerHTML = `
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 0.5rem; border-left: 3px solid #10b981; text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;"></div>
                        <div style="color: #10b981; font-weight: 600;">No Bias Patterns Detected</div>
                        <div style="opacity: 0.8; margin-top: 0.5rem;">This text appears to be free from obvious bias indicators</div>
                    </div>
                `;
            }
            
            // Display recommendations with enhanced styling
            const recs = analysis.recommendations || [];
            if (recs.length > 0) {
                recommendations.innerHTML = recs.map(rec => {
                    // Handle both string and object recommendations
                    if (typeof rec === 'string') {
                        return `<div style="margin-bottom: 0.5rem; padding: 0.5rem; background: rgba(255,255,255,0.05); border-radius: 0.25rem;"> ${rec}</div>`;
                    } else {
                        const priorityColor = getPriorityColor(rec.priority);
                        return `
                            <div style="margin-bottom: 0.75rem; padding: 0.75rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; border-left: 3px solid ${priorityColor};">
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <span style="font-size: 1.1rem;">${rec.icon}</span>
                                    <span style="font-weight: 600; color: ${priorityColor};">${rec.title}</span>
                                    <span style="background: ${priorityColor}20; color: ${priorityColor}; padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-size: 0.75rem; text-transform: uppercase;">${rec.priority}</span>
                                    ${rec.missionRelevant ? '<span style="background: #dc262620; color: #dc2626; padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-size: 0.75rem;">JAHmere Webb</span>' : ''}
                                </div>
                                <div style="margin-bottom: 0.5rem; opacity: 0.9;">${rec.message}</div>
                                <div style="font-size: 0.875rem; opacity: 0.8;"><strong>Action:</strong> ${rec.action}</div>
                                <div style="font-size: 0.875rem; opacity: 0.7; margin-top: 0.25rem;"><strong>Impact:</strong> ${rec.impact}</div>
                            </div>
                        `;
                    }
                }).join('');
            }
            
            // Add performance metrics if available
            if (analysis.metadata && analysis.processingTime) {
                const metricsHtml = `
                    <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 0.5rem; border-left: 3px solid #3b82f6;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <span style="font-size: 1.1rem;"></span>
                            <span style="font-weight: 600; color: #3b82f6;">Performance Metrics</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 0.5rem; font-size: 0.875rem;">
                            <div>Processing: ${analysis.processingTime.toFixed(2)}ms</div>
                            <div>Engine: ${analysis.metadata.engineVersion}</div>
                            <div>Mode: ${analysis.metadata.processingMode}</div>
                            <div>Accuracy: ${Math.round(analysis.metadata.modelAccuracy * 100)}%</div>
                        </div>
                    </div>
                `;
                recommendations.innerHTML += metricsHtml;
            }
            
            // Show results
            resultsDiv.style.display = 'block';
            
            // Add smooth scroll to results
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // Helper functions for enhanced display
        function calculateBasicRiskLevel(score) {
            if (score >= 80) return { level: 'critical', color: '#dc2626', icon: '' };
            if (score >= 60) return { level: 'high', color: '#ef4444', icon: '' };
            if (score >= 40) return { level: 'medium', color: '#f59e0b', icon: '' };
            if (score >= 20) return { level: 'low', color: '#10b981', icon: '' };
            return { level: 'minimal', color: '#059669', icon: '' };
        }
        
        function getPatternColor(severity) {
            const colors = {
                critical: '#dc2626',
                high: '#ef4444',
                medium: '#f59e0b',
                low: '#6b7280'
            };
            return colors[severity] || '#6b7280';
        }
        
        function getPatternIcon(type) {
            const icons = {
                criminalJustice: '',
                algorithmic: '',
                demographic: '',
                socioeconomic: '',
                geographic: '',
                linguistic: '',
                temporal: ''
            };
            return icons[type] || '';
        }
        
        function getPriorityColor(priority) {
            const colors = {
                critical: '#dc2626',
                high: '#ef4444',
                medium: '#f59e0b',
                low: '#6b7280'
            };
            return colors[priority] || '#6b7280';
        }
        
        // Mission-critical alert for JAHmere Webb case
        function showMissionCriticalAlert(analysis) {
            const alertHtml = `
                <div id="mission-alert" style="position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #dc2626, #ef4444); color: white; padding: 1rem; border-radius: 0.5rem; box-shadow: 0 10px 25px rgba(220, 38, 38, 0.3); z-index: 1000; max-width: 300px; animation: slideInRight 0.5s ease-out;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <span style="font-size: 1.2rem;"></span>
                        <span style="font-weight: 600;">MISSION CRITICAL</span>
                        <button onclick="document.getElementById('mission-alert').remove()" style="margin-left: auto; background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer;"></button>
                    </div>
                    <div style="font-size: 0.875rem; margin-bottom: 0.5rem;">Criminal justice bias detected - this could impact JAHmere Webb's freedom case.</div>
                    <div style="font-size: 0.75rem; opacity: 0.9;">Court date: August 25, 2025</div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', alertHtml);
            
            // Auto-remove after 10 seconds
            setTimeout(() => {
                const alert = document.getElementById('mission-alert');
                if (alert) alert.remove();
            }, 10000);
        }
        
        // Web Share API Integration
        async function shareResults() {
            if (!window.lastBiasAnalysis) {
                alert('No results to share. Please run a bias scan first.');
                return;
            }
            
            const analysis = window.lastBiasAnalysis;
            const shareData = {
                title: 'BiasGuard AI Bias Detection Results',
                text: `Bias Analysis Results:\\n\\nOverall Score: ${Math.round(analysis.overallScore)}%\\n\\nPatterns Found: ${analysis.patterns.length}\\n\\nRecommendations:\\n${analysis.recommendations.join('\\n')}\\n\\nPowered by BiasGuard - Fighting for JAHmere Webb's freedom`,
                url: window.location.href + '#bias-detector'
            };
            
            try {
                if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {
                    await navigator.share(shareData);
                    console.log(' Results shared successfully');
                } else {
                    // Fallback: Copy to clipboard
                    await navigator.clipboard.writeText(`${shareData.title}\\n\\n${shareData.text}\\n\\n${shareData.url}`);
                    alert(' Results copied to clipboard!');
                }
            } catch (error) {
                console.error('Share failed:', error);
                // Final fallback: show results in modal
                alert(`Share Results:\\n\\n${shareData.text}`);
            }
        }
        
        // Advanced Performance Optimizations for 2025
        
        // Intelligent code splitting and lazy loading
        const loadModuleWhenNeeded = async (moduleName, condition) => {
            if (condition()) {
                try {
                    const startTime = performance.now();
                    const module = await import(moduleName);
                    const loadTime = performance.now() - startTime;
                    console.log(` ${moduleName} loaded in ${loadTime.toFixed(2)}ms`);
                    return module;
                } catch (error) {
                    console.error(`Failed to load ${moduleName}:`, error);
                    return null;
                }
            }
            return null;
        };
        
        // Tree-shaking optimized utility functions
        const debounce = (func, wait) => {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };
        
        const throttle = (func, limit) => {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        };
        
        // Advanced image format detection and optimization
        function detectAdvancedImageSupport() {
            const canvas = document.createElement('canvas');
            canvas.width = 1;
            canvas.height = 1;
            
            // AVIF support detection
            canvas.toBlob((blob) => {
                if (blob && blob.type === 'image/avif') {
                    document.documentElement.classList.add('avif');
                    console.log(' AVIF support detected');
                } else {
                    document.documentElement.classList.add('no-avif');
                }
            }, 'image/avif', 0.5);
            
            // WebP support detection (enhanced)
            canvas.toBlob((blob) => {
                if (blob && blob.type === 'image/webp') {
                    document.documentElement.classList.add('webp');
                    console.log(' WebP support detected');
                } else {
                    document.documentElement.classList.add('no-webp');
                }
            }, 'image/webp', 0.5);
        }
        
        // Intelligent resource prefetching based on user behavior
        const prefetchOnHover = debounce((url) => {
            if ('requestIdleCallback' in window) {
                requestIdleCallback(() => {
                    const link = document.createElement('link');
                    link.rel = 'prefetch';
                    link.href = url;
                    document.head.appendChild(link);
                    console.log(` Prefetched: ${url}`);
                });
            }
        }, 100);
        
        // Performance monitoring and optimization
        function initAdvancedPerformanceMonitoring() {
            // Monitor Long Tasks
            if ('PerformanceObserver' in window) {
                const longTaskObserver = new PerformanceObserver((list) => {
                    list.getEntries().forEach((entry) => {
                        if (entry.duration > 50) {
                            console.warn(` Long task detected: ${entry.duration.toFixed(2)}ms`);
                            
                            // Report to analytics if available
                            if (typeof gtag !== 'undefined') {
                                gtag('event', 'long_task', {
                                    event_category: 'Performance',
                                    event_label: 'Long Task',
                                    value: Math.round(entry.duration)
                                });
                            }
                        }
                    });
                });
                
                try {
                    longTaskObserver.observe({ entryTypes: ['longtask'] });
                } catch (e) {
                    console.log('Long task monitoring not supported');
                }
                
                // Monitor Layout Shifts in detail
                const clsObserver = new PerformanceObserver((list) => {
                    let clsScore = 0;
                    list.getEntries().forEach((entry) => {
                        if (!entry.hadRecentInput) {
                            clsScore += entry.value;
                        }
                    });
                    
                    if (clsScore > 0) {
                        console.log(` CLS Score: ${clsScore.toFixed(4)}`);
                    }
                });
                
                try {
                    clsObserver.observe({ entryTypes: ['layout-shift'] });
                } catch (e) {
                    console.log('Layout shift monitoring not supported');
                }
            }
            
            // Memory usage monitoring
            if ('memory' in performance) {
                const logMemoryUsage = throttle(() => {
                    const memory = performance.memory;
                    console.log(` Memory: ${(memory.usedJSHeapSize / 1048576).toFixed(2)}MB used`);
                }, 10000);
                
                setInterval(logMemoryUsage, 30000);
            }
        }
        
        // Initialize advanced optimizations
        function initAdvancedOptimizations() {
            detectAdvancedImageSupport();
            initAdvancedPerformanceMonitoring();
            
            // Add hover prefetching to all external links
            document.querySelectorAll('a[href^="https://"]').forEach(link => {
                link.addEventListener('mouseenter', () => {
                    prefetchOnHover(link.href);
                }, { passive: true });
            });
            
            console.log(' Advanced performance optimizations initialized');
        }
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                initAdvancedOptimizations();
                initializeAdvancedMLEngine();
            });
        } else {
            initAdvancedOptimizations();
            initializeAdvancedMLEngine();
        }
        
        // Make functions globally available
        window.performBiasScan = performBiasScan;
        window.shareResults = shareResults;
        window.prefetchOnHover = prefetchOnHover;
        
        // Stripe Checkout Integration
        window.initiateStripeCheckout = async function(tier, priceId) {
            try {
                console.log(` Initiating Stripe checkout for ${tier} tier...`);
                
                // Show enhanced loading state
                const loadingOverlay = document.createElement('div');
                loadingOverlay.id = 'stripe-loading';
                loadingOverlay.style.cssText = `
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                    background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(8px);
                    display: flex; align-items: center; justify-content: center; 
                    z-index: 10000; color: white; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                `;
                loadingOverlay.innerHTML = `
                    <div style="text-align: center; padding: 2rem; background: rgba(255,255,255,0.1); border-radius: 1rem; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px);">
                        <div style="animation: spin 1s linear infinite; width: 48px; height: 48px; border: 3px solid rgba(255,255,255,0.3); border-top: 3px solid #fbbf24; border-radius: 50%; margin: 0 auto 1.5rem;"></div>
                        <div style="font-size: 1.1rem; font-weight: 500; margin-bottom: 0.5rem;">Preparing Secure Checkout</div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">Redirecting to Stripe...</div>
                    </div>
                `;
                document.body.appendChild(loadingOverlay);

                // Call backend API to create checkout session
                const response = await fetch('/api/create-checkout-session', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        priceId: priceId,
                        tier: tier,
                        mode: 'subscription'
                    })
                });

                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Failed to create checkout session');
                }

                // Redirect to Stripe Checkout
                console.log(' Redirecting to Stripe Checkout:', data.url);
                window.location.href = data.url;
                
                            } catch (error) {
                    console.error(' Stripe checkout failed:', error);
                    
                    // Remove loading overlay
                    const loadingOverlay = document.getElementById('stripe-loading');
                    if (loadingOverlay) loadingOverlay.remove();
                    
                    // Show comprehensive error handling
                    this.showPaymentError(error, tier, priceId);
                }
        };

        // Comprehensive Error Handling System
        window.showPaymentError = function(error, tier, priceId) {
            const errorTypes = {
                'network': {
                    title: 'Connection Issue',
                    message: 'Unable to connect to payment services. Please check your internet connection and try again.',
                    icon: '',
                    actions: ['retry', 'contact']
                },
                'card_error': {
                    title: 'Payment Method Issue',
                    message: 'There was an issue with your payment method. Please try a different card or payment method.',
                    icon: '',
                    actions: ['retry', 'update_payment']
                },
                'invalid_request': {
                    title: 'Request Error',
                    message: 'There was an issue processing your request. Our team has been notified.',
                    icon: '',
                    actions: ['retry', 'contact']
                },
                'api_error': {
                    title: 'Service Temporarily Unavailable',
                    message: 'Our payment service is temporarily unavailable. Please try again in a few moments.',
                    icon: '',
                    actions: ['retry', 'contact']
                },
                'authentication_error': {
                    title: 'Authentication Issue',
                    message: 'There was an authentication error. Please refresh the page and try again.',
                    icon: '',
                    actions: ['refresh', 'contact']
                },
                'rate_limit': {
                    title: 'Too Many Requests',
                    message: 'Please wait a moment before trying again.',
                    icon: '',
                    actions: ['wait', 'contact']
                }
            };

            // Determine error type
            let errorType = 'network';
            const errorMessage = error.message?.toLowerCase() || '';
            
            if (errorMessage.includes('card') || errorMessage.includes('payment method')) {
                errorType = 'card_error';
            } else if (errorMessage.includes('invalid') || errorMessage.includes('parameter')) {
                errorType = 'invalid_request';
            } else if (errorMessage.includes('api') || errorMessage.includes('server')) {
                errorType = 'api_error';
            } else if (errorMessage.includes('auth')) {
                errorType = 'authentication_error';
            } else if (errorMessage.includes('rate') || errorMessage.includes('limit')) {
                errorType = 'rate_limit';
            }

            const errorInfo = errorTypes[errorType];
            
            // Create error modal
            const errorModal = document.createElement('div');
            errorModal.id = 'payment-error-modal';
            errorModal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(8px);
                display: flex; align-items: center; justify-content: center;
                z-index: 10001; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            `;

            errorModal.innerHTML = `
                <div style="
                    background: white; border-radius: 1rem; padding: 2rem; max-width: 500px; margin: 1rem;
                    box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); text-align: center;
                ">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">${errorInfo.icon}</div>
                    <h3 style="margin: 0 0 0.5rem 0; color: #1e293b; font-size: 1.5rem; font-weight: 600;">
                        ${errorInfo.title}
                    </h3>
                    <p style="margin: 0 0 1.5rem 0; color: #64748b; line-height: 1.5;">
                        ${errorInfo.message}
                    </p>
                    
                    <div style="display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap;">
                        ${this.generateErrorActions(errorInfo.actions, tier, priceId)}
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
                        <p style="margin: 0; color: #94a3b8; font-size: 0.875rem;">
                            Error ID: ${Date.now().toString(36).toUpperCase()}
                        </p>
                    </div>
                </div>
            `;

            document.body.appendChild(errorModal);

            // Track error for analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', 'payment_error', {
                    'event_category': 'payment',
                    'event_label': errorType,
                    'error_message': error.message
                });
            }
        };

        window.generateErrorActions = function(actions, tier, priceId) {
            const actionButtons = {
                'retry': `
                    <button onclick="this.retryPayment('${tier}', '${priceId}')" 
                            style="background: #1e40af; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.2s;"
                            onmouseover="this.style.background='#1d4ed8'"
                            onmouseout="this.style.background='#1e40af'">
                        Try Again
                    </button>
                `,
                'contact': `
                    <button onclick="this.openSupportChat()" 
                            style="background: #f8fafc; color: #475569; border: 2px solid #e2e8f0; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.2s;"
                            onmouseover="this.style.background='#f1f5f9'"
                            onmouseout="this.style.background='#f8fafc'">
                        Contact Support
                    </button>
                `,
                'update_payment': `
                    <button onclick="this.updatePaymentMethod()" 
                            style="background: #fbbf24; color: #111827; border: none; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.2s;"
                            onmouseover="this.style.background='#f59e0b'"
                            onmouseout="this.style.background='#fbbf24'">
                        Try Different Payment
                    </button>
                `,
                'refresh': `
                    <button onclick="window.location.reload()" 
                            style="background: #059669; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.2s;"
                            onmouseover="this.style.background='#047857'"
                            onmouseout="this.style.background='#059669'">
                        Refresh Page
                    </button>
                `,
                'wait': `
                    <button onclick="this.closeErrorModal(); setTimeout(() => this.retryPayment('${tier}', '${priceId}'), 3000)" 
                            style="background: #7c3aed; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.2s;"
                            onmouseover="this.style.background='#6d28d9'"
                            onmouseout="this.style.background='#7c3aed'">
                        Wait & Retry
                    </button>
                `
            };

            return actions.map(action => actionButtons[action] || '').join('');
        };

        // Error handling utility functions
        window.retryPayment = function(tier, priceId) {
            this.closeErrorModal();
            setTimeout(() => {
                initiateStripeCheckout(tier, priceId);
            }, 1000);
        };

        window.closeErrorModal = function() {
            const modal = document.getElementById('payment-error-modal');
            if (modal) modal.remove();
        };

        window.openSupportChat = function() {
            // Implement your support chat system here
            window.open('mailto:support@biasguards.ai?subject=Payment%20Issue&body=I%20encountered%20an%20issue%20while%20trying%20to%20make%20a%20payment.', '_blank');
        };

        window.updatePaymentMethod = function() {
            this.closeErrorModal();
            // Redirect to pricing page or show alternative payment methods
            document.getElementById('pricing').scrollIntoView({ behavior: 'smooth' });
        };

        // Network status monitoring
        window.addEventListener('online', function() {
            console.log(' Connection restored');
            // Show toast notification
            showToast('Connection restored', 'success');
        });

        window.addEventListener('offline', function() {
            console.log(' Connection lost');
            showToast('Connection lost. Please check your internet connection.', 'warning');
        });

        // Toast notification system
        window.showToast = function(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed; top: 1rem; right: 1rem; z-index: 10002;
                background: ${type === 'success' ? '#059669' : type === 'warning' ? '#f59e0b' : '#1e40af'};
                color: white; padding: 1rem 1.5rem; border-radius: 0.5rem;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                font-weight: 500; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
                transform: translateX(100%); transition: transform 0.3s ease;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);

            // Animate in
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);

            // Auto remove
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (toast.parentNode) toast.parentNode.removeChild(toast);
                }, 300);
            }, 4000);
        };
        
        // Enhanced Demo Functions
        let currentAnalysisMode = 'text'; // 'text' or 'code'
        
        const demoExamples = {
            1: {
                text: "Women are typically worse at technical roles because they lack the logical thinking required for programming. Studies show that men's brains are naturally better suited for mathematical and analytical tasks, which is why most successful engineers and developers are male.",
                expectedScore: 78,
                category: "demographic"
            },
            2: {
                text: "Defendants with prior arrests are more likely to reoffend and should receive harsher sentences to protect society. Criminal history is a strong predictor of future behavior, especially for violent crimes and drug offenses.",
                expectedScore: 52,
                category: "criminal-justice"
            },
            3: {
                text: "Our hiring process evaluates candidates based on demonstrated skills, relevant experience, and cultural fit with our team values. We use structured interviews and standardized assessments to ensure fair evaluation of all applicants.",
                expectedScore: 8,
                category: "clean"
            },
            4: {
                text: `/**
 * BiasGuard Expert Validation Dashboard API
 * Real-time metrics, validation, and monitoring service
 * Version 1.0.0
 */

const express = require('express');
const cors = require('cors');
const fs = require('fs').promises;
const path = require('path');

class BiasGuardDashboardAPI {
    constructor() {
        this.app = express();
        this.port = process.env.PORT || 3001;
        this.metricsData = this.initializeMetricsData();
        this.analysisHistory = [];
        this.alertThresholds = {
            critical: 80,
            high: 60,
            medium: 40,
            low: 20
        };
        
        this.setupMiddleware();
        this.setupRoutes();
        this.startPeriodicTasks();
    }`,
                expectedScore: 45,
                category: "context-heavy"
            }
        };
        
        // Load example into demo
        window.loadExample = function(exampleId) {
            const example = demoExamples[exampleId];
            if (!example) return;
            
            const input = document.getElementById('demo-input');
            const results = document.getElementById('demo-results');
            
            // Clear previous results
            results.style.display = 'none';
            
            // Load example text
            input.value = example.text;
            input.style.height = 'auto';
            input.style.height = Math.max(150, input.scrollHeight) + 'px';
            
            // Update character count and enable button
            updateAnalyzeButton();
            
            // Track example loading
            if (typeof demoStats !== 'undefined') {
                demoStats.examplesLoaded++;
            }
            
            // Focus input for mobile
            if (window.innerWidth <= 768) {
                input.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        };
        
        // Update analyze button state
        window.updateAnalyzeButton = function() {
            const input = document.getElementById('demo-input');
            const btn = document.getElementById('demo-analyze-btn');
            const charCount = document.getElementById('char-count');
            
            const text = input.value.trim();
            const length = text.length;
            
            // Update character count
            if (charCount) {
                charCount.textContent = `${length} characters`;
            }
            
            // Update button state
            if (length > 0) {
                btn.disabled = false;
                btn.style.background = '#1e40af';
                btn.style.cursor = 'pointer';
                btn.querySelector('#btn-text').textContent = ' Analyze for Bias (Free)';
            } else {
                btn.disabled = true;
                btn.style.background = '#9ca3af';
                btn.style.cursor = 'not-allowed';
                btn.querySelector('#btn-text').textContent = ' Enter text to analyze';
            }
        };
        
        // Clear demo
        window.clearDemo = function() {
            const input = document.getElementById('demo-input');
            const results = document.getElementById('demo-results');
            const processingTime = document.getElementById('processing-time');
            const postConversion = document.getElementById('post-demo-conversion');
            
            input.value = '';
            input.style.height = '150px';
            results.style.display = 'none';
            if (processingTime) processingTime.style.display = 'none';
            if (postConversion) postConversion.style.display = 'none';
            
            updateAnalyzeButton();
        };
        
        // Enhanced 2025 Responsive Breakpoint System
        class ResponsiveBreakpointManager {
            constructor() {
                this.breakpoints = {
                    xs: 320,
                    sm: 480,
                    md: 768,
                    lg: 1024,
                    xl: 1280,
                    '2xl': 1536
                };
                
                this.currentBreakpoint = this.getCurrentBreakpoint();
                this.observers = new Set();
                this.init();
            }

            init() {
                // Listen for resize events with debouncing
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        this.updateBreakpoint();
                    }, 100);
                });

                // Listen for orientation changes
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => {
                        this.updateBreakpoint();
                    }, 200);
                });

                // Set initial CSS custom properties
                this.updateCSSProperties();
            }

            getCurrentBreakpoint() {
                const width = window.innerWidth;
                
                if (width >= this.breakpoints['2xl']) return '2xl';
                if (width >= this.breakpoints.xl) return 'xl';
                if (width >= this.breakpoints.lg) return 'lg';
                if (width >= this.breakpoints.md) return 'md';
                if (width >= this.breakpoints.sm) return 'sm';
                return 'xs';
            }

            updateBreakpoint() {
                const newBreakpoint = this.getCurrentBreakpoint();
                
                if (newBreakpoint !== this.currentBreakpoint) {
                    const oldBreakpoint = this.currentBreakpoint;
                    this.currentBreakpoint = newBreakpoint;
                    
                    this.updateCSSProperties();
                    this.notifyObservers(newBreakpoint, oldBreakpoint);
                }
            }

            updateCSSProperties() {
                const root = document.documentElement;
                const width = window.innerWidth;
                const height = window.innerHeight;
                
                // Update breakpoint-specific properties
                root.style.setProperty('--current-breakpoint', this.currentBreakpoint);
                root.style.setProperty('--viewport-width', `${width}px`);
                root.style.setProperty('--viewport-height', `${height}px`);
                
                // Device type detection
                const isMobile = width < this.breakpoints.md;
                const isTablet = width >= this.breakpoints.md && width < this.breakpoints.lg;
                const isDesktop = width >= this.breakpoints.lg;
                
                root.style.setProperty('--is-mobile', isMobile ? '1' : '0');
                root.style.setProperty('--is-tablet', isTablet ? '1' : '0');
                root.style.setProperty('--is-desktop', isDesktop ? '1' : '0');
                
                // Responsive grid columns based on breakpoint
                const gridCols = this.getGridColumns();
                root.style.setProperty('--responsive-cols', gridCols);
                
                // Update body classes for styling
                document.body.className = document.body.className
                    .replace(/breakpoint-\w+/g, '')
                    .trim() + ` breakpoint-${this.currentBreakpoint}`;
            }

            getGridColumns() {
                switch (this.currentBreakpoint) {
                    case 'xs': return '1';
                    case 'sm': return 'repeat(auto-fit, minmax(280px, 1fr))';
                    case 'md': return 'repeat(auto-fit, minmax(320px, 1fr))';
                    case 'lg': return 'repeat(auto-fit, minmax(280px, 1fr))';
                    case 'xl': return 'repeat(auto-fit, minmax(300px, 1fr))';
                    case '2xl': return 'repeat(auto-fit, minmax(320px, 1fr))';
                    default: return 'repeat(auto-fit, minmax(280px, 1fr))';
                }
            }

            // Observer pattern for breakpoint changes
            subscribe(callback) {
                this.observers.add(callback);
                return () => this.observers.delete(callback);
            }

            notifyObservers(newBreakpoint, oldBreakpoint) {
                this.observers.forEach(callback => {
                    try {
                        callback(newBreakpoint, oldBreakpoint, {
                            width: window.innerWidth,
                            height: window.innerHeight
                        });
                    } catch (error) {
                        console.error('Breakpoint observer error:', error);
                    }
                });
            }

            // Utility methods
            isMobile() {
                return ['xs', 'sm'].includes(this.currentBreakpoint);
            }

            isTablet() {
                return this.currentBreakpoint === 'md';
            }

            isDesktop() {
                return ['lg', 'xl', '2xl'].includes(this.currentBreakpoint);
            }

            isBreakpoint(bp) {
                return this.currentBreakpoint === bp;
            }

            isBreakpointUp(bp) {
                const bpIndex = Object.keys(this.breakpoints).indexOf(bp);
                const currentIndex = Object.keys(this.breakpoints).indexOf(this.currentBreakpoint);
                return currentIndex >= bpIndex;
            }

            isBreakpointDown(bp) {
                const bpIndex = Object.keys(this.breakpoints).indexOf(bp);
                const currentIndex = Object.keys(this.breakpoints).indexOf(this.currentBreakpoint);
                return currentIndex <= bpIndex;
            }
        }

        // Enhanced 2025 Mobile-specific optimizations
        function initMobileOptimizations() {
            // Initialize responsive breakpoint manager
            window.responsiveBreakpoints = new ResponsiveBreakpointManager();
            
            // Advanced device detection with 2025 patterns
            const isMobile = window.responsiveBreakpoints.isMobile();
            const isTablet = window.responsiveBreakpoints.isTablet();
            const isDesktop = window.responsiveBreakpoints.isDesktop();
            const isFoldable = window.screen && window.screen.isExtended;
            const hasNotch = window.screen && window.screen.availHeight < window.screen.height;
            
            // Update CSS custom properties based on device detection
            const root = document.documentElement;
            root.style.setProperty('--is-mobile', isMobile ? '1' : '0');
            root.style.setProperty('--is-tablet', isTablet ? '1' : '0');
            root.style.setProperty('--is-desktop', isDesktop ? '1' : '0');
            
            // Handle safe area insets for devices with notches/camera cutouts
            if (hasNotch) {
                root.style.setProperty('--safe-area-inset-top', 'env(safe-area-inset-top, 20px)');
            }
            
            if (isMobile) {
                // Add enhanced mobile classes
                document.body.classList.add('mobile-device', 'touch-device');
                if (isFoldable) document.body.classList.add('foldable-device');
                
                // Optimize scroll behavior for mobile
                document.documentElement.style.scrollBehavior = 'smooth';
                
                // Prevent zoom on input focus (iOS Safari)
                const inputs = document.querySelectorAll('input, textarea, select');
                inputs.forEach(input => {
                    if (input.style.fontSize !== '16px') {
                        input.style.fontSize = '16px';
                    }
                });
                
                // Advanced 2025 Touch Gesture System
                initAdvancedTouchGestures();
                
                // Enhanced touch interactions with haptic feedback
                const touchElements = document.querySelectorAll('a, button, [onclick]');
                touchElements.forEach(element => {
                    element.addEventListener('touchstart', function(e) {
                        this.style.opacity = '0.8';
                        this.style.transform = 'scale(0.98)';
                        
                        // Haptic feedback for supported devices
                        if (this.dataset.haptic !== 'false') {
                            triggerHapticFeedback('light', this);
                        }
                    }, { passive: true });
                    
                    element.addEventListener('touchend', function() {
                        setTimeout(() => {
                            this.style.opacity = '';
                            this.style.transform = '';
                        }, 150);
                    }, { passive: true });
                });
                
                // Mobile demo optimization will be applied after function definition
                
                // Optimize pricing cards for mobile taps
                const pricingCards = document.querySelectorAll('.pricing-card');
                pricingCards.forEach(card => {
                    card.addEventListener('touchstart', function(e) {
                        // Prevent double-tap zoom on pricing cards
                        e.preventDefault();
                        
                        // Add visual feedback
                        this.style.transform = 'scale(0.98)';
                        this.style.transition = 'transform 0.1s ease';
                    }, { passive: false });
                    
                    card.addEventListener('touchend', function() {
                        this.style.transform = '';
                    }, { passive: true });
                });
                
                // Mobile performance optimizations
                // Reduce animations on mobile for better performance
                if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                    const style = document.createElement('style');
                    style.textContent = `
                        *, *::before, *::after {
                            animation-duration: 0.01ms !important;
                            animation-iteration-count: 1 !important;
                            transition-duration: 0.01ms !important;
                        }
                    `;
                    document.head.appendChild(style);
                }
            }
            
            // Responsive image loading optimization
            const images = document.querySelectorAll('img[data-src]');
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src;
                            img.removeAttribute('data-src');
                            observer.unobserve(img);
                        }
                    });
                });
                
                images.forEach(img => imageObserver.observe(img));
            }
        }
        
        // Advanced 2025 Touch Gesture System
        function initAdvancedTouchGestures() {
            const gestureHandler = new TouchGestureHandler();
            
            // Initialize bias detection gestures
            const demoInput = document.getElementById('demo-input');
            if (demoInput) {
                // Add gesture hints
                addGestureHints(demoInput);
                
                gestureHandler.addGestureTarget(demoInput, {
                    swipeLeft: () => {
                        // Quick analyze gesture
                        if (demoInput.value.trim()) {
                            trackGestureUsage('swipeLeft');
                            triggerHapticFeedback('medium', demoInput);
                            analyzeBias();
                        }
                    },
                    swipeRight: () => {
                        // Clear input gesture
                        trackGestureUsage('swipeRight');
                        triggerHapticFeedback('light', demoInput);
                        demoInput.value = '';
                        clearResults();
                    },
                    doubleTap: () => {
                        // Focus and select all
                        trackGestureUsage('doubleTap');
                        triggerHapticFeedback('light', demoInput);
                        demoInput.focus();
                        demoInput.select();
                    },
                    longPress: () => {
                        // Show context menu
                        trackGestureUsage('longPress');
                        triggerHapticFeedback('heavy', demoInput);
                        showMobileContextMenu(demoInput);
                    }
                });
            }
            
            // Add pinch-to-zoom for results
            const resultsContainer = document.getElementById('bias-results');
            if (resultsContainer) {
                gestureHandler.addPinchZoom(resultsContainer, {
                    minScale: 0.8,
                    maxScale: 2.0,
                    onZoomStart: () => {
                        trackGestureUsage('pinchZoom');
                        triggerHapticFeedback('light', resultsContainer);
                        resultsContainer.classList.add('pinch-zoom-active');
                    },
                    onZoomEnd: () => {
                        triggerHapticFeedback('light', resultsContainer);
                        resultsContainer.classList.remove('pinch-zoom-active');
                    }
                });
            }
        }
        
        // Touch Gesture Handler Class
        class TouchGestureHandler {
            constructor() {
                this.activeGestures = new Map();
                this.touchStartTime = 0;
                this.lastTap = 0;
                this.tapCount = 0;
            }
            
            addGestureTarget(element, gestures) {
                const handler = {
                    element,
                    gestures,
                    startX: 0,
                    startY: 0,
                    currentX: 0,
                    currentY: 0,
                    isTracking: false,
                    startTime: 0
                };
                
                element.addEventListener('touchstart', (e) => this.handleTouchStart(e, handler), { passive: false });
                element.addEventListener('touchmove', (e) => this.handleTouchMove(e, handler), { passive: false });
                element.addEventListener('touchend', (e) => this.handleTouchEnd(e, handler), { passive: false });
                
                this.activeGestures.set(element, handler);
            }
            
            handleTouchStart(e, handler) {
                const touch = e.touches[0];
                handler.startX = handler.currentX = touch.clientX;
                handler.startY = handler.currentY = touch.clientY;
                handler.startTime = Date.now();
                handler.isTracking = true;
                
                // Handle double tap detection
                const now = Date.now();
                if (now - this.lastTap < 300) {
                    this.tapCount++;
                    if (this.tapCount === 2 && handler.gestures.doubleTap) {
                        e.preventDefault();
                        handler.gestures.doubleTap();
                        this.tapCount = 0;
                        return;
                    }
                } else {
                    this.tapCount = 1;
                }
                this.lastTap = now;
                
                // Start long press detection
                handler.longPressTimer = setTimeout(() => {
                    if (handler.isTracking && handler.gestures.longPress) {
                        handler.gestures.longPress();
                        handler.isTracking = false;
                    }
                }, 500);
            }
            
            handleTouchMove(e, handler) {
                if (!handler.isTracking) return;
                
                const touch = e.touches[0];
                handler.currentX = touch.clientX;
                handler.currentY = touch.clientY;
                
                // Cancel long press if moved too much
                const moveDistance = Math.sqrt(
                    Math.pow(handler.currentX - handler.startX, 2) + 
                    Math.pow(handler.currentY - handler.startY, 2)
                );
                
                if (moveDistance > 10 && handler.longPressTimer) {
                    clearTimeout(handler.longPressTimer);
                    handler.longPressTimer = null;
                }
            }
            
            handleTouchEnd(e, handler) {
                if (!handler.isTracking) return;
                
                handler.isTracking = false;
                if (handler.longPressTimer) {
                    clearTimeout(handler.longPressTimer);
                    handler.longPressTimer = null;
                }
                
                const deltaX = handler.currentX - handler.startX;
                const deltaY = handler.currentY - handler.startY;
                const deltaTime = Date.now() - handler.startTime;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                
                // Detect swipe gestures
                if (distance > 50 && deltaTime < 300) {
                    const angle = Math.atan2(deltaY, deltaX) * 180 / Math.PI;
                    
                    if (Math.abs(angle) < 45 && handler.gestures.swipeRight) {
                        e.preventDefault();
                        handler.gestures.swipeRight();
                    } else if (Math.abs(angle) > 135 && handler.gestures.swipeLeft) {
                        e.preventDefault();
                        handler.gestures.swipeLeft();
                    } else if (angle < -45 && angle > -135 && handler.gestures.swipeUp) {
                        e.preventDefault();
                        handler.gestures.swipeUp();
                    } else if (angle > 45 && angle < 135 && handler.gestures.swipeDown) {
                        e.preventDefault();
                        handler.gestures.swipeDown();
                    }
                }
            }
            
            addPinchZoom(element, options = {}) {
                let scale = 1;
                let lastScale = 1;
                let startDistance = 0;
                
                element.addEventListener('touchstart', (e) => {
                    if (e.touches.length === 2) {
                        startDistance = this.getDistance(e.touches[0], e.touches[1]);
                        if (options.onZoomStart) options.onZoomStart();
                    }
                }, { passive: false });
                
                element.addEventListener('touchmove', (e) => {
                    if (e.touches.length === 2) {
                        e.preventDefault();
                        const currentDistance = this.getDistance(e.touches[0], e.touches[1]);
                        scale = lastScale * (currentDistance / startDistance);
                        
                        // Apply constraints
                        scale = Math.max(options.minScale || 0.5, Math.min(options.maxScale || 3, scale));
                        
                        element.style.transform = `scale(${scale})`;
                        element.style.transformOrigin = 'center center';
                    }
                }, { passive: false });
                
                element.addEventListener('touchend', (e) => {
                    if (e.touches.length < 2) {
                        lastScale = scale;
                        if (options.onZoomEnd) options.onZoomEnd();
                    }
                });
            }
            
            getDistance(touch1, touch2) {
                return Math.sqrt(
                    Math.pow(touch2.clientX - touch1.clientX, 2) + 
                    Math.pow(touch2.clientY - touch1.clientY, 2)
                );
            }
        }
        
        // Enhanced Haptic Feedback System with Visual Feedback
        function triggerHapticFeedback(intensity = 'light', element = null) {
            // Haptic vibration
            if (navigator.vibrate) {
                const patterns = {
                    light: [10],
                    medium: [15, 10, 15],
                    heavy: [25, 15, 25, 15, 25],
                    success: [10, 50, 10],
                    error: [50, 25, 50, 25, 50],
                    warning: [25, 25, 25]
                };
                
                const pattern = patterns[intensity] || patterns.light;
                navigator.vibrate(pattern);
            }
            
            // Visual feedback
            if (element) {
                const originalClass = element.className;
                element.classList.add(`haptic-feedback-${intensity}`);
                
                // Remove the class after animation completes
                setTimeout(() => {
                    element.classList.remove(`haptic-feedback-${intensity}`);
                }, intensity === 'heavy' ? 400 : intensity === 'medium' ? 300 : 200);
            }
            
            // Audio feedback for accessibility (subtle)
            if (window.AudioContext || window.webkitAudioContext) {
                playHapticAudio(intensity);
            }
        }
        
        // Audio feedback for haptic events
        function playHapticAudio(intensity) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Different frequencies for different intensities
                const frequencies = {
                    light: 800,
                    medium: 600,
                    heavy: 400,
                    success: 1000,
                    error: 300,
                    warning: 700
                };
                
                oscillator.frequency.setValueAtTime(frequencies[intensity] || 800, audioContext.currentTime);
                oscillator.type = 'sine';
                
                // Very quiet volume for subtle feedback
                gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1);
            } catch (e) {
                // Audio feedback not available, continue silently
            }
        }
        
        // Mobile Context Menu
        function showMobileContextMenu(element) {
            const contextMenu = document.createElement('div');
            contextMenu.className = 'mobile-context-menu';
            contextMenu.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(15, 23, 42, 0.95);
                backdrop-filter: blur(12px);
                border-radius: 16px;
                padding: 12px;
                display: flex;
                gap: 8px;
                z-index: 1000;
                box-shadow: 0 10px 25px rgba(0,0,0,0.3);
                animation: slideUp 0.3s ease-out;
            `;
            
            const actions = [
                { icon: '', label: 'Paste', action: () => pasteFromClipboard(element) },
                { icon: '', label: 'Clear', action: () => { element.value = ''; clearResults(); } },
                { icon: '', label: 'Analyze', action: () => analyzeBias() },
                { icon: '', label: 'Close', action: () => contextMenu.remove() }
            ];
            
            actions.forEach(action => {
                const button = document.createElement('button');
                button.innerHTML = `${action.icon}<br><span style="font-size:10px">${action.label}</span>`;
                button.style.cssText = `
                    background: rgba(255,255,255,0.1);
                    border: none;
                    border-radius: 12px;
                    color: white;
                    padding: 12px 8px;
                    font-size: 16px;
                    cursor: pointer;
                    transition: all 0.2s;
                    text-align: center;
                    min-width: 60px;
                `;
                
                button.addEventListener('click', () => {
                    triggerHapticFeedback('light', button);
                    action.action();
                    contextMenu.remove();
                });
                
                button.addEventListener('mouseenter', () => {
                    button.style.background = 'rgba(255,255,255,0.2)';
                    button.style.transform = 'scale(1.05)';
                });
                
                button.addEventListener('mouseleave', () => {
                    button.style.background = 'rgba(255,255,255,0.1)';
                    button.style.transform = 'scale(1)';
                });
                
                contextMenu.appendChild(button);
            });
            
            document.body.appendChild(contextMenu);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (contextMenu.parentNode) {
                    contextMenu.remove();
                }
            }, 5000);
        }
        
        // Clipboard paste helper
        async function pasteFromClipboard(element) {
            try {
                if (navigator.clipboard && navigator.clipboard.readText) {
                    const text = await navigator.clipboard.readText();
                    element.value = text;
                    triggerHapticFeedback('success', element);
                } else {
                    // Fallback for older browsers
                    element.focus();
                    document.execCommand('paste');
                    triggerHapticFeedback('success', element);
                }
            } catch (err) {
                console.log('Paste failed:', err);
                triggerHapticFeedback('error', element);
            }
        }
        
        // Add gesture hints to elements
        function addGestureHints(element) {
            if (!element || !window.innerWidth || window.innerWidth > 768) return;
            
            // Create gesture hint container
            const hintContainer = document.createElement('div');
            hintContainer.className = 'gesture-hint';
            hintContainer.innerHTML = ' Swipe to analyze  Swipe to clear   Long press for menu';
            
            // Position relative to element
            element.style.position = 'relative';
            element.parentNode.insertBefore(hintContainer, element.nextSibling);
            
            // Show hint on first focus
            let hintShown = localStorage.getItem('biasguard-gesture-hint-shown');
            if (!hintShown) {
                element.addEventListener('focus', () => {
                    showGestureHint(element, hintContainer);
                    localStorage.setItem('biasguard-gesture-hint-shown', 'true');
                }, { once: true });
            }
            
            // Show hint when user starts typing but hasn't used gestures
            element.addEventListener('input', () => {
                if (element.value.length > 10 && !localStorage.getItem('biasguard-gestures-used')) {
                    showGestureHint(element, hintContainer);
                }
            });
        }
        
        function showGestureHint(element, hintContainer) {
            element.classList.add('show-gesture-hint');
            hintContainer.style.opacity = '1';
            
            setTimeout(() => {
                element.classList.remove('show-gesture-hint');
                hintContainer.style.opacity = '0';
            }, 3000);
        }
        
        // Track gesture usage for adaptive hints
        function trackGestureUsage(gestureType) {
            const usage = JSON.parse(localStorage.getItem('biasguard-gesture-usage') || '{}');
            usage[gestureType] = (usage[gestureType] || 0) + 1;
            localStorage.setItem('biasguard-gesture-usage', JSON.stringify(usage));
            localStorage.setItem('biasguard-gestures-used', 'true');
        }

        // Enhanced 2025 Mobile orientation change handler
        function handleOrientationChange() {
            // Update viewport custom properties
            const root = document.documentElement;
            const viewportHeight = window.visualViewport ? window.visualViewport.height : window.innerHeight;
            const viewportWidth = window.visualViewport ? window.visualViewport.width : window.innerWidth;
            
            root.style.setProperty('--viewport-height', `${viewportHeight}px`);
            root.style.setProperty('--viewport-width', `${viewportWidth}px`);
            
            // Detect orientation and update device state
            const isLandscape = window.innerWidth > window.innerHeight;
            const isMobile = window.innerWidth <= 768;
            const isTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
            
            root.style.setProperty('--is-mobile', isMobile ? '1' : '0');
            root.style.setProperty('--is-tablet', isTablet ? '1' : '0');
            
            // Handle foldable devices and orientation-specific optimizations
            if (isLandscape && isMobile) {
                document.body.classList.add('mobile-landscape');
                document.body.classList.remove('mobile-portrait');
            } else if (isMobile) {
                document.body.classList.add('mobile-portrait');
                document.body.classList.remove('mobile-landscape');
            }
            
            // Recalculate layout on orientation change with enhanced timing
            setTimeout(() => {
                // Update demo input with responsive calculations
                const demoInput = document.getElementById('demo-input');
                if (demoInput) {
                    demoInput.style.height = 'auto';
                    const minHeight = isMobile ? (isLandscape ? 100 : 150) : 150;
                    demoInput.style.height = Math.max(minHeight, demoInput.scrollHeight) + 'px';
                }
                
                // Update fixed positioning elements with hardware acceleration
                const fixedElements = document.querySelectorAll('[style*="position: fixed"]');
                fixedElements.forEach(element => {
                    element.style.transform = 'translateZ(0)';
                    element.style.willChange = 'transform';
                });
                
                // Trigger custom event for other components
                window.dispatchEvent(new CustomEvent('viewportChanged', {
                    detail: { width: viewportWidth, height: viewportHeight, isLandscape, isMobile, isTablet }
                }));
            }, 150);
        }
        
        // Initialize mobile optimizations when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initMobileOptimizations);
        } else {
            initMobileOptimizations();
        }
        
        // Enhanced 2025 Event Listeners with Visual Viewport API
        window.addEventListener('orientationchange', handleOrientationChange);
        window.addEventListener('resize', handleOrientationChange);
        
        // Visual Viewport API support for mobile keyboards and UI changes
        if (window.visualViewport) {
            window.visualViewport.addEventListener('resize', () => {
                const root = document.documentElement;
                root.style.setProperty('--viewport-height', `${window.visualViewport.height}px`);
                root.style.setProperty('--viewport-width', `${window.visualViewport.width}px`);
                
                // Handle mobile keyboard appearance
                const keyboardHeight = window.innerHeight - window.visualViewport.height;
                if (keyboardHeight > 150) { // Likely keyboard is open
                    document.body.classList.add('keyboard-open');
                    root.style.setProperty('--keyboard-height', `${keyboardHeight}px`);
                } else {
                    document.body.classList.remove('keyboard-open');
                    root.style.setProperty('--keyboard-height', '0px');
                }
            });
        }
        
        // Initial viewport setup
        if (window.visualViewport) {
            const root = document.documentElement;
            root.style.setProperty('--viewport-height', `${window.visualViewport.height}px`);
            root.style.setProperty('--viewport-width', `${window.visualViewport.width}px`);
        }
        
        // Enhanced Demo Analysis Function
        window.runDemoAnalysis = async function() {
            const input = document.getElementById('demo-input');
            const results = document.getElementById('demo-results');
            const btn = document.getElementById('demo-analyze-btn');
            const btnText = document.getElementById('btn-text');
            const btnLoading = document.getElementById('btn-loading');
            const text = input.value.trim();
            
            if (!text) {
                // Mobile-friendly notification
                input.style.borderColor = '#dc2626';
                input.placeholder = ' Please enter text to analyze first!';
                setTimeout(() => {
                    input.style.borderColor = '#e5e7eb';
                    input.placeholder = "Try: 'Women are bad at math' or 'All politicians are corrupt' or paste your own content...";
                }, 2000);
                return;
            }
            
            // Track demo interaction start
            const trackingStartTime = performance.now();
            trackConversionFunnel('demo_started', { 
                textLength: text.length, 
                analysisMode: currentAnalysisMode,
                isCodeAnalysis: currentAnalysisMode === 'code'
            });
            
            // Instant button feedback
            btn.disabled = true;
            btnText.style.display = 'none';
            btnLoading.style.display = 'inline';
            btn.style.background = '#6b7280';
            
            // Show immediate progress
            results.style.display = 'block';
            results.innerHTML = `
                <div style="text-align: center; padding: 1.5rem;">
                    <div style="display: inline-block; width: 24px; height: 24px; border: 2px solid #e5e7eb; border-top: 2px solid #1e40af; border-radius: 50%; animation: spin 0.8s linear infinite;"></div>
                    <p style="margin: 1rem 0 0 0; color: #6b7280; font-size: 0.9rem;"> Lightning-fast analysis in progress...</p>
                    <div style="background: #f3f4f6; height: 4px; border-radius: 2px; margin: 1rem auto 0; width: 200px; overflow: hidden;">
                        <div style="background: #1e40af; height: 100%; width: 0%; border-radius: 2px; animation: progress 0.4s ease-out forwards;"></div>
                    </div>
                </div>
                <style>
                    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
                    @keyframes progress { 0% { width: 0%; } 100% { width: 100%; } }
                </style>
            `;
            
            // Track start time for processing display
            const startTime = performance.now();
            
            // Check subscription limits before analysis
            if (stripeHandler && !stripeHandler.canPerformAnalysis('basic')) {
                stripeHandler.showUpgradeModal('usage_limit');
                return;
            }
            
            // Optimized for cash flow - faster response
            await new Promise(resolve => setTimeout(resolve, 300));
            
            try {
                let analysis;
                
                // Determine analysis type based on current mode
                if (currentAnalysisMode === 'code' && codeBiasEngine) {
                    try {
                        // Use code bias detection engine
                        analysis = await codeBiasEngine.analyzeCode(text, { filename: 'user_input.js' });
                        console.log(' Code bias analysis completed:', analysis);
                    } catch (codeError) {
                        console.warn(' Code analysis failed, falling back to unified engine:', codeError);
                        // Fallback to unified pattern engine
                        if (unifiedPatternEngine) {
                            analysis = await unifiedPatternEngine.analyzeUnified(text);
                            analysis.fallbackUsed = true;
                            analysis.fallbackReason = 'Code analysis engine error';
                        } else {
                            analysis = await mlEngine.analyzeAdvanced(text);
                            analysis.fallbackUsed = true;
                            analysis.fallbackReason = 'Code analysis engine error, unified engine unavailable';
                        }
                    }
                } else if (currentAnalysisMode === 'code' && !codeBiasEngine) {
                    console.warn(' Code bias engine not available, using unified pattern engine');
                    // Use unified pattern engine as fallback
                    if (unifiedPatternEngine) {
                        analysis = await unifiedPatternEngine.analyzeUnified(text);
                        analysis.fallbackUsed = true;
                        analysis.fallbackReason = 'Code analysis engine not loaded';
                    } else {
                        analysis = await mlEngine.analyzeAdvanced(text);
                        analysis.fallbackUsed = true;
                        analysis.fallbackReason = 'Code analysis and unified engines not available';
                    }
                } else {
                    // Use unified pattern engine as primary for text analysis (Step 1 improvement)
                    if (unifiedPatternEngine) {
                        try {
                            analysis = await unifiedPatternEngine.analyzeUnified(text);
                            console.log(' Unified pattern analysis completed:', analysis);
                        } catch (unifiedError) {
                            console.warn(' Unified engine failed, falling back to WebAssembly engine:', unifiedError);
                            analysis = await mlEngine.analyzeAdvanced(text);
                            analysis.fallbackUsed = true;
                            analysis.fallbackReason = 'Unified pattern engine error';
                        }
                    } else {
                        // Fallback to original WebAssembly engine
                        analysis = await mlEngine.analyzeAdvanced(text);
                        console.log(' WebAssembly ML analysis completed:', analysis);
                    }
                }
                
                // Step 3: Advanced Counterfactual Analysis (if available and subscription allows)
                let counterfactualAnalysis = null;
                if (counterfactualAnalysisEngine && currentAnalysisMode === 'text') {
                    if (!stripeHandler || stripeHandler.canPerformAnalysis('counterfactual')) {
                        try {
                            console.log(' Running counterfactual analysis...');
                            counterfactualAnalysis = await counterfactualAnalysisEngine.analyzeCounterfactual(
                                text, 
                                { unifiedEngine: unifiedPatternEngine }
                            );
                            console.log(' Counterfactual analysis completed:', counterfactualAnalysis);
                            
                            // Track usage
                            if (stripeHandler) stripeHandler.trackAnalysisUsage('counterfactual');
                        } catch (cfError) {
                            console.warn(' Counterfactual analysis failed:', cfError);
                        }
                    } else {
                        console.log(' Counterfactual analysis requires subscription upgrade');
                    }
                }
                
                // Step 4: Neural Howlround Prevention (Enterprise feature)
                if (neuralHowlroundPrevention && analysis.overallScore > 60) {
                    if (!stripeHandler || stripeHandler.canPerformAnalysis('neural_howlround')) {
                        try {
                            console.log(' Applying neural howlround prevention...');
                            
                            // Update bias history for howlround detection
                            neuralHowlroundPrevention.updateBiasHistory(analysis);
                            
                            // Detect howlround patterns
                            const howlroundDetection = neuralHowlroundPrevention.detectNeuralHowlround(
                                neuralHowlroundPrevention.biasHistory
                            );
                            
                            // Apply attenuation if needed
                            if (howlroundDetection.detected || analysis.overallScore > 75) {
                                analysis = await neuralHowlroundPrevention.applyBiasAttenuation(
                                    analysis.overallScore, 
                                    analysis
                                );
                                console.log(' Neural howlround prevention applied');
                            }
                        } catch (neuralError) {
                            console.warn(' Neural howlround prevention failed:', neuralError);
                        }
                    }
                }
                
                // Track basic analysis usage
                if (stripeHandler) {
                    stripeHandler.trackAnalysisUsage('basic');
                }
                
                const processingTime = Math.round(performance.now() - startTime);
                
                // Display results with conversion focus
                const riskLevel = analysis.overallScore >= 70 ? 
                    { level: 'HIGH', color: '#dc2626', emoji: '' } :
                    analysis.overallScore >= 30 ? 
                    { level: 'MODERATE', color: '#f59e0b', emoji: '' } :
                    { level: 'LOW', color: '#059669', emoji: '' };
                
                results.innerHTML = `
                    ${analysis.fallbackUsed ? `
                        <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem;">
                            <div style="display: flex; align-items: center;">
                                <span style="font-size: 1.2rem; margin-right: 0.5rem;"></span>
                                <div>
                                    <strong style="color: #92400e;">Fallback Analysis Used</strong>
                                    <p style="margin: 0.25rem 0 0 0; color: #92400e; font-size: 0.9rem;">${analysis.fallbackReason}</p>
                                </div>
                            </div>
                        </div>
                    ` : ''}
                    
                    <div style="border-left: 4px solid ${riskLevel.color}; padding-left: 1rem; margin-bottom: 2rem;">
                        <h3 style="color: ${riskLevel.color}; font-size: 1.5rem; margin: 0 0 0.5rem 0;">
                            ${riskLevel.emoji} ${riskLevel.level} BIAS RISK
                            ${currentAnalysisMode === 'code' && !analysis.fallbackUsed ? ' (CODE)' : ''}
                        </h3>
                        <p style="font-size: 1.25rem; font-weight: 600; color: #111827; margin: 0;">
                            Bias Score: ${Math.round(analysis.overallScore)}%
                            ${analysis.language && analysis.language !== 'text' ? `  Language: ${analysis.language.toUpperCase()}` : ''}
                        </p>
                    </div>
                    
                    ${analysis.patterns && analysis.patterns.length > 0 ? `
                        <div style="margin-bottom: 2rem;">
                            <h4 style="color: #111827; margin-bottom: 1rem;"> Detected Patterns:</h4>
                            ${analysis.patterns.map(pattern => {
                                const patternTitle = currentAnalysisMode === 'code' ? 
                                    pattern.type.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase()) :
                                    pattern.type.replace(/([A-Z])/g, ' $1');
                                
                                const matchDisplay = currentAnalysisMode === 'code' && pattern.matches ? 
                                    pattern.matches.map(match => `Line ${match.line}: ${match.text.substring(0, 80)}${match.text.length > 80 ? '...' : ''}`).join('<br>') :
                                    Array.isArray(pattern.matches) ? pattern.matches.join(', ') : 
                                    typeof pattern.matches === 'string' ? pattern.matches : 'Pattern detected';
                                
                                return `
                                <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                                        <span style="font-size: 1.2rem; margin-right: 0.5rem;">${pattern.icon || ''}</span>
                                        <strong style="color: ${pattern.severity === 'critical' || pattern.severity === 'high' ? '#dc2626' : pattern.severity === 'medium' ? '#f59e0b' : '#6b7280'};">
                                            ${patternTitle} (${pattern.severity})
                                    </strong>
                                </div>
                                    <p style="margin: 0.5rem 0; color: #6b7280;">${pattern.description}</p>
                                    ${matchDisplay ? `
                                        <div style="background: #f3f4f6; padding: 0.75rem; border-radius: 0.25rem; margin-top: 0.5rem; font-family: monospace; font-size: 0.8rem; color: #374151; line-height: 1.4;">
                                            ${matchDisplay}
                                        </div>
                                    ` : ''}
                                    ${pattern.recommendations && pattern.recommendations.length > 0 ? `
                                        <div style="margin-top: 0.75rem;">
                                            <strong style="color: #059669; font-size: 0.9rem;"> Recommendations:</strong>
                                            <ul style="margin: 0.25rem 0 0 1rem; padding: 0; color: #6b7280; font-size: 0.85rem;">
                                                ${pattern.recommendations.slice(0, 3).map(rec => `<li style="margin-bottom: 0.25rem;">${rec}</li>`).join('')}
                                            </ul>
                                        </div>
                                    ` : ''}
                                </div>
                            `;
                            }).join('')}
                        </div>
                    ` : ''}
                    
                    <div style="background: linear-gradient(135deg, #1e40af 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
                        <h4 style="margin: 0 0 1rem 0; font-size: 1.25rem;"> Ready to Eliminate Costly Bias?</h4>
                        <p style="margin: 0 0 1.5rem 0; opacity: 0.9;">
                            This demo shows just the basics. Get unlimited analysis, API access, and advanced features.
                        </p>
                        <div style="display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap; margin-top: 1rem;">
                            <a href="#" onclick="initiateStripeCheckout('starter', 'price_1RsDxiL7UMRowhrwAa7Zimok'); return false;" 
                               style="background: #fbbf24; color: #111827; padding: 0.75rem 1.25rem; border-radius: 0.5rem; font-weight: 600; text-decoration: none; display: inline-block; font-size: 0.9rem; text-align: center; min-width: 140px;"
                               onclick="gtag && gtag('event', 'purchase_intent', { 'event_category': 'conversion', 'event_label': 'demo_to_purchase' });">
                                 Start Now - $19/mo
                            </a>
                            <button onclick="resetDemo()"
                                    style="background: transparent; border: 2px solid white; color: white; padding: 0.75rem 1.25rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; font-size: 0.9rem; min-width: 140px;">
                                 Try Another Text
                            </button>
                        </div>
                    </div>
                `;
                
                // Reset button state
                btn.disabled = false;
                btnText.style.display = 'inline';
                btnLoading.style.display = 'none';
                btn.style.background = '#1e40af';
                
                // Show processing time
                const processingTimeEl = document.getElementById('processing-time');
                const timeValue = document.getElementById('time-value');
                if (processingTimeEl && timeValue) {
                    timeValue.textContent = processingTime;
                    processingTimeEl.style.display = 'block';
                }
                
                // Track demo completion
                trackConversionFunnel('demo_completed', { 
                    analysisTime: processingTime,
                    biasScore: Math.round(analysis.overallScore),
                    category: riskLevel.level.toLowerCase(),
                    patternsFound: analysis.patterns ? analysis.patterns.length : 0,
                    analysisMode: currentAnalysisMode,
                    isCodeAnalysis: currentAnalysisMode === 'code',
                    language: analysis.language || 'text'
                });
                
                // Show post-demo conversion after a delay
                setTimeout(() => {
                    const postConversion = document.getElementById('post-demo-conversion');
                    if (postConversion) {
                        postConversion.style.display = 'block';
                        postConversion.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        
                        // Track conversion view
                        if (typeof demoStats !== 'undefined') {
                            demoStats.conversionViewed++;
                        }
                    }
                }, 2000);
                
                // Track demo completion
                if (typeof demoStats !== 'undefined') {
                    demoStats.analysesRun++;
                }
                
                // Track conversion event
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'demo_completed', {
                        'event_category': 'engagement',
                        'event_label': 'bias_demo',
                        'value': analysis.overallScore,
                        'processing_time': processingTime
                    });
                }
                
            } catch (error) {
                // Reset button state on error
                btn.disabled = false;
                btnText.style.display = 'inline';
                btnLoading.style.display = 'none';
                btn.style.background = '#1e40af';
                
                results.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #dc2626;">
                        <p style="margin-bottom: 1rem;"> Demo temporarily unavailable.</p>
                        <a href="#" onclick="initiateStripeCheckout('starter', 'price_1RsDxiL7UMRowhrwAa7Zimok'); return false;" 
                           style="background: #1e40af; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; text-decoration: none; font-weight: 600;">
                            Start Paid Plan - Guaranteed Uptime
                        </a>
                    </div>
                `;
            }
        };
        
        // Apply mobile optimization for demo scrolling
        if (window.innerWidth <= 768) {
            const originalRunDemo = window.runDemoAnalysis;
            window.runDemoAnalysis = async function() {
                await originalRunDemo();
                
                // Scroll to results on mobile after analysis
                setTimeout(() => {
                    const results = document.getElementById('demo-results');
                    if (results && results.style.display !== 'none') {
                        results.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                    }
                }, 500);
            };
        }
        
        // Code Examples for Code Analysis Mode
        const codeExamples = {
            1: {
                code: `function calculateLoanApproval(applicant) {
    // Discriminatory logic based on name
    if (applicant.name.includes('Chang') || applicant.name.includes('Rodriguez')) {
        return false; // Reject based on ethnicity-associated names
    }
    
    // Wealth-based discrimination
    if (applicant.zipCode.startsWith('90210')) {
        return true; // Rich neighborhood auto-approve
    }
    
    // Age discrimination
    if (applicant.age > 65) {
        return false; // Reject elderly applicants
    }
    
    return evaluateCredit(applicant);
}`,
                expectedScore: 85,
                category: "discriminatory-logic",
                language: "javascript"
            },
            2: {
                code: `// This system works better for men than women
// because women are generally bad at math
function calculateSalary(employee) {
    let baseSalary = employee.experience * 1000;
    
    // Use blacklist for certain departments
    const blackList = ['diversity', 'inclusion'];
    if (blackList.includes(employee.department)) {
        baseSalary *= 0.8; // Reduce salary
    }
    
    // Male employees get bonus (biased logic)
    if (employee.gender === 'male') {
        baseSalary *= 1.2;
    }
    
    // manHours calculation (biased variable naming)
    const manHours = employee.hoursWorked;
    
    return baseSalary;
}`,
                expectedScore: 45,
                category: "biased-variables",
                language: "javascript"
            },
            3: {
                code: `function calculateSalary(employee) {
    const baseSalary = employee.experience * 1000;
    const performanceMultiplier = employee.performanceScore / 100;
    const skillBonus = employee.certifications * 500;
    
    return baseSalary * performanceMultiplier + skillBonus;
}

function evaluateCandidate(candidate) {
    const skills = candidate.technicalSkills;
    const experience = candidate.yearsExperience;
    const portfolio = candidate.portfolioQuality;
    
    return (skills * 0.4) + (experience * 0.3) + (portfolio * 0.3);
}`,
                expectedScore: 5,
                category: "clean-code",
                language: "javascript"
            }
        };
        
        // Analysis Mode Switching with Architecture Optimization
        window.switchAnalysisMode = function(mode) {
            // Validate mode
            if (!['text', 'code'].includes(mode)) {
                console.warn('Invalid analysis mode:', mode);
                return;
            }
            
            currentAnalysisMode = mode;
            
            // Get UI elements with error checking
            const textBtn = document.getElementById('text-mode-btn');
            const codeBtn = document.getElementById('code-mode-btn');
            const textExamples = document.querySelector('.demo-examples > div:not(#code-examples)');
            const codeExamplesDiv = document.getElementById('code-examples');
            const input = document.getElementById('demo-input');
            
            // Check if required elements exist
            if (!textBtn || !codeBtn || !input) {
                console.error('Required UI elements not found for mode switching');
                return;
            }
            
            if (mode === 'text') {
                // Update button styles
                textBtn.style.background = '#1e40af';
                textBtn.style.color = 'white';
                codeBtn.style.background = 'transparent';
                codeBtn.style.color = '#6b7280';
                
                // Show text examples, hide code examples
                if (textExamples) textExamples.style.display = 'block';
                if (codeExamplesDiv) codeExamplesDiv.style.display = 'none';
                
                // Update placeholder
                input.placeholder = "Click an example on the left, or paste your own text here...";
                input.style.fontFamily = "'Inter', system-ui, -apple-system, sans-serif";
                
            } else if (mode === 'code') {
                // Check if code engine is available
                if (!codeBiasEngine) {
                    console.warn('Code analysis engine not available, staying in text mode');
                    // Show user notification
                    const notification = document.createElement('div');
                    notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #fef3c7; border: 1px solid #f59e0b; color: #92400e; padding: 1rem; border-radius: 0.5rem; z-index: 1000; max-width: 300px;';
                    notification.innerHTML = ' Code analysis engine is not available. Using text analysis mode.';
                    document.body.appendChild(notification);
                    setTimeout(() => notification.remove(), 4000);
                    return;
                }
                
                // Update button styles
                codeBtn.style.background = '#1e40af';
                codeBtn.style.color = 'white';
                textBtn.style.background = 'transparent';
                textBtn.style.color = '#6b7280';
                
                // Show code examples, hide text examples
                if (textExamples) textExamples.style.display = 'none';
                if (codeExamplesDiv) codeExamplesDiv.style.display = 'block';
                
                // Update placeholder and font
                input.placeholder = "Click a code example on the left, or paste your own code here...";
                input.style.fontFamily = "'Fira Code', 'Monaco', 'Consolas', monospace";
            }
            
            // Clear current input and results
            if (typeof clearDemo === 'function') {
                clearDemo();
            } else {
                // Fallback clear functionality
                const input = document.getElementById('demo-input');
                const results = document.getElementById('demo-results');
                if (input) input.value = '';
                if (results) results.style.display = 'none';
            }
        };
        
        // Load Code Example
        window.loadCodeExample = function(exampleId) {
            const example = codeExamples[exampleId];
            if (!example) return;
            
            const input = document.getElementById('demo-input');
            const results = document.getElementById('demo-results');
            
            // Clear previous results
            results.style.display = 'none';
            
            // Load example code
            input.value = example.code;
            input.style.height = 'auto';
            input.style.height = Math.max(200, input.scrollHeight) + 'px';
            
            // Update analyze button
            updateAnalyzeButton();
            
            // Track example loading
            if (typeof trackEvent !== 'undefined') {
                trackEvent('demo', 'code_example_loaded', null, `code_example_${exampleId}`);
            }
        };
        
        // Reset demo function
        window.resetDemo = function() {
            const input = document.getElementById('demo-input');
            const results = document.getElementById('demo-results');
            const btn = document.getElementById('demo-analyze-btn');
            const btnText = document.getElementById('btn-text');
            const btnLoading = document.getElementById('btn-loading');
            
            input.value = '';
            results.style.display = 'none';
            btn.disabled = false;
            btnText.style.display = 'inline';
            btnLoading.style.display = 'none';
            btn.style.background = '#1e40af';
            input.focus();
        };
    </script>

    <!-- Live Reload Script - Disabled for stability -->
    <script>
        if (window.location.hostname === 'localhost') {
            console.log(' BiasGuard Dev Server Active');
            console.log(' Server: http://localhost:3009');
            console.log(' PWA Features: Active');
            console.log(' Live reload: Disabled (manual refresh needed)');
        }
    </script>
</body>
</html> 